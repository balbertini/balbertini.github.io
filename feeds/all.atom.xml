<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>B.Albertini's site</title><link href="https://balbertini.github.io/" rel="alternate"></link><link href="https://balbertini.github.io/feeds/all.atom.xml" rel="self"></link><id>https://balbertini.github.io/</id><updated>2021-05-04T21:04:37-03:00</updated><subtitle>Professor</subtitle><entry><title>Configurando editores para o GHDL-LS</title><link href="https://balbertini.github.io/vhdl_ghdl_ls-pt_BR.html" rel="alternate"></link><published>2021-05-03T15:25:45-03:00</published><updated>2021-05-04T21:04:33-03:00</updated><author><name>Guilherme Salustiano</name></author><id>tag:balbertini.github.io,2021-05-03:/vhdl_ghdl_ls-pt_BR.html</id><summary type="html">&lt;p&gt;Como instalar e integrar o GHDL-LS ao seu editor de texto.&lt;/p&gt;</summary><content type="html">&lt;p&gt;O GHDL √© um analisador, compilador e simulador para VHDL, r√°pido e leve ideal para prototipa√ß√£o.&lt;/p&gt;
&lt;h2&gt;Instalando o GHDL e GHDL language server no Linux&lt;/h2&gt;
&lt;p&gt;Para instalar o language server √© &lt;a href="https://ghdl.github.io/ghdl/development/building/index.html"&gt;preciso compilar o GHDL manualmente&lt;/a&gt;:&lt;/p&gt;
&lt;p&gt;√â necess√°rio ter o &lt;code&gt;gcc-gnat&lt;/code&gt; e o &lt;code&gt;make&lt;/code&gt;, caso n√£o o tenha basta rodar &lt;code&gt;sudo apt install gnat make zlib1g-dev&lt;/code&gt;.  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Baixe o c√≥digo do GHDL via &lt;a href="https://github.com/ghdl/ghdl/archive/refs/heads/master.zip"&gt;zip&lt;/a&gt; ou &lt;code&gt;git clone https://github.com/ghdl/ghdl.git&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;Entre no diret√≥rio baixado e configure o instalador com &lt;code&gt;./configure --prefix=/usr/local&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;Compile o GHDL com &lt;code&gt;make&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;Instale o GHDL com &lt;code&gt;make install&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;Instale o GHDL-LS com &lt;code&gt;pip3 install .&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;Como o GHDL-LS foi instalado com o PIP ele ser√° colocado em &lt;code&gt;~/.local/bin/ghdl-ls&lt;/code&gt;, para facilitar podemos adiciona-lo no &lt;code&gt;$PATH&lt;/code&gt; com &lt;code&gt;echo 'export PATH=$HOME/.local/bin:$PATH' &amp;gt;&amp;gt; ~/.bashrc &amp;amp;&amp;amp; source ~/.bashrc&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Configurando o editor para usar o GHDL-LS&lt;/h2&gt;
&lt;h3&gt;Oque √© o &lt;em&gt;Language Service Protocol&lt;/em&gt; (LSP)&lt;/h3&gt;
&lt;p&gt;Suportar o &lt;em&gt;autocomplete&lt;/em&gt;, checagem de sintaxe e outras ferramentas de edi√ß√£o √© uma tarefa complexa. At√© pouco tempo atras cada IDE tinha sua pr√≥pria forma de fazer isso, e cada novo editor precisava reinventar a roda.
O VSCode vem com uma nova abordagem, a biblioteca rodando seu pr√≥prio processo e se comunicando com o editor via um protocolo (o LSP) podendo assim ser utilizado por diversos editores.&lt;/p&gt;
&lt;h3&gt;&lt;a href="https://neovim.io/"&gt;Neovim&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;O Neovim 0.5v j√° vem com um &lt;a href="https://neovim.io/doc/user/lsp.html"&gt;cliente LSP integrado&lt;/a&gt; que ser√° usado nesse tutorial. H√° outras op√ß√µes como o &lt;a href="https://github.com/neoclide/coc.nvim"&gt;coc.nvim&lt;/a&gt; e &lt;a href="https://github.com/neomake/neomake"&gt;neomake&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Tendo seu LSP j√° configurado basta cadastrar o &lt;code&gt;ghdl-ls&lt;/code&gt; no seu &lt;code&gt;init.nvim&lt;/code&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    &lt;span class="n"&gt;lua&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;EOF&lt;/span&gt;
    &lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;lspconfig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;require&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;lspconfig&amp;#39;&lt;/span&gt;
    &lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;configs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;require&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;lspconfig/configs&amp;#39;&lt;/span&gt;
    &lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;attach&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;require&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;completion&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;on_attach&lt;/span&gt;
    &lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;util&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;require&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;lspconfig/util&amp;quot;&lt;/span&gt;

    &lt;span class="kr"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;lspconfig&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ghdl&lt;/span&gt; &lt;span class="kr"&gt;then&lt;/span&gt;
        &lt;span class="n"&gt;configs&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ghdl&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;default_config&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;cmd&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;ghdl-ls&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
                &lt;span class="n"&gt;filetypes&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;vhd, vhdl&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
                &lt;span class="n"&gt;root_dir&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;util&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;root_pattern&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;hdl-prj.json&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;.git&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="p"&gt;},&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="kr"&gt;end&lt;/span&gt;

    &lt;span class="n"&gt;lspconfig&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ghdl&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;{}&lt;/span&gt;

    &lt;span class="n"&gt;EOF&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Um exemplo de &lt;code&gt;nvim&lt;/code&gt; configurado pode ser encontrado &lt;a href="https://github.com/guissalustiano/dots/tree/97dde692399437ce2077eb4b7199483801efb202/nvim"&gt;aqui&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Editor com um c√≥digo VHDL errado mostrando os erros" src="https://balbertini.github.io/images/vhdl/ghdl-ls_example.png"&gt;&lt;/p&gt;
&lt;h2&gt;Notas do professor&lt;/h2&gt;
&lt;p&gt;A maioria dos exemplos aqui se aplicam somente aos sistema *nix, mas voc√™ pode facilmente adaptar para o seu sistema e no pr√≥prio &lt;a href="https://github.com/ghdl/ghdl-language-server"&gt;GIT&lt;/a&gt; do projeto os desenvolvedores fornecem um &lt;em&gt;docker&lt;/em&gt; que pode ser executado em qualquer plataforma suportada.&lt;/p&gt;
&lt;p&gt;H√° outros editores (na verdade quase todos modernos) que suportam LSP. Veja se o seu suporta e, usando as informa√ß√µes que o Guilherme descreveu neste &lt;em&gt;post&lt;/em&gt;, voc√™ poder√° facilmente integrar com o GHDL-LS.&lt;/p&gt;
&lt;h3&gt;Contribui√ß√µes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;03/mai/2021: Guilherme Salustiano escreveu este &lt;em&gt;post&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;04/mai/2021: Bruno (professor) editou para corrigir alguns erros e as notas no final do &lt;em&gt;post&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;</content><category term="vhdl"></category><category term="vhdl"></category><category term="ghdl"></category><category term="linter"></category></entry><entry><title>Como se cadastrar na plataforma de extens√£o da USP</title><link href="https://balbertini.github.io/cursosextensao-pt_BR.html" rel="alternate"></link><published>2021-01-31T18:30:36-03:00</published><updated>2021-01-31T18:30:36-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2021-01-31:/cursosextensao-pt_BR.html</id><summary type="html">&lt;p&gt;Tutorial de como se cadastrar na plataforma de cursos de extens√£o da USP&lt;/p&gt;</summary><content type="html">&lt;p&gt;A USP oferece v√°rios cursos de extens√£o atrav√©s da plataforma &lt;a href="https://cursosextensao.usp.br"&gt;cursosextensao.usp.br&lt;/a&gt;. Esta plataforma √© uma instala√ß√£o de um AVA (Ambiente Virtual de Aprendizagem) baseada no Moodle. O que diferencia esta plataforma das outras usadas nos cursos de gradua√ß√£o e p√≥s-gradua√ß√£o da USP √© que qualquer pessoa pode se inscrever, tornando-a ideal para cursos de extens√£o oferecidos para o p√∫blico em geral.&lt;/p&gt;
&lt;h1&gt;Acesso para a comunidade USP&lt;/h1&gt;
&lt;p&gt;Se voc√™ faz parte da comunidade USP (tem um n√∫mero USP e uma senha √∫nica para os sistemas da universidade), voc√™ deve acessar a plataforma atrav√©s do seu n√∫mero USP, clicando no bot√£o &lt;code&gt;acessar&lt;/code&gt; (o bot√£o amarelo no canto direito da p√°gina principal) e em seguida no bot√£o &lt;code&gt;acesso via senha USP&lt;/code&gt; (o bot√£o azul na caixa que abrir√° quando clicar no bot√£o amarelo). N√£o √© necess√°rio se cadastrar na plataforma. O restante deste tutorial est√° focado no cadastro de usu√°rios externos que desejam se cadastrar na plataforma.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Acesso comunidade USP" src="https://balbertini.github.io/images/educacao/ext01.png"&gt;&lt;/p&gt;
&lt;h1&gt;Acesso para a comunidade externa&lt;/h1&gt;
&lt;p&gt;Para come√ßar, tenha em m√£os o seu CPF e o C√≥digo de Convite. O c√≥digo de convite foi enviado para voc√™ pode email ap√≥s a aprova√ß√£o da sua inscri√ß√£o no curso (voc√™ deve ter realizado sua inscri√ß√£o no sistema Apolo da USP). Caso n√£o tenha um C√≥digo de Convite, contate o professor do sue curso.&lt;/p&gt;
&lt;p&gt;Com o CPF e C√≥digo de convite em m√£os, acesse a plataforma em &lt;a href="https://cursosextensao.usp.br"&gt;cursosextensao.usp.br&lt;/a&gt;. Voc√™ ver√° uma tela como a abaixo.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Acesso comunidade USP" src="https://balbertini.github.io/images/educacao/ext02.png"&gt;&lt;/p&gt;
&lt;p&gt;Nesta tela, clique em &lt;code&gt;cadastrar&lt;/code&gt; conforme mostrado na image. O navegador ir√° para outra tela, como a abaixo, onde voc√™ entrar√° com o seu CPF e com o C√≥digo de Convite.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Acesso comunidade USP" src="https://balbertini.github.io/images/educacao/ext03.png"&gt;&lt;/p&gt;
&lt;p&gt;Ap√≥s preencher corretamente, clique em &lt;code&gt;Criar nova conta&lt;/code&gt;. √â importante usar o mesmo CPF que voc√™ usou para se cadastrar nos sistemas USP (no Apolo) quando se inscreveu oficialmente no curso.&lt;/p&gt;
&lt;p&gt;Quando entrar o seu CPF e C√≥digo de Convite, voc√™ ir√° para a tela final de cadastro, onde poder√° preencher os seus dados pessoais, como na imagem abaixo.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Acesso comunidade USP" src="https://balbertini.github.io/images/educacao/ext04.png"&gt;&lt;/p&gt;
&lt;p&gt;√â muito importante voc√™ usar o mesmo email que usou para se cadastrar nos sistemas da USP (Apolo) quando se inscreveu para o curso. Quando tiver preenchido todas as informa√ß√µes, clique em &lt;code&gt;Criar minha conta&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Pronto! Voc√™ est√° inscrito na plataforma. Se voc√™ foi orientado a se inscrever no curso usando o m√©todo de auto-inscri√ß√£o, procure o curso e use o mesmo C√≥digo de convite. Caso contr√°rio, aguarde e o professor em breve te inscrever√° no curso. Guarde bem a senha que usou para se cadastrar na plataforma pois ela ser√° usada durante todo o curso!&lt;/p&gt;
&lt;p&gt;Abra√ßos,
Bruno Albertini&lt;/p&gt;</content><category term="educacao"></category><category term="educacao"></category><category term="cursosextensao.usp.br"></category></entry><entry><title>Fun√ß√µes</title><link href="https://balbertini.github.io/vhdl_function-pt_BR.html" rel="alternate"></link><published>2020-10-17T13:42:51-03:00</published><updated>2021-05-03T08:55:51-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2020-10-17:/vhdl_function-pt_BR.html</id><summary type="html">&lt;p&gt;Fun√ß√µes em VHDL.&lt;/p&gt;</summary><content type="html">&lt;p&gt;As fun√ß√µes em VHDL s√£o bastante √∫teis para reaproveitar c√≥digo. Elas funcionam como uma fun√ß√£o em qualquer linguagem estruturada. Neste artigo, vamos ver o b√°sico de como escrever fun√ß√µes em VHDL.&lt;/p&gt;
&lt;p&gt;A sintaxe de uma fun√ß√£o em VHDL √©:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;pure&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="k"&gt;impure&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;function&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;nome_da_funcao&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
  &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;nome_do_parametro1&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;tipo_parametro1&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;valor_padrao&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;nome_do_parametro2&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;tipo_parametro1&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;valor_padrao&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
                                        &lt;span class="p"&gt;...&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;tipo_de_retorno&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
    &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;declaracoes_internas&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
    &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;codigo&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;function&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;A classifica√ß√£o da fun√ß√£o como pura ou impura √© opcional e indica se a fun√ß√£o pode alterar valores de entrada (&lt;code&gt;impure&lt;/code&gt;) ou n√£o (&lt;code&gt;pure&lt;/code&gt;). Por padr√£o, as fun√ß√µes s√£o puras, ou seja qualquer altera√ß√£o nos par√¢metros de entrada √© considerada inv√°lida. Os valores retornados por uma fun√ß√£o impura podem depender de valores externos (e.g. vari√°veis compartilhadas).&lt;/p&gt;
&lt;p&gt;O &lt;code&gt;nome_da_funcao&lt;/code&gt; pode ser o que o projetista desejar, seguindo a nomenclatura obrigat√≥ria de VHDL para &lt;a href="https://balbertini.github.io/vhdl_fundamentals-pt_BR.html"&gt;identificadores&lt;/a&gt;. O mesmo se aplica para os par√¢metros. Os tipos dos par√¢metros podem ser &lt;a href="https://balbertini.github.io/vhdl_datatypes-pt_BR.html"&gt;qualquer tipo suportado&lt;/a&gt; em VHDL, lembrando que se for um tipo n√£o-nativo, deve-se incluir a biblioteca correta no projeto. O valor padr√£o dos par√¢metros √© pouco utilizado e serve para preencher os par√¢metros n√£o especificados no momento da chamada. O tipo de retorno adere √†s mesmas regras dos par√¢metros.&lt;/p&gt;
&lt;p&gt;As &lt;code&gt;declaracoes_internas&lt;/code&gt; s√£o todas as vari√°veis e constantes utilizadas, no mesmo formato utlizado em um processo ou arquitetura, mas as fun√ß√µes n√£o suportam sinais.&lt;/p&gt;
&lt;p&gt;O c√≥digo de uma fun√ß√£o √© intrinsecamente sequencial, ent√£o pode-se usar qualquer comando de VHDL, incluindo os exclusivos para uso em processos. A √∫nica obrigatoriedade √© que a fun√ß√£o retorne um e somente um valor condizente com o &lt;code&gt;tipo_de_retorno&lt;/code&gt;. √â poss√≠vel usar comandos condicionais (e.g. &lt;code&gt;if&lt;/code&gt;), mas a todas as condi√ß√µes devem retornar um valor.&lt;/p&gt;
&lt;p&gt;As fun√ß√µes podem ser declaradas em dois lugares distintos: em um pacote contendo fun√ß√µes e no pre√¢mbulo das unidades em VHDL (e.g. arquitetura, processo, entidade, etc).&lt;/p&gt;
&lt;h1&gt;Exemplo (pre√¢mbulo)&lt;/h1&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;arch&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="nc"&gt;meuprojeto&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;function&lt;/span&gt; &lt;span class="n"&gt;equal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
    &lt;span class="k"&gt;begin&lt;/span&gt;
      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;length&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;length&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;idx&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;length&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;loop&lt;/span&gt;
          &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;/=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
          &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;loop&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="k"&gt;else&lt;/span&gt;
        &lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Size are different.&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;note&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;function&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;bva&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bvb&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
  &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;equal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bva&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;bvb&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;architecture&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;No exemplo acima a fun√ß√£o &lt;code&gt;equal&lt;/code&gt; compara dois &lt;code&gt;bit_vector&lt;/code&gt; bit a bit e retorna verdadeiro somente se ambos os vetores possu√≠rem o mesmo conte√∫do. A chave para a compara√ß√£o √© o aninhamento dos dois loops &lt;code&gt;for&lt;/code&gt;, que itera sobre os vetores comparando-os bit a bit.&lt;/p&gt;
&lt;p&gt;Note que a fun√ß√£o foi declarada no pre√¢mbulo da arquitetura, mas chamada no corpo. A fun√ß√£o n√£o √© sintetiz√°vel diretamente, mas o sintetizador ir√° produzir um comparador para calcular o valor da compara√ß√£o e us√°-lo para decidir sobre a atribui√ß√£o condicional. Para efeitos de simula√ß√£o, a fun√ß√£o demora tempo zero.&lt;/p&gt;
&lt;p&gt;A declara√ß√£o da fun√ß√£o usou a v√≠rgula para separar os par√¢metros pois eles s√£o do emsmo tipo. A mesma fun√ß√£o poderia ser reescrita como &lt;code&gt;equal(a: bit_vector; b: bit_vector)&lt;/code&gt; e a chamada continuaria exatamente igual.&lt;/p&gt;
&lt;h1&gt;Exemplo (&lt;code&gt;package&lt;/code&gt;)&lt;/h1&gt;
&lt;p&gt;No caso de um &lt;code&gt;package&lt;/code&gt;, a fun√ß√£o √© declarada dentro da biblioteca:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;package&lt;/span&gt; &lt;span class="n"&gt;minhas_funcoes&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;function&lt;/span&gt; &lt;span class="n"&gt;equal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="nc"&gt;minhas_funcoes&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;package&lt;/span&gt; &lt;span class="k"&gt;body&lt;/span&gt; &lt;span class="n"&gt;minhas_funcoes&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;function&lt;/span&gt; &lt;span class="n"&gt;equal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
    &lt;span class="k"&gt;begin&lt;/span&gt;
      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;length&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;length&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;idx&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;length&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;loop&lt;/span&gt;
          &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;/=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
          &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;loop&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="k"&gt;else&lt;/span&gt;
        &lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Size are different.&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;note&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;function&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="nc"&gt;minhas_funcoes&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Temos agora uma biblioteca que pode ser usada em qualquer projeto, bastando para isso inclu√≠-la no projeto como uma biblioteca normal. As bibliotecas do usu√°rio, quando n√£o especificado, ficam em um pacote chamado &lt;code&gt;work&lt;/code&gt;, que corresponde ao pacote de trabalho e sempre √© importado por padr√£o. A cl√°usula &lt;code&gt;use&lt;/code&gt; no entanto n√£o √© opcional pois o sintetizador precisa saber qual(is) partes do pacote deseja usar.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;library&lt;/span&gt; &lt;span class="nn"&gt;work&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;-- opcional, importada por padr√£o&lt;/span&gt;
&lt;span class="k"&gt;use&lt;/span&gt; &lt;span class="nn"&gt;work.minhas_funcoes.equal&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;-- poderia ser .all&lt;/span&gt;

&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="p"&gt;...&lt;/span&gt;

&lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;arch&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="nc"&gt;meuprojeto&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
    &lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;bva&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bvb&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
  &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;equal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bva&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;bvb&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;architecture&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</content><category term="vhdl"></category><category term="vhdl"></category><category term="basic"></category></entry><entry><title>GHDL no Windows 10</title><link href="https://balbertini.github.io/vhdl_windowsghdl-pt_BR.html" rel="alternate"></link><published>2020-09-21T22:06:21-03:00</published><updated>2020-09-21T22:06:21-03:00</updated><author><name>Edson Midorikawa</name></author><id>tag:balbertini.github.io,2020-09-21:/vhdl_windowsghdl-pt_BR.html</id><summary type="html">&lt;p&gt;Como instalar e usar o GHDL no Windows 10&lt;/p&gt;</summary><content type="html">&lt;p&gt;O Prof. Edson Midorikawa gentilmente escreveu um &lt;em&gt;quickstart&lt;/em&gt; de como instalar e usar o GHDL no Windows. Foi testado no Windows 10, mas deve funcionar com pouca o nenhuma adapta√ß√£o em outros sistemas operacionais da Microsoft.&lt;/p&gt;
&lt;p&gt;A instala√ß√£o do GHDL no Windows:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Baixar arquivo zip &lt;a href="https://github.com/ghdl/ghdl/releases/download/v0.37/ghdl-0.37-mingw32-mcode.zip"&gt;desta URL&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Descompactar os arquivos em uma pasta do computador (p.ex. &lt;code&gt;C:\Programas&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Verificar a pasta onde o arquivo &lt;code&gt;ghdl.exe&lt;/code&gt; fica localizado (p.ex. &lt;code&gt;C:\Programas\GHDL\0.37-mingw32-mcode\bin&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;No campo de busca na barra de tarefas do Windows (√≠cone de lupa ao lado do s√≠mbolo do Windows), busque a frase ".Editar as vari√°veis de ambiente do sistema" e abra o aplicativo.&lt;/li&gt;
&lt;li&gt;Clique no bot√£o &lt;strong&gt;Vari√°veis de Ambiente&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Selecione o campo Path dentro de Vari√°veis de usu√°rio para &lt;seu usuario&gt;.&lt;/li&gt;
&lt;li&gt;Clique em Editar...&lt;/li&gt;
&lt;li&gt;Clique em Novo&lt;/li&gt;
&lt;li&gt;Colar pasta do item acima (item 3)&lt;/li&gt;
&lt;li&gt;Clique OK por tr√™s vezes para finalizar&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Para rodar a simula√ß√£o com GHDL, √© preciso abrir uma janela de &lt;strong&gt;Prompt de Comandos&lt;/strong&gt; ou &lt;strong&gt;Windows Powershell&lt;/strong&gt;.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Busque a frase &lt;code&gt;cmd&lt;/code&gt; ou &lt;code&gt;powershell&lt;/code&gt; no campo de busca da barra de tarefas do Windows.&lt;/li&gt;
&lt;li&gt;Abra o aplicativo.&lt;/li&gt;
&lt;li&gt;Mude o diret√≥rio de trabalho rodando o comando cd &lt;caminho da pasta onde est√£o os arquivos VHDL&gt;. Por exemplo, &lt;code&gt;cd c:\arquivos\vhdl&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Rode os seguintes comandos para executar a compila√ß√£o e rodar o &lt;em&gt;testbench&lt;/em&gt;. Por exemplo:&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ghdl -a alarm.vhd&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ghdl -a alarm_tb.vhd&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ghdl -e alarm_tb&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ghdl -r alarm_tb&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;Observa√ß√£o:&lt;/strong&gt; a solu√ß√£o para o problema neste exemplo de uso est√° no &lt;code&gt;alarm.vhd&lt;/code&gt; e o &lt;em&gt;testbench&lt;/em&gt; est√° no &lt;code&gt;alarm_tb.vhd&lt;/code&gt;, cuja entidade (do &lt;em&gt;testbench&lt;/em&gt;) chama-se &lt;code&gt;alarm_tb&lt;/code&gt;.&lt;/p&gt;</content><category term="vhdl"></category><category term="vhdl"></category><category term="ghdl"></category></entry><entry><title>Fundamentos</title><link href="https://balbertini.github.io/vhdl_fundamentals-pt_BR.html" rel="alternate"></link><published>2020-09-18T19:49:39-03:00</published><updated>2021-05-03T08:55:51-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2020-09-18:/vhdl_fundamentals-pt_BR.html</id><summary type="html">&lt;p&gt;Fundamentos de VHDL&lt;/p&gt;</summary><content type="html">&lt;p&gt;Nest &lt;em&gt;post&lt;/em&gt; falaremos das caracter√≠sticas fundamentais da linguagem VHDL. Quando aplic√°vel, usaremos &lt;i class="fas fa-cog"&gt;&lt;/i&gt; para indicar quais vers√µes de VHDL suportam cada caracter√≠stica.&lt;/p&gt;
&lt;h1&gt;Elementos L√©xicos&lt;/h1&gt;
&lt;p&gt;VHDL n√£o diferencia mai√∫sculas de min√∫sculas. Os arquivos s√£o todos arquivos de texto e a especifica√ß√£o da linguagem admite apenas caracteres ASCII. No entanto, sugiro usar codifica√ß√£o UTF-8, limitando-se aos caracteres que tamb√©m existem no ASCII, pois isso maximiza a compatibilidade com editores e ferramentas de s√≠ntese. A extens√£o do arquivo n√£o importa muito, mas as mais comuns s√£o &lt;code&gt;.vhd&lt;/code&gt; e &lt;code&gt;.vhdl&lt;/code&gt; (n√£o use &lt;code&gt;.v&lt;/code&gt; pois esta extens√£o √© interpretada como Verilog pelas ferramentas).&lt;/p&gt;
&lt;table style="width:100%"&gt;
 &lt;tr&gt;
   &lt;td&gt;&lt;i class="fas fa-exclamation fa-2x"  style="color: #ffcc00;"&gt;&lt;/i&gt;&lt;/td&gt;
   &lt;td&gt;
    Tome cuidado com acentos pois o c√≥digo dos caracteres, mesmo em UTF-8, deve ser compat√≠vel com ASCII. Evite caracteres acentuados fora dos coment√°rios.
   &lt;/td&gt;
 &lt;/tr&gt;
&lt;/table&gt;

&lt;h2&gt;Coment√°rios&lt;/h2&gt;
&lt;p&gt;Os coment√°rios s√£o parte important√≠ssima em engenharia de software e n√£o √© diferente em engenharia de hardware. S√£o muito √∫teis para descrever as inten√ß√µes do projetista, de forma que outro projetista entenda o que foi descrito quando, posteriormente, ler o arquivo.&lt;/p&gt;
&lt;p&gt;O coment√°rio b√°sico em VHDL √© &lt;code&gt;--&lt;/code&gt;. Ap√≥s estes dois caracteres, todo o restante da linha se torna um coment√°rio. H√° tamb√©m o coment√°rio delimitado, que come√ßa com &lt;code&gt;/*&lt;/code&gt; e termina com &lt;code&gt;*/&lt;/code&gt;, √∫til para coment√°rios multi-linhas. Os coment√°rios n√£o podem ser aninhados (coment√°rio dentro de coment√°rio), mas um coment√°rio com &lt;code&gt;--&lt;/code&gt; no in√≠cio da linha desativa qualquer delimitador de coment√°rio.&lt;/p&gt;
&lt;p&gt;Por motivos √≥bvios, os coment√°rios n√£o s√£o sintetiz√°veis.&lt;/p&gt;
&lt;table style="width:100%"&gt;
 &lt;tr&gt;
   &lt;td&gt;&lt;i class="fas fa-cog fa-2x"  style="color: #009933;"&gt;&lt;/i&gt;&lt;/td&gt;
   &lt;td&gt;
    Os coment√°rios com delimitadores /* */ s√£o suportados a partir do VHDL-2008.
   &lt;/td&gt;
 &lt;/tr&gt;
&lt;/table&gt;

&lt;h3&gt;Exemplo (VHDL&amp;lt;=2002)&lt;/h3&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;-- Este √© um coment√°rio explicando o que a entidade abaixo faz. N√£o h√°&lt;/span&gt;
&lt;span class="c1"&gt;-- coment√°rios multi-linhas em VHDL&amp;lt;=2002, ent√£o usamos v√°rios coment√°rios&lt;/span&gt;
&lt;span class="c1"&gt;-- de uma linha.&lt;/span&gt;
&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;meu_circuito&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;clk&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;-- e o pulso ainda pulsa&lt;/span&gt;
         &lt;span class="n"&gt;reset&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt; &lt;span class="c1"&gt;-- zera todo mundo!&lt;/span&gt;
         &lt;span class="c1"&gt;-- TODO: adicionar as outras portas&lt;/span&gt;
       &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;meu_circuito&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;h3&gt;Exemplo (VHDL&amp;gt;=2008)&lt;/h3&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cm"&gt;/* Este √© um coment√°rio explicando o que a entidade abaixo faz. Em&lt;/span&gt;
&lt;span class="cm"&gt;   VHDL&amp;gt;=2008 podemos usar coment√°rios multi-linhas.&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;meu_circuito&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;clk&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;-- e o pulso ainda pulsa&lt;/span&gt;
         &lt;span class="n"&gt;reset&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt; &lt;span class="c1"&gt;-- zera todo mundo!&lt;/span&gt;
         &lt;span class="cm"&gt;/* TODO: adicionar as outras portas */&lt;/span&gt;
       &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;meu_circuito&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;h2&gt;Identificadores&lt;/h2&gt;
&lt;p&gt;Os identificadores s√£o cadeias de caracteres usadas para dar nomes a vari√°veis, sinais e qualquer outro elemento da descri√ß√£o. Em VHDL, o identificador pode ser uma cadeia de qualquer tamanho, desde que siga as seguintes restri√ß√µes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Deve conter somente letras (&lt;code&gt;A-Z&lt;/code&gt; e &lt;code&gt;a-z&lt;/code&gt;), d√≠gitos (&lt;code&gt;0-9&lt;/code&gt;) ou o caractere &lt;code&gt;_&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Deve come√ßar com uma letra&lt;/li&gt;
&lt;li&gt;N√£o deve terminar com um &lt;code&gt;_&lt;/code&gt; e n√£o pode conter dois &lt;code&gt;_&lt;/code&gt; seguidos&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Essas limita√ß√µes existem para que seu identificador n√£o entre em conflito com identificadores usados internamente pelas ferramentas.&lt;/p&gt;
&lt;table style="width:100%"&gt;
 &lt;tr&gt;
   &lt;td&gt;&lt;i class="fas fa-exclamation fa-2x"  style="color: #ffcc00;"&gt;&lt;/i&gt;&lt;/th&gt;
   &lt;td&gt;
    Lembre-se que VHDL n√£o diferencia mai√∫sculas de min√∫sculas, ent√£o `meu_sinal` √© o mesmo que `MEU_SINAL` ou `MeU_sInAl`.
   &lt;/td&gt;
 &lt;/tr&gt;
&lt;/table&gt;

&lt;h3&gt;Exemplo&lt;/h3&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;-- Identificadores v√°lidos&lt;/span&gt;
&lt;span class="n"&gt;meu_sinal&lt;/span&gt;
&lt;span class="n"&gt;entidadeSomadora&lt;/span&gt;
&lt;span class="c1"&gt;-- Identificadores inv√°lidos&lt;/span&gt;
&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="n"&gt;bola&lt;/span&gt; &lt;span class="c1"&gt;-- n√£o come√ßa com uma letra&lt;/span&gt;
&lt;span class="n"&gt;_meusinal&lt;/span&gt; &lt;span class="c1"&gt;-- n√£o come√ßa com uma letra&lt;/span&gt;
&lt;span class="n"&gt;meusinal_&lt;/span&gt; &lt;span class="c1"&gt;-- termina com _&lt;/span&gt;
&lt;span class="n"&gt;meu__sinal&lt;/span&gt; &lt;span class="c1"&gt;-- possui dois _ seguidos&lt;/span&gt;
&lt;span class="n"&gt;balbertini&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;usp&lt;/span&gt; &lt;span class="c1"&gt;-- possui um caractere inv√°lido (@)&lt;/span&gt;
&lt;span class="n"&gt;xo&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;xo&lt;/span&gt; &lt;span class="c1"&gt;-- possui um caractere inv√°lido (:)&lt;/span&gt;
&lt;span class="err"&gt;üòä&lt;/span&gt;&lt;span class="c1"&gt;-- possui um caractere inv√°lido (U+1F60A em UTF-8)&lt;/span&gt;
&lt;span class="c1"&gt;-- alguns sintetizadores aceitam o acento abaixo&lt;/span&gt;
&lt;span class="c1"&gt;-- mas melhor evitar&lt;/span&gt;
&lt;span class="n"&gt;sa√≠da&lt;/span&gt; &lt;span class="c1"&gt;-- possui um caractere inv√°lido (√≠)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;h2&gt;Identificadores estendidos&lt;/h2&gt;
&lt;p&gt;VHDL tamb√©m suporta o que chamamos de identificador estendido. Os identificadores estendidos n√£o tem as limita√ß√µes dos identificadores e pode-se usar qualquer coisa dentro deles. Para usar, basta colocar seu identificador entre dois &lt;code&gt;\&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;Exemplo&lt;/h3&gt;
&lt;p&gt;&lt;div class="highlight"&gt;&lt;pre&gt;
&lt;span class="c1"&gt;-- Identificadores estendidos v√°lidos&lt;/span&gt;
&lt;span class="nc"&gt;\5bola\&lt;/span&gt;
&lt;span class="nc"&gt;&amp;#92;&amp;#95;meusinal\&lt;/span&gt;
&lt;span class="nc"&gt;\meusinal_\&lt;/span&gt;
&lt;span class="nc"&gt;\MeuSinal_\&lt;/span&gt;
&lt;span class="nc"&gt;\meu__sinal\&lt;/span&gt;
&lt;span class="nc"&gt;\balbertini@usp\&lt;/span&gt;
&lt;span class="nc"&gt;\xo:xo\&lt;/span&gt;
&lt;span class="nc"&gt;\üòä\&lt;/span&gt;
&lt;span class="nc"&gt;\sa√≠da\&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;Quando usamos identificadores estendidos, a linguagem interpreta o identificador exatamente como ele √©, ent√£o neste caso a linguagem diferencia mai√∫sculas de min√∫sculas.&lt;/p&gt;
&lt;table style="width:100%"&gt;
 &lt;tr&gt;
   &lt;td&gt;&lt;i class="fas fa-exclamation fa-2x"  style="color: #ffcc00;"&gt;&lt;/i&gt;&lt;/td&gt;
   &lt;td&gt;
    Os identificadores estendidos foram criados para serem usados pelas ferramentas de s√≠ntese, facilitando a troca de informa√ß√µes. N√£o recomendamos que utilize em suas descri√ß√µes pois nem todas as ferramentas o suportam.
   &lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
   &lt;td&gt;&lt;i class="fas fa-cog fa-2x"  style="color: #009933;"&gt;&lt;/i&gt;&lt;/td&gt;
   &lt;td&gt;
    Os identificadores estendidos s√£o suportados a partir do VHDL-1993.
   &lt;/td&gt;
 &lt;/tr&gt;
&lt;/table&gt;

&lt;h2&gt;Palavras reservadas&lt;/h2&gt;
&lt;p&gt;Os comandos em VHDL s√£o chamados de palavras reservadas. Todas tem um significado especial e devem ser evitadas como identificadores. A tabela abaixo tem uma lista de todas as palavras reservadas da linguagem, em ordem alfab√©tica.&lt;/p&gt;
&lt;style type="text/css"&gt;
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
  overflow:hidden;padding:10px 5px;word-break:normal;}
.tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
  font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}
.tg .tg-baqh{text-align:center;vertical-align:top}
&lt;/style&gt;

&lt;table class="tg"&gt;
&lt;tbody&gt;
  &lt;tr&gt;
    &lt;th class="tg-baqh"&gt;abs&lt;/th&gt;
    &lt;th class="tg-baqh"&gt;else&lt;/th&gt;
    &lt;th class="tg-baqh"&gt;map&lt;/th&gt;
    &lt;th class="tg-baqh"&gt;range&lt;/th&gt;
    &lt;th class="tg-baqh"&gt;unaffected&lt;/th&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;access&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;elsif&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;mod&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;record&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;units&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;after&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;end&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;register&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;until&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;alias&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;entity&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;nand&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;reject&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;use&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;all&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;exit&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;new&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;release&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;and&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;next&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;rem&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;variable&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;architecture&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;fairness&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;nor&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;report&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;vmode&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;array&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;file&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;not&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;restrict&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;vprop&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;assert&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;for&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;null&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;restrict_guarantee&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;vunit&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;assume&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;force&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;return&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;assume_guarantee&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;function&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;of&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;rol ror&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;wait&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;attribute&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;on&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;when&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;generate&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;open&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;select&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;while&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;begin&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;generic&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;or&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;sequence&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;with&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;block&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;group&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;others&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;severity&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;xnor&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;body&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;guarded&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;out&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;shared&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;xor&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;buffer&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;signal&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;bus&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;if&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;package&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;sla&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;impure&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;parameter&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;sll&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;case&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;in&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;port&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;sra&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;component&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;inertial&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;postponed&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;srl&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;configuration&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;inout&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;procedure&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;strong&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;constant&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;is&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;process&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;subtype&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;context&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;property&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;cover&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;label&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;protected&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;then&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;library&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;pure&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;to&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;default&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;linkage&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;transport&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;disconnect&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;literal&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;type&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;downto&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;loop&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Algumas dessas palavras n√£o s√£o consideradas palavras reservadas em algumas vers√µes de VHDL, mas para manter a compatibilidade entre as vers√µes, considere esta lista como uma &lt;em&gt;lista de palavras que voc√™ n√£o deve usar&lt;/em&gt; como identificadores.&lt;/p&gt;
&lt;h2&gt;S√≠mbolos Especiais&lt;/h2&gt;
&lt;p&gt;A linguagem VHDL usa a seguinte lista de s√≠mbolos, cada um com um significado espec√≠fico na linguagem:&lt;/p&gt;
&lt;pre&gt;" # &amp; ' ( ) * + - , . / : ; &lt; = &gt; ? @ [ ] \` |&lt;/pre&gt;

&lt;p&gt;Al√©m desses, h√° s√≠mbolos com um √∫nico significado em VHDL, mas composto de dois caracteres:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="o"&gt;/=&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;??&lt;/span&gt; &lt;span class="o"&gt;?=&lt;/span&gt; &lt;span class="o"&gt;?/=&lt;/span&gt; &lt;span class="o"&gt;?&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;?&amp;lt;&lt;/span&gt; &lt;span class="o"&gt;?&amp;gt;=&lt;/span&gt; &lt;span class="o"&gt;?&amp;lt;=&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Para funcionarem, voc√™ precisa escrev√™-los sem nenhum espa√ßo entre eles (e.g. &lt;code&gt;&amp;lt;=&lt;/code&gt; √© um operador de atribui√ß√£o, mas &lt;code&gt;&amp;lt; =&lt;/code&gt; s√£o duas compara√ß√µes, de menor e igual respectivamente). Nos pr√≥ximos &lt;em&gt;posts&lt;/em&gt; falarei sobre o significado de cada um destes operadores.&lt;/p&gt;
&lt;h2&gt;Literais&lt;/h2&gt;
&lt;h3&gt;N√∫meros&lt;/h3&gt;
&lt;p&gt;H√° dois tipos de literais num√©ricos em VHDL: os inteiros e os reais. Ambos podem ser expressos usando nota√ß√£o cient√≠fica.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="c1"&gt;-- exemplo de n√∫mero inteiro&lt;/span&gt;
&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="c1"&gt;-- exemplo de n√∫mero inteiro&lt;/span&gt;
&lt;span class="mi"&gt;123&lt;/span&gt; &lt;span class="c1"&gt;-- exemplo de n√∫mero inteiro&lt;/span&gt;
&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="n"&gt;E12&lt;/span&gt; &lt;span class="c1"&gt;-- exemplo de n√∫mero inteiro em nota√ß√£o cient√≠fica&lt;/span&gt;
&lt;span class="mi"&gt;123&lt;/span&gt;&lt;span class="n"&gt;e45&lt;/span&gt; &lt;span class="c1"&gt;-- exemplo de n√∫mero inteiro em nota√ß√£o cient√≠fica&lt;/span&gt;
&lt;span class="mi"&gt;123&lt;/span&gt;&lt;span class="n"&gt;E&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt; &lt;span class="c1"&gt;-- exemplo de n√∫mero inteiro em nota√ß√£o cient√≠fica&lt;/span&gt;
&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1415&lt;/span&gt; &lt;span class="c1"&gt;-- exemplo de n√∫mero real&lt;/span&gt;
&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;67430&lt;/span&gt;&lt;span class="n"&gt;E&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt; &lt;span class="c1"&gt;-- exemplo de n√∫mero real em nota√ß√£o cient√≠fica&lt;/span&gt;
&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;02214076&lt;/span&gt;&lt;span class="n"&gt;E&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;23&lt;/span&gt;  &lt;span class="c1"&gt;-- exemplo de n√∫mero real em nota√ß√£o cient√≠fica&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Note que &lt;code&gt;-123&lt;/code&gt; n√£o √© um n√∫mero inteiro mas sim uma nega√ß√£o de um inteiro. Os n√∫mero reais precisam de ao menos um d√≠gito antes e outro depois do &lt;code&gt;.&lt;/code&gt; para serem considerados v√°lidos.&lt;/p&gt;
&lt;p&gt;Os literais num√©ricos tamb√©m podem ser especificados em outras bases usando o operador &lt;code&gt;#&lt;/code&gt; com a base expressa em decimal:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;-- Todos os n√∫meros abaixo representam 253 em decimal&lt;/span&gt;
&lt;span class="mi"&gt;2#11111101#&lt;/span&gt; &lt;span class="c1"&gt;-- em bin√°rio (base 2)&lt;/span&gt;
&lt;span class="mi"&gt;16#FD#&lt;/span&gt; &lt;span class="c1"&gt;-- em hexadecimal (base 16)&lt;/span&gt;
&lt;span class="mi"&gt;16#0fd#&lt;/span&gt; &lt;span class="c1"&gt;-- em hexadecimal (base 16)&lt;/span&gt;
&lt;span class="mi"&gt;8#0375#&lt;/span&gt; &lt;span class="c1"&gt;-- em octal (base 8)&lt;/span&gt;
&lt;span class="c1"&gt;-- Todos os n√∫meros abaixo representam 0.5 em decimal&lt;/span&gt;
&lt;span class="mi"&gt;2#0.100#&lt;/span&gt; &lt;span class="c1"&gt;-- em bin√°rio (base 2)&lt;/span&gt;
&lt;span class="mi"&gt;8#0.4#&lt;/span&gt; &lt;span class="c1"&gt;-- em octal (base 8)&lt;/span&gt;
&lt;span class="mi"&gt;12#0.6#&lt;/span&gt; &lt;span class="c1"&gt;-- em duodecimal (base 12)&lt;/span&gt;
&lt;span class="c1"&gt;-- Todos os n√∫meros abaixo representam 1024 em decimal&lt;/span&gt;
&lt;span class="mi"&gt;2#1#&lt;/span&gt;&lt;span class="n"&gt;E10&lt;/span&gt; &lt;span class="c1"&gt;-- em bin√°rio (base 2)&lt;/span&gt;
&lt;span class="mi"&gt;16#4#&lt;/span&gt;&lt;span class="n"&gt;E2&lt;/span&gt; &lt;span class="c1"&gt;-- em hexadecimal (base 16)&lt;/span&gt;
&lt;span class="mi"&gt;10#1024#&lt;/span&gt;&lt;span class="n"&gt;E&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="c1"&gt;-- em decimal (base 10)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;table style="width:100%"&gt;
 &lt;tr&gt;
   &lt;td&gt;&lt;i class="fas fa-exclamation fa-2x"  style="color: #ffcc00;"&gt;&lt;/i&gt;&lt;/td&gt;
   &lt;td&gt;
    VHDL suporta as bases de 2 a 16 nativamente, mas sugerimos ater-se √†s bases 2, 8 e 16 pois nem todas as ferramentas suportam bases arbitr√°rias.
   &lt;/td&gt;
 &lt;/tr&gt;
&lt;/table&gt;

&lt;p&gt;N√£o h√° ponto (ou v√≠rgula) de separa√ß√£o de milhares, mas √© poss√≠vel usar o caractere &lt;code&gt;_&lt;/code&gt; para melhorar e legibilidade dos literais num√©ricos, respeitando-se as regras de composi√ß√£o de identificadores (n√£o se pode aparecer no in√≠cio ou final de um n√∫mero, e tamb√©m n√£o pode aparecer duas vezes seguidas):&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mi"&gt;123_456&lt;/span&gt;
&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;141_592_6&lt;/span&gt;
&lt;span class="mi"&gt;2#1111_1100_0000_0000#&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;O caractere &lt;code&gt;_&lt;/code&gt; em um literal √© inerte e n√£o tem significado algum, servindo apenas para melhorar a visualiza√ß√£o.&lt;/p&gt;
&lt;h3&gt;Caracteres&lt;/h3&gt;
&lt;p&gt;Os caracteres em VHDL s√£o expressos entre aspas simples &lt;code&gt;'&lt;/code&gt; e podem ser qualquer caractere ASCII imprim√≠vel.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="na"&gt;&amp;#39;A&lt;/span&gt;&lt;span class="p"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="na"&gt;&amp;#39;a&lt;/span&gt;&lt;span class="p"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="p"&gt;&amp;#39;.&amp;#39;&lt;/span&gt;
&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;
&lt;span class="p"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;&amp;#39;&lt;/span&gt; &lt;span class="c1"&gt;-- espa√ßo&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;h3&gt;Strings&lt;/h3&gt;
&lt;p&gt;As &lt;em&gt;strings&lt;/em&gt; s√£o vetores de caracteres e s√£o representadas em VHDL entre aspas duplas &lt;code&gt;"&lt;/code&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="s"&gt;&amp;quot;Bruno Albertini&amp;quot;&lt;/span&gt;
&lt;span class="s"&gt;&amp;quot;caracteres ASCII quaisquer como @%*&amp;quot;&lt;/span&gt;
&lt;span class="s"&gt;&amp;quot;10010011&amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;-- abaixo uma string contendo o caractere &amp;quot;, que √© representado por dois &amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;-- seguidos mas conta como um caractere s√≥ na string&lt;/span&gt;
&lt;span class="s"&gt;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;h3&gt;Bit Strings&lt;/h3&gt;
&lt;p&gt;Como todo hardware no final das contas trabalha com zeros e uns, VHDL possui uma forma espec√≠fica para representar cadeias de bits. As cadeias s√£o tratadas de forma diferenciada pois sempre podem ser transformadas em bits sem ambiguidade. √â poss√≠vel especificar a base da cadeia usando os prefixos &lt;code&gt;B&lt;/code&gt; para bin√°rio, &lt;code&gt;O&lt;/code&gt; para octal, &lt;code&gt;X&lt;/code&gt; para hexadecimal e &lt;code&gt;D&lt;/code&gt; para decimal (este √∫ltimo s√≥ existe a partir de VHDL-2008).&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mb"&gt;B&amp;quot;0100011&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;-- uma bitstring em bin√°rio&lt;/span&gt;
&lt;span class="mb"&gt;B&amp;quot;10&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;-- outra  bitstring em bin√°rio&lt;/span&gt;
&lt;span class="mb"&gt;b&amp;quot;111100100001&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;-- √© poss√≠vel usar min√∫sculas na especifica√ß√£o&lt;/span&gt;
&lt;span class="mb"&gt;B&amp;quot;1111_0010_0001&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;-- e tamb√©m _ para melhorar a legibilidade&lt;/span&gt;
&lt;span class="mb"&gt;B&amp;quot;&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;-- uma bitstring vazia&lt;/span&gt;
&lt;span class="mo"&gt;O&amp;quot;372&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;-- equivalente a B&amp;quot;011_111_010&amp;quot;&lt;/span&gt;
&lt;span class="mo"&gt;o&amp;quot;00&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;-- equivalente a B&amp;quot;000_000&amp;quot;&lt;/span&gt;
&lt;span class="mh"&gt;X&amp;quot;FA&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;-- equivalente a B&amp;quot;1111_1010&amp;quot;&lt;/span&gt;
&lt;span class="mh"&gt;x&amp;quot;0_d&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;-- equivalente a B&amp;quot;0000_1101&amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;-- O prefixo D √© v√°lido somente em VHDL&amp;gt;=2008&lt;/span&gt;
&lt;span class="mi"&gt;D&amp;quot;23&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;-- equivalente a B&amp;quot;10111&amp;quot;&lt;/span&gt;
&lt;span class="mi"&gt;D&amp;quot;64&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;-- equivalente a B&amp;quot;1000000&amp;quot;&lt;/span&gt;
&lt;span class="mi"&gt;D&amp;quot;0003&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;-- equivalente a B&amp;quot;11&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;O n√∫mero de bits da cadeia equivalente √© sempre o n√∫mero de bits m√≠nimo necess√°rio para representar o literal. Quando usamos octal, a cadeia resultante ser√° um m√∫ltiplo de 3 bits pois cada d√≠gito octal corresponde a 3 bits bin√°rios. Similarmente, as cadeias em hexadecimal correspondem a m√∫ltiplos de 4 bits bin√°rios. Os d√≠gitos especificados devem ser v√°lidos na base desejada (e.g. em octal s√≥ existem os d√≠gitos de 0-7, em hexadecimal, de 0-9 e A-F (ou a-f)). Algumas letras tem significado especial dependendo do tipo bin√°rio por tr√°s da convers√£o, como o &lt;code&gt;Z&lt;/code&gt; que significa alta imped√¢ncia quando se usa l√≥gica multi-variada.&lt;/p&gt;
&lt;table style="width:100%"&gt;
 &lt;tr&gt;
  &lt;td&gt;&lt;i class="fas fa-info fa-2x"  style="color: #0066ff;"&gt;&lt;/i&gt;&lt;/td&gt;
   &lt;td&gt;
    A l√≥gica multi-variada em VHDL √© baseada no tipo &lt;code&gt;std_logic&lt;/code&gt;, que aceita &lt;code&gt;U&lt;/code&gt;, &lt;code&gt;X&lt;/code&gt;, &lt;code&gt;Z&lt;/code&gt;, &lt;code&gt;W&lt;/code&gt;, &lt;code&gt;L&lt;/code&gt;, &lt;code&gt;H&lt;/code&gt; e &lt;code&gt;-&lt;/code&gt; como d√≠gitos, al√©m dos tradicionais &lt;code&gt;0&lt;/code&gt; e &lt;code&gt;1&lt;/code&gt;.
   &lt;/td&gt;
 &lt;/tr&gt;
&lt;/table&gt;

&lt;p&gt;H√° ainda uma forma de controlar quantos bits queremos que a cadeia possua, que funciona com VHDL&amp;gt;=2008, colocando o n√∫mero de bits antes do prefixo:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;-- S√≥ em VHDL&amp;gt;=2008&lt;/span&gt;
&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="mh"&gt;X&amp;quot;3C&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;-- equivalente a B&amp;quot;0111100&amp;quot;&lt;/span&gt;
&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="mo"&gt;O&amp;quot;5&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;-- equivalente a B&amp;quot;00000101&amp;quot;&lt;/span&gt;
&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;X&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;-- equivalente a B&amp;quot;000000000X&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;A cadeia ser√° preenchida com &lt;code&gt;0&lt;/code&gt; suficientes para completar o n√∫mero de bits. Caso o n√∫mero desejado seja menor, os zeros √† esquerda ser√£o cortados da cadeia, mas √© um erro especificar um n√∫mero de bits menor que o necess√°rio para representar o n√∫mero.&lt;/p&gt;
&lt;p&gt;Tamb√©m podemos especificar se o n√∫mero representa um inteiro com sinal ou sem sinal, adicionando os prefixos &lt;code&gt;S&lt;/code&gt; e &lt;code&gt;U&lt;/code&gt; respectivamente. Esta especifica√ß√£o s√≥ √© poss√≠vel em VHDL&amp;gt;=2008 e n√£o pode ser usada para n√∫meros decimais (especificador &lt;code&gt;D&lt;/code&gt;), que s√£o sempre considerados inteiros sem sinal.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;-- S√≥ em VHDL&amp;gt;=2008&lt;/span&gt;
&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="mh"&gt;UX&amp;quot;3C&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;-- equivalente a B&amp;quot;0111100&amp;quot;&lt;/span&gt;
&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="mo"&gt;UO&amp;quot;5&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;-- equivalente a B&amp;quot;00000101&amp;quot;&lt;/span&gt;
&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="mb"&gt;UB&amp;quot;1&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;-- equivalente a B&amp;quot;0000000001&amp;quot;&lt;/span&gt;
&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="mh"&gt;SX&amp;quot;71&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;-- equivalente a B&amp;quot;0001110001&amp;quot;&lt;/span&gt;
&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="mh"&gt;SX&amp;quot;88&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;-- equivalente a B&amp;quot;1110001000&amp;quot;&lt;/span&gt;
&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="mh"&gt;SX&amp;quot;W0&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;-- equivalente a B&amp;quot;WWWWWW0000&amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;-- Se reduzirmos o tamanho usando o especificador S&lt;/span&gt;
&lt;span class="c1"&gt;-- os bits descartados devem ser iguais ao √∫ltimo que ficou&lt;/span&gt;
&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="mh"&gt;SX&amp;quot;16&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;-- equivalente a B&amp;quot;010110&amp;quot;&lt;/span&gt;
&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="mh"&gt;SX&amp;quot;E8&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;-- equivalente a B&amp;quot;101000&amp;quot;&lt;/span&gt;
&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="mh"&gt;SX&amp;quot;13&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;-- equivalente a B&amp;quot;110011&amp;quot;&lt;/span&gt;
&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="mh"&gt;SX&amp;quot;H3&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;-- equivalente a B&amp;quot;HH0011&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;table style="width:100%"&gt;
 &lt;tr&gt;
   &lt;td&gt;&lt;i class="fas fa-cog fa-2x"  style="color: #009933;"&gt;&lt;/i&gt;&lt;/td&gt;
   &lt;td&gt;
    As vers√µes de VHDL&lt;2008 n√£o suportam o especificador decimal &lt;code&gt;D&lt;/code&gt;, nenhum especificador de tamanho (os n√∫meros no prefixo), e nenhum especificador de sinal (&lt;code&gt;U&lt;/code&gt; ou &lt;code&gt;S&lt;/code&gt;). Aconselho a evit√°-los se deseja manter a compatibilidade da sua descri√ß√£o com todas as ferramentas.
   &lt;/td&gt;
 &lt;/tr&gt;
&lt;/table&gt;</content><category term="vhdl"></category><category term="vhdl"></category><category term="basic"></category></entry><entry><title>Hist√≥rico</title><link href="https://balbertini.github.io/vhdl_history-pt_BR.html" rel="alternate"></link><published>2020-09-18T19:49:39-03:00</published><updated>2021-05-03T08:55:51-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2020-09-18:/vhdl_history-pt_BR.html</id><summary type="html">&lt;p&gt;Hist√≥rico das HDLs&lt;/p&gt;</summary><content type="html">&lt;p&gt;Nest &lt;em&gt;post&lt;/em&gt; contaremos o hist√≥rico das HDLs com foco em VHDL e discutiremos as vantagens e desvantagens da utiliza√ß√£o deste tipo de linguagem.&lt;/p&gt;
&lt;p&gt;VHDL, ou VHSIC-HDL significa &lt;em&gt;Very High Speed Integrated Circuit Hardware Description Language&lt;/em&gt;. √â uma das duas HDLs mais utilizadas (a outra √© Verilog). √â muito utilizada em EDA (&lt;em&gt;Electronic Design Automation&lt;/em&gt;), a t√©cnica atual de projeto de circuitos digitais, cuja principal caracter√≠stica √© a descri√ß√£o program√°tica dos circuitos.&lt;/p&gt;
&lt;table style="width:100%"&gt;
  &lt;tr&gt;
    &lt;td&gt;
      &lt;i class="fas fa-info fa-2x"  style="color: #0066ff;"&gt;&lt;/i&gt;
    &lt;/td&gt;
    &lt;td&gt;
      HDL significa linguagem de descri√ß√£o de hardware, do ingl√™s &lt;em&gt;Hardware Description Language&lt;/em&gt;.
    &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;p&gt;De uma maneira resumida, HDL √© uma forma de expressar precisamente um circuito digital em um formato textual estruturado. Expressar significa descrever a estrutura e o comportamento do circuito. O diagrama esquem√°tico tem um poder de express√£o similar, por√©m de modo gr√°fico. Tudo o que voc√™ faz em um diagrama esquem√°tico voc√™ pode fazer em uma HDL e, de fato, um bom projetista de hardware consegue usar ambas as formas de express√£o. H√° outras formas de expressar um circuito (e.g. c√°lculo proposicional, modelos matem√°ticos, equa√ß√µes alg√©bricas, &lt;em&gt;floorplan&lt;/em&gt;, &lt;em&gt;netlist&lt;/em&gt;, etc.), mas est√£o fora do escopo deste &lt;em&gt;post&lt;/em&gt;.&lt;/p&gt;
&lt;h1&gt;Hist√≥rico do VHDL&lt;/h1&gt;
&lt;p&gt;A linguagem VHDL foi criada pelo Departamento de Defesa (DoD) norte-americano em 1983, com o intuito de servir para verifica√ß√£o. A ideia principal era documentar programaticamente o comportamento desejado do circuito, assim o DoD poderia licitar uma empresa para desenvolv√™-lo ou fabric√°-lo e facilmente verificar se o que foi entregue atendia as especifica√ß√µes.&lt;/p&gt;
&lt;p&gt;N√£o demorou muito para os projetistas perceberem que poderiam usar softwares para ler e simular o comportamento descrito em VHDL, e o pr√≥ximo passo foi natural: usar a pr√≥pria linguagem para descrever os circuitos e sintetiz√°-los automaticamente usando ferramentas desenvolvidas para isso. Como as verbas de projetos do DoD costumam ser razo√°veis, n√£o faltaram empresas interessadas em desenvolver e manter software para EDA, capazes de ler, simular e sintetizar descri√ß√µes em VHDL. Com a bagun√ßa gerada pelas diversas empresas criando ferramentas para EDA, o DoD decidiu padronizar a linguagem na IEEE, o que podemos ver abaixo:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;IEEE 1076-1987: Primeira vers√£o padronizada pela IEEE, baseada na especifica√ß√£o do DoD.&lt;/li&gt;
&lt;li&gt;IEEE 1076-1993: Alguns anos de reclama√ß√µes e sugest√µes dos desenvolvedores de hardware foram incorporados √† linguagem e padronizados aqui. Esta vers√£o √© a mais usada at√© hoje e √© a que tem o maior suporte de ferramentas EDA.&lt;/li&gt;
&lt;li&gt;IEEE 1076-2000: Revis√£o, introdu√ß√£o dos tipos protegidos (&lt;code&gt;protected&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;IEEE 1076-2002: Revis√£o, relaxamento das regras para uso das portas tipo &lt;code&gt;buffer&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;IEEE 1076-2008: Revis√£o, introduz muitas modifica√ß√µes e sugest√µes dos projetistas, entre elas a PSL (&lt;em&gt;Property Specification Language&lt;/em&gt;), uma sublinguagem para especifica√ß√£o de l√≥gica temporal, √∫til para verifica√ß√£o de hardware.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;H√° uma vers√£o em discuss√£o, chamada de VHDL-202X e que ser√° padronizada como IEEE 1076 tamb√©m. Para acompanhar as discuss√µes acesse &lt;a href="http://www.eda-twiki.org/cgi-bin/view.cgi/P1076/WebHome"&gt;o site&lt;/a&gt; do grupo de trabalho.&lt;/p&gt;
&lt;p&gt;Uma das influ√™ncias not√°veis no VHDL √© a linguagem &lt;a href="https://www.adaic.org/"&gt;Ada&lt;/a&gt;, uma linguagem desenvolvida para programa√ß√£o paralela e utilizada como linguagem padr√£o para desenvolvimento de software pelo DoD. Como VHDL foi criada para descrever circuitos digitais, a linguagem reflete a natureza concorrente intr√≠nseca deste tipo de circuito. Ada √© uma linguagem com foco em programa√ß√£o paralela, ent√£o suporta descri√ß√µes concorrentes, tornando-a a candidata ideal para a cria√ß√£o do VHDL. Por este motivo, a linguagem VHDL acabou herdando muitas caracter√≠sticas da linguagem Ada, principalmente relativas √† sintaxe. De fato, VHDL pode at√© mesmo ser utilizada para desenvolver programas de t√£o parecida com Ada, mas h√° linguagens melhores para isso. No entanto, h√° uma situa√ß√£o onde escrever um software usando VHDL √© muito comum: a gera√ß√£o de &lt;em&gt;testbenchs&lt;/em&gt;, que nada mais s√£o que descri√ß√µes n√£o-sintetiz√°veis usadas para testar uma descri√ß√£o de hardware.&lt;/p&gt;
&lt;table style="width:100%"&gt;
  &lt;tr&gt;
    &lt;td&gt;
      &lt;i class="fas fa-info fa-2x"  style="color: #0066ff;"&gt;&lt;/i&gt;
    &lt;/td&gt;
    &lt;td&gt;
      Em VHDL todos os comandos acontecem ao mesmo tempo exceto pelo &lt;code&gt;process&lt;/code&gt;, usado para descri√ß√µes de circuitos sequenciais.
    &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;
      &lt;i class="fas fa-info fa-2x"  style="color: #0066ff;"&gt;&lt;/i&gt;
    &lt;/td&gt;
    &lt;td&gt;
      O termo &lt;u&gt;n√£o-sintetiz√°vel&lt;/u&gt; significa que a descri√ß√£o n√£o pode ser transformada em hardware de verdade pois cont√©m elementos de software.
    &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;
      &lt;i class="fas fa-exclamation fa-2x"  style="color: #ffcc00;"&gt;&lt;/i&gt;
    &lt;/td&gt;
    &lt;td&gt;
      Usamos majoritariamente o padr√£o IEEE 1076-1993 (conhecido como VHDL-93c), que √© uma vers√£o do VHDL-93 que tamb√©m aceita primitivas do VHDL-87. Se o seu projeto n√£o demanda outra vers√£o explicitamente, sempre opte por esta vers√£o pois √© a que possui o melhor suporte pelas ferramentas.
    &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;h1&gt;Vantagens de HDLs&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Menor taxa de erros e tempo de desenvolvimento.&lt;/li&gt;
&lt;li&gt;Possibilidade de simular o circuito antes de sintetiz√°-lo.&lt;/li&gt;
&lt;li&gt;Separa√ß√£o entre funcionalidade e implementa√ß√£o.&lt;/li&gt;
&lt;li&gt;S√≠ntese e verifica√ß√£o autom√°ticas.&lt;/li&gt;
&lt;li&gt;Modulariza√ß√£o e reaproveitamento de m√≥dulos.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Em compara√ß√£o com t√©cnicas gr√°ficas ou matem√°ticas, as HDLs s√£o menos sujeitas a erros de interpreta√ß√£o, em especial quando n√£o se usa CAD (&lt;em&gt;Computer Aided Design&lt;/em&gt;) para se desenhar os circuitos (i.e. desenhos em papel). Erros muito comuns quando usamos o papel s√£o: confundir a simbologia (e.g. usar uma porta OR no lugar de uma XOR) e assumir conex√µes que n√£o deveriam ocorrer ou vice-versa (e.g. o cruzamento de dois fios). O tempo total de um projeto tamb√©m diminui pois descrever textualmente o circuito toma menos tempo que desenh√°-lo.&lt;/p&gt;
&lt;p&gt;A descri√ß√£o HDL √© tamb√©m simul√°vel, em muitos casos at√© mesmo com a previs√£o de m√©tricas que s√≥ seriam poss√≠veis ap√≥s a s√≠ntese do circuito, como o consumo de energia ou o atraso. Diagramas usando CAD s√£o simul√°veis tamb√©m, mas h√° menos ferramentas para simula√ß√£o em diagrama esquem√°tico que em HDL. De modo geral, de forma profissional ainda se usam formas de express√£o gr√°ficas, mas usando diagramas em blocos gerados automaticamente por ferramentas EDA a partir de descri√ß√µes feitas em uma HDL.&lt;/p&gt;
&lt;table style="width:100%"&gt;
 &lt;tr&gt;
   &lt;td&gt;&lt;i class="fas fa-info fa-2x"  style="color: #0066ff;"&gt;&lt;/i&gt;&lt;/th&gt;
   &lt;td&gt;
    Um software com problemas pode ser corrigido, gerando uma nova vers√£o. Com o devido cuidado, as atualiza√ß√µes s√£o realizadas e o problema est√° resolvido. Em hardware, uma vez que voc√™ fabrique o circuito, n√£o h√° mais volta e √© muito complicado corrigir problemas, tornando invi√°vel qualquer corre√ß√£o que demande interven√ß√£o f√≠sica. Por este motivo, cerca de 70% do tempo de um projeto de hardware √© gasto em simula√ß√£o e verifica√ß√£o. As ferramentas para hardware s√£o mais conservadoras e maduras pois h√° pouco espa√ßo para ideias n√£o confi√°veis. Uma mudan√ßa em uma linguagem de programa√ß√£o demora dias ou meses para acontecer, enquanto em HDLs demoram anos.
   &lt;/td&gt;
 &lt;/tr&gt;
&lt;/table&gt;

&lt;p&gt;Em um diagrama esquem√°tico, a √∫nica maneira de descri√ß√£o sintetiz√°vel √© a estrutural, ou seja, a liga√ß√£o entre portas l√≥gicas. No entanto, as HDLs permitem descri√ß√µes em n√≠veis de abstra√ß√£o mais altos, o que chamamos de descri√ß√µes funcionais. √â poss√≠vel fazer um somador em HDL usando o operador &lt;code&gt;+&lt;/code&gt; por exemplo, deixando a cargo do sintetizador escolher como a soma dos bits √© realizada. Os algoritmos de s√≠ntese modernos s√£o avan√ßados suficientemente para produzir circuitos melhores ou similares aos circuitos produzidos manualmente. Al√©m disso, verificar a corretude de um circuito √© muito mais simples em HDL que em diagramas esquem√°ticos.&lt;/p&gt;
&lt;p&gt;Como as HDLs principais (VHDL e Verilog) s√£o padr√µes est√°veis aceitos mundialmente, as ferramentas podem assumir a interpreta√ß√£o de um c√≥digo com seguran√ßa, possibilitando a iteroperabilidade entre ferramentas, o que torna a s√≠ntese e verifica√ß√£o autom√°ticas. Dizemos que a descri√ß√£o em uma HDL √© mais precisa que em outros tipos de descri√ß√£o. H√° outros tipos que s√£o mais formais ou mais precisos, mas s√£o pouco utilizados pois s√£o muito complexos (e.g. √© invi√°vel descrever um processador usando √°lgebra booleana). Esta padroniza√ß√£o possibilita que, por exemplo, voc√™ descreva o seu circuito, simule, teste, e quando estiver satisfeito, envie para uma f√°brica de circuitos, que transformar√° a sua descri√ß√£o em um &lt;em&gt;chip&lt;/em&gt; de verdade.&lt;/p&gt;
&lt;table style="width:100%"&gt;
 &lt;tr&gt;
   &lt;td&gt;&lt;i class="fas fa-info fa-2x"  style="color: #0066ff;"&gt;&lt;/i&gt;&lt;/td&gt;
   &lt;td&gt;
    O custo de produ√ß√£o de um &lt;em&gt;chip&lt;/em&gt; √© de algumas centenas de milhares de d√≥lares, facilmente atingindo alguns milhares de d√≥lares dependendo da complexidade. Por√©m, o custo recorrente (depois de fabricado o primeiro) √© muito baixo, na ordem de centavos de d√≥lares.
   &lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
   &lt;td&gt;&lt;i class="fas fa-info fa-2x"  style="color: #0066ff;"&gt;&lt;/i&gt;&lt;/td&gt;
   &lt;td&gt;
    A fabrica√ß√£o de circuitos n√£o faz parte da engenharia de computa√ß√£o e sim da microeletr√¥nica, uma especializa√ß√£o da engenharia de eletricidade.
   &lt;/td&gt;
 &lt;/tr&gt;
&lt;/table&gt;

&lt;p&gt;Os circuitos em HDL s√£o facilmente modulariz√°veis, o que significa que voc√™ pode usar t√©cnicas de projeto hier√°rquicas quase sem esfor√ßo. √â poss√≠vel dividir um circuito grande em v√°rios pequenos, e as descri√ß√µes s√£o facilmente reaproveit√°veis por outros circuitos. Existe inclusive um mercado para isso: a venda de IPs (&lt;em&gt;Intellectual Property&lt;/em&gt;), que nada mais s√£o que m√≥dulos prontos pr√© testados e validados. √â poss√≠vel comprar uma descri√ß√£o de hardware e incorpor√°-la ao seu projeto, economizando tempo de desenvolvimento.&lt;/p&gt;
&lt;h1&gt;Desvantagens de HDLs&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Descrever circuitos √© diferente de programar.&lt;/li&gt;
&lt;li&gt;√â necess√°rio conhecer circuitos digitais.&lt;/li&gt;
&lt;li&gt;S√£o necess√°rias ferramentas especiais.&lt;/li&gt;
&lt;li&gt;Voc√™ est√° descrevendo um hardware.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Quando usa-se uma HDL para descrever um circuito, estamos usando um paradigma onde descrevemos o que acontece no &lt;strong&gt;fluxo de dados&lt;/strong&gt;. As linguagens de programa√ß√£o imperativas, em contrapartida, descrevem o que acontece com o &lt;strong&gt;fluxo de controle&lt;/strong&gt;. Algumas linguagens de programa√ß√£o possuem suporte ao controle do fluxo de dados, na maioria das vezes atrav√©s de paradigmas matem√°ticos (e.g. linguagens funcionais, como Scala), mas elas n√£o s√£o muito populares pela dificuldade no uso. J√° para descri√ß√µes de hardware, a caracter√≠stica inerentemente concorrente torna a descri√ß√£o do fluxo de dados obrigat√≥ria.&lt;/p&gt;
&lt;h2&gt;Exemplo&lt;/h2&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;alarme&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;j0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;j1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;j2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;j3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;en0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;s0&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;
  &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;entity&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;portaslogicas&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="nc"&gt;alarme&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;j2n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;j3n&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;janelas&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
  &lt;span class="n"&gt;j2n&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;j2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;j3n&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt; &lt;span class="n"&gt;j3&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;s0&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="k"&gt;or&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;janelas&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;en0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;janelas&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;j0&lt;/span&gt; &lt;span class="k"&gt;or&lt;/span&gt; &lt;span class="n"&gt;j1&lt;/span&gt; &lt;span class="k"&gt;or&lt;/span&gt; &lt;span class="n"&gt;j2n&lt;/span&gt; &lt;span class="k"&gt;or&lt;/span&gt; &lt;span class="n"&gt;j3n&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;architecture&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;No exemplo acima em VHDL, o comportamento do circuito √© descrito nas linhas de 12 a 15. Estas linhas podem ser colocadas em qualquer ordem e o comportamento do circuito continuar√° id√™ntico! VHDL √© concorrente por natureza e estamos descrevendo a liga√ß√£o entre as portas l√≥gicas de um circuito (i.e. controlando o fluxo de dados). Tanto faz se voc√™ descreve a liga√ß√£o do inversor da linha 13 antes ou depois da liga√ß√£o da porta OU da linha 15, o circuito final ser√° o mesmo.&lt;/p&gt;
&lt;p&gt;Esta caracter√≠stica √© principal dificuldade dos projetistas de hardware iniciantes e √© agravada naqueles que j√° possuem experi√™ncia pr√©via com linguagens de programa√ß√£o pois tendem a descrever o hardware como se fosse um programa, o que n√£o √© poss√≠vel. Uma vez que voc√™ comece a pensar concorrentemente, a dificuldade para aprender uma HDL cai consideravelmente e a maioria dos problemas que os iniciantes enfrentam se tornam triviais.&lt;/p&gt;
&lt;p&gt;Uma outra desvantagem de HDLs √© que √© necess√°rio saber projetar um circuito digital. A HDL √© uma forma de express√£o de um projeto de um hardware, ent√£o n√£o adianta voc√™ aprender uma HDL se n√£o sabe projetar um hardware. Uma analogia que uso muito entre os alunos de gradua√ß√£o √© a com idiomas: se voc√™ ensinar um idioma para um papagaio, ele certamente repetir√° o que voc√™ ensinou, at√© mesmo com sotaque. Mas este papagaio n√£o ser√° capaz de criar frases novas com o que aprendeu e com certeza n√£o sabe o significado sem√¢ntico das constru√ß√µes l√©xicas. Com HDL acontece o mesmo: √© necess√°rio saber projetar um circuito digital antes de aprender se expressar. De fato, os bons projetistas pensam na solu√ß√£o (normalmente imaginando um diagrama esquem√°tico ou outra forma gr√°fica) e s√≥ depois expressam-no usando HDL.&lt;/p&gt;
&lt;p&gt;Apesar do suporte √† HDL ser relativamente bom (existem v√°rios &lt;a href="https://balbertini.github.io/vhdl_simulators-pt_BR.html"&gt;simuladores e sintetizadores de HDL&lt;/a&gt;), n√£o √© poss√≠vel usar as ferramentas comuns de software. N√£o √© poss√≠vel compilar um hardware, por exemplo, tampouco usar depuradores (&lt;em&gt;debuggers&lt;/em&gt;) similares aos de software pelo simples motivo que n√£o √© poss√≠vel passar linha por linha em uma descri√ß√£o vendo o que acontece. As ferramentas s√£o divididas em duas categorias distintas: os simuladores e os sintetizadores.&lt;/p&gt;
&lt;p&gt;Os simuladores conseguem gerar algo que voc√™ pode executar na sua m√°quina e obter o comportamento do hardware, o que possibilita testar, verificar e simular a sua descri√ß√£o. Os simuladores atuais s√£o bons o suficiente para que a simula√ß√£o seja muito pr√≥xima do hardware real. √â poss√≠vel at√© mesmo estimar o consumo de energia ou o atraso do hardware descrito usando apenas simula√ß√£o. Nesta fase, poucas ferramentas de depura√ß√£o s√£o dispon√≠veis e o m√©todo mais comum de testar √© escrever um &lt;a href="https://balbertini.github.io/vhdl_testbench-pt_BR.html"&gt;&lt;em&gt;testbench&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;J√° os sintetizadores s√£o ferramentas que transformam a sua descri√ß√£o em um hardware real. A s√≠ntese √© dependente de tecnologia, ent√£o quando voc√™ chega na fase de s√≠ntese deve escolher o que ir√° fazer com o seu circuito (e.g. configurar um FPGA, enviar para uma f√°brica de &lt;em&gt;chips&lt;/em&gt; ou simplesmente simular em uma tecnologia espec√≠fica). O hardware sintetizado pode ser simulado tamb√©m e as m√©tricas obtidas s√£o mais precisas, chegando a mais de 99% de confiabilidade (e.g. se medir um determinado atrase, ele ser√° quase que o mesmo do circuito real depois de fabricado). √â poss√≠vel ainda depurar seu circuito usando uma variadade de t√©cnicas (e.g. &lt;em&gt;scan-chain&lt;/em&gt;), pois o modelo de simula√ß√£o j√° est√° atrelado √† tecnologia alvo. No entanto, a s√≠ntese normalmente s√≥ √© realizada no final da prototipa√ß√£o pois √© muito demorada. Para efeito de compara√ß√£o, compilar e executar um software leva segundos, gerar um simulador e execut√°-lo para uma descri√ß√£o de hardware leva minutos, e sintetizar e simular um hardware leva horas (em projetos complexos como um processador moderno, a simula√ß√£o sobe para horas e a s√≠ntese para dias).&lt;/p&gt;
&lt;p&gt;Por √∫ltimo, √© comum os projetistas esquecerem que est√£o descrevendo um hardware. N√£o existe &lt;code&gt;printf&lt;/code&gt;, n√£o existem &lt;em&gt;breakpoints&lt;/em&gt; e n√£o existe nem mesmo sistema operacional ou chamada de fun√ß√µes. Se voc√™ est√° projetando um processador, voc√™ esta projetanto a pe√ßa que ir√° suportar tudo isso! Se voc√™ quiser uma comunica√ß√£o textual estilo &lt;em&gt;prompt&lt;/em&gt; de comando com o seu hardware, voc√™ √© o respons√°vel por adicionar uma interface serial e fazer a comunica√ß√£o com ele. Se voc√™ quer uma interface gr√°fica, ter√° que descrev√™-la como um hardware (ou adicionar um m√≥dulo pronto que fa√ßa isso). Orienta√ß√£o a objetos? Coleta de lixo? Esque√ßa! Isso √© um conceito abstrato √∫til para for√ßar uma certa organiza√ß√£o dos programadores de software. Apesar de termos paradigmas similares em hardware (e.g. modulariza√ß√£o), isso √© responsabilidade sua e n√£o da linguagem.&lt;/p&gt;</content><category term="vhdl"></category><category term="vhdl"></category><category term="basic"></category></entry><entry><title>Opera√ß√µes Aritm√©ticas em Bin√°rio</title><link href="https://balbertini.github.io/binaryarithmetic-pt_BR.html" rel="alternate"></link><published>2020-07-31T08:57:26-03:00</published><updated>2021-05-03T08:55:51-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2020-07-31:/binaryarithmetic-pt_BR.html</id><summary type="html">&lt;p&gt;Opera√ß√µes Aritm√©ticas em Bin√°rio&lt;/p&gt;</summary><content type="html">&lt;p&gt;Um computador moderno n√£o √© muito diferente de uma calculadora gigante. Pode parecer estranho, mas mesmo os &lt;em&gt;pixels&lt;/em&gt; na sua tela ou este arquivo de texto que est√° lendo s√£o representados por n√∫meros em bin√°rio (chamamos isto de c√≥digo, mas deixemos para outro post). O "cora√ß√£o" de um processador √© composto por v√°rias unidades de c√°lculo, a grande maioria operando sobre inteiros em bin√°rio. As opera√ß√µes mais comuns s√£o a adi√ß√£o e a subtra√ß√£o, mas neste post veremos todas elas.&lt;/p&gt;
&lt;h1&gt;Representa√ß√£o bin√°ria&lt;/h1&gt;
&lt;p&gt;Um n√∫mero em bin√°rio √© composto por qualquer quantidade de d√≠gitos 0 e 1. Um √∫nico d√≠gito √© chamado de &lt;em&gt;bit&lt;/em&gt;, o conjunto de 8 bits √© chamado de &lt;em&gt;byte&lt;/em&gt; e o conjunto de 4 bits √© chamado de &lt;em&gt;nible&lt;/em&gt;. Os processadores modernos usam n√∫meros de 64 bits, mas ainda temos muitos processadores usando 32 bits. A quantidade de bits usada para representar um n√∫mero em um processador est√° ligada ao tamanho das estruturas de armazenamento usadas internamente para guardar os n√∫meros (conhecidas como registradores) e a capacidade das unidades de c√°lculo (i.e. um processador de 64 bits possui registradores e unidades l√≥gicas e aritm√©ticas capazes de armazenar e operar n√∫meros  de 64 bits).&lt;/p&gt;
&lt;p&gt;A representa√ß√£o bin√°ria segue a f√≥rmula geral de representa√ß√£o de bases, cuja convers√£o para decimal √©:&lt;/p&gt;
&lt;div class="math"&gt;$$
\sum_{m}^{n}{a_i.b^{i}}
$$&lt;/div&gt;
&lt;p&gt;Onde o √≠ndice &lt;span class="math"&gt;\(i\)&lt;/span&gt; come√ßa em &lt;span class="math"&gt;\(n\)&lt;/span&gt;, passa pelo &lt;span class="math"&gt;\(0\)&lt;/span&gt; e termina em &lt;span class="math"&gt;\(m\)&lt;/span&gt; (&lt;span class="math"&gt;\(m\)&lt;/span&gt; √© um n√∫mero negativo). Um n√∫mero em bin√°rio pode ser representado por:
&lt;/p&gt;
&lt;div class="math"&gt;$$
a_{n}a_{n-1}a_{n-2}\ldots a_{0}.a_{-1}a_{-2}\ldots a_{-m+2}a_{-m+1}a_{-m}
$$&lt;/div&gt;
&lt;p&gt;O d√≠gito &lt;span class="math"&gt;\(a\)&lt;/span&gt; com o maior √≠ndice √© chamado de &lt;strong&gt;mais significativo&lt;/strong&gt; pois √© o multiplicador de maior peso (est√° ligado a base elevada a maior pot√™ncia) e o d√≠gito com o menor √≠ndice √© chamado de &lt;strong&gt;menos significativo&lt;/strong&gt; pelo motivo oposto. Como costumamos escrever os n√∫meros da esquerda para a direita, o mais significativo fica mais a esquerda e o menos significativo fica mais a direita. √â comum usarmos os acr√¥nimos MSB para o mais significativo (do ingl√™s &lt;em&gt;Most Significant Bit&lt;/em&gt;) e LSB para o menos significativo (do ingl√™s &lt;em&gt;Least Significant Bit&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;Para converter entre bases, basta usar a f√≥rmula geral aplicando-se a base que deseja. O &lt;span class="math"&gt;\(a\)&lt;/span&gt; corresponde a um d√≠gito na base de origem e para converter substitu√≠mos pelo valor deste d√≠gito no sistema alvo. Como os valores bin√°rios s√£o 0 e 1 e os valores na base 10 s√£o os mesmos (0 e 1, respectivamente), n√£o h√° substitui√ß√£o a fazer, bastando usar o pr√≥prio d√≠gito na posi√ß√£o &lt;span class="math"&gt;\(i\)&lt;/span&gt;. O &lt;span class="math"&gt;\(b\)&lt;/span&gt; da f√≥rmula √© o valor da base de origem na base de destino. No caso de bin√°rio para decimal, a base √© 2 e o valor em decimal tamb√©m √© 2, ent√£o basta fazer &lt;span class="math"&gt;\(b=2\)&lt;/span&gt;.&lt;/p&gt;
&lt;h3&gt;Exemplo&lt;/h3&gt;
&lt;p&gt;O n√∫mero &lt;span class="math"&gt;\(101010.10101_{2}\)&lt;/span&gt; representa qual n√∫mero em decimal?&lt;/p&gt;
&lt;p&gt;Vamos expandir o n√∫mero usando a f√≥rmula geral:
&lt;/p&gt;
&lt;div class="math"&gt;$$
\sum_{m}^{n}{a_i.b^{i}}
$$&lt;/div&gt;
&lt;p&gt;Como temos seis d√≠gitos antes do . e cinco depois, &lt;span class="math"&gt;\(n=5\)&lt;/span&gt; e &lt;span class="math"&gt;\(m=-5\)&lt;/span&gt; (note que h√° o √≠ndice 0 antes do ponto, ent√£o o &lt;span class="math"&gt;\(n=5\)&lt;/span&gt;). Vamos expandir o n√∫mero usando a f√≥rmula geral:
&lt;/p&gt;
&lt;div class="math"&gt;$$
\sum_{5}^{-5}{a_i.b^{i}}
$$&lt;/div&gt;
&lt;p&gt;Ou na vers√£o expandida:
&lt;/p&gt;
&lt;div class="math"&gt;$$
a_{5}.b^{5}+a_{4}.b^{4}+a_{3}.b^{3}+a_{2}.b^{2}+a_{1}.b^{1}+a_{0}.b^{0}+a_{-1}.b^{-1}+a_{-2}.b^{-2}+a_{-3}.b^{-3}+a_{-4}.b^{-4}+a_{-5}.b^{-5}
$$&lt;/div&gt;
&lt;p&gt;Substituindo os n√∫meros, temos a base 2 (&lt;span class="math"&gt;\(b=2\)&lt;/span&gt;) e os d√≠gitos &lt;span class="math"&gt;\(101010.10101_{2}\)&lt;/span&gt;, ent√£o ficamos com:
&lt;/p&gt;
&lt;div class="math"&gt;$$
1.2^{5}+0.2^{4}+1.2^{3}+0.2^{2}+1.2^{1}+0.2^{0}+1.2^{-1}+0.2^{-2}+1.2^{-3}+0.2^{-4}+1.2^{-5}
$$&lt;/div&gt;
&lt;div class="math"&gt;$$
= 1.32+0.16+1.8+0.4+1.2+0.1+1.\frac{1}{2}+0.\frac{1}{4}+1.\frac{1}{8}+0.\frac{1}{16}+1.\frac{1}{32}
$$&lt;/div&gt;
&lt;div class="math"&gt;$$
= 32+8+2+\frac{1}{2}+\frac{1}{8}+\frac{1}{32} = 42 + 0.5 + 0.125 + 0.03125 = 42.65625
$$&lt;/div&gt;
&lt;h2&gt;Convers√£o direta (tabela)&lt;/h2&gt;
&lt;p&gt;A f√≥rmula geral pode ser usada para convers√µes entre bases facilmente, mas para convers√£o entre bin√°rio (base 2), octal (base 8) e hexadecimal (base 16), pelas bases serem m√∫ltiplas umas das outras, h√° uma maneira mais simples, usando uma tabela de convers√£o, que pode ser vista abaixo.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="right"&gt;Decimal&lt;/th&gt;
&lt;th align="center"&gt;Hexadecimal&lt;/th&gt;
&lt;th align="center"&gt;Octal&lt;/th&gt;
&lt;th align="center"&gt;Bin√°rio&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="right"&gt;0&lt;/td&gt;
&lt;td align="center"&gt;0x0&lt;/td&gt;
&lt;td align="center"&gt;000&lt;/td&gt;
&lt;td align="center"&gt;0000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;1&lt;/td&gt;
&lt;td align="center"&gt;0x1&lt;/td&gt;
&lt;td align="center"&gt;001&lt;/td&gt;
&lt;td align="center"&gt;0001&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;2&lt;/td&gt;
&lt;td align="center"&gt;0x2&lt;/td&gt;
&lt;td align="center"&gt;002&lt;/td&gt;
&lt;td align="center"&gt;0010&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;3&lt;/td&gt;
&lt;td align="center"&gt;0x3&lt;/td&gt;
&lt;td align="center"&gt;003&lt;/td&gt;
&lt;td align="center"&gt;0011&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;4&lt;/td&gt;
&lt;td align="center"&gt;0x4&lt;/td&gt;
&lt;td align="center"&gt;004&lt;/td&gt;
&lt;td align="center"&gt;0100&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;5&lt;/td&gt;
&lt;td align="center"&gt;0x5&lt;/td&gt;
&lt;td align="center"&gt;005&lt;/td&gt;
&lt;td align="center"&gt;0101&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;6&lt;/td&gt;
&lt;td align="center"&gt;0x6&lt;/td&gt;
&lt;td align="center"&gt;006&lt;/td&gt;
&lt;td align="center"&gt;0110&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;7&lt;/td&gt;
&lt;td align="center"&gt;0x7&lt;/td&gt;
&lt;td align="center"&gt;007&lt;/td&gt;
&lt;td align="center"&gt;0111&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;8&lt;/td&gt;
&lt;td align="center"&gt;0x8&lt;/td&gt;
&lt;td align="center"&gt;010&lt;/td&gt;
&lt;td align="center"&gt;1000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;9&lt;/td&gt;
&lt;td align="center"&gt;0x9&lt;/td&gt;
&lt;td align="center"&gt;011&lt;/td&gt;
&lt;td align="center"&gt;1001&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;10&lt;/td&gt;
&lt;td align="center"&gt;0xA&lt;/td&gt;
&lt;td align="center"&gt;012&lt;/td&gt;
&lt;td align="center"&gt;1010&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;11&lt;/td&gt;
&lt;td align="center"&gt;0xB&lt;/td&gt;
&lt;td align="center"&gt;013&lt;/td&gt;
&lt;td align="center"&gt;1011&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;12&lt;/td&gt;
&lt;td align="center"&gt;0xC&lt;/td&gt;
&lt;td align="center"&gt;014&lt;/td&gt;
&lt;td align="center"&gt;1100&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;13&lt;/td&gt;
&lt;td align="center"&gt;0xD&lt;/td&gt;
&lt;td align="center"&gt;015&lt;/td&gt;
&lt;td align="center"&gt;1101&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;14&lt;/td&gt;
&lt;td align="center"&gt;0xE&lt;/td&gt;
&lt;td align="center"&gt;016&lt;/td&gt;
&lt;td align="center"&gt;1110&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;15&lt;/td&gt;
&lt;td align="center"&gt;0xF&lt;/td&gt;
&lt;td align="center"&gt;017&lt;/td&gt;
&lt;td align="center"&gt;1111&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Usar a tabela √© bem simples: cada grupo de 3 bits (lembre-se que um bit √© um d√≠gito bin√°rio) corresponde a um d√≠gito octal e cada grupo de 4 bits √© um d√≠gito hexadecimal, e vice-versa. Note tamb√©m a representa√ß√£o: √© comum usarmos o prefixo 0x (ou o sufixo 'h') para hexadecimal e o prefixo 0 (ou 'o') para octal, mas para evitar ambiguidades, aconselho usar a vers√£o formal (com subscrito, e.g. &lt;span class="math"&gt;\(F_{16}=17_{8}=1111_{2}\)&lt;/span&gt;).&lt;/p&gt;
&lt;h3&gt;Exemplos&lt;/h3&gt;
&lt;p&gt;Converter &lt;code&gt;0xBEBAD0&lt;/code&gt; para bin√°rio e octal. Cada d√≠gito hexadecimal corresponde a 4 d√≠gitos bin√°rio, ent√£o usando a tabela temos que &lt;code&gt;0xBEBAD0 = 1011 1110 1011 1010 1101 0000&lt;/code&gt;. Com o bin√°rio, basta agruparmos de 3 em 3 e teremos o octal: &lt;code&gt;0xBEBAD0 = 101 111 101 011 101 011 010 000 = 057535320&lt;/code&gt; (o &lt;code&gt;0&lt;/code&gt; no in√≠cio √© s√≥ para indicar que √© octal).&lt;/p&gt;
&lt;p&gt;Converter &lt;code&gt;1100101011111110&lt;/code&gt; para octal e hexadecimal. Para octal, agrupamos de 3 em 3: &lt;code&gt;1 100 101 011 111 110 = 0145376&lt;/code&gt;, e para hexadecimal de 4 em 4: &lt;code&gt;1100 1010 1111 1110 = 0xCAFE&lt;/code&gt;.&lt;/p&gt;
&lt;h1&gt;Representa√ß√µes Complementares&lt;/h1&gt;
&lt;p&gt;Muito bem, at√© aqui vimos n√∫meros (inclusive fracion√°rios), mas como representamos n√∫meros negativos? As tr√™s maneiras mais utilizadas s√£o: sinal-magnitude, complemento de base diminu√≠da e complemento de base.&lt;/p&gt;
&lt;h2&gt;Sinal-Magnitude&lt;/h2&gt;
&lt;p&gt;Esta √© a representa√ß√£o que usamos no dia a dia com o sistema decimal. Nela, o d√≠gito mais significativo √© especial e cont√©m &lt;code&gt;+&lt;/code&gt; ou &lt;code&gt;-&lt;/code&gt; para indicar se o n√∫mero √© negativo ou n√£o (a aus√™ncia implica em um n√∫mero positivo). Esta representa√ß√£o √© muito simples, e √© usada em computa√ß√£o para representar n√∫meros de ponto flutuante, chamados normalmente de &lt;em&gt;float&lt;/em&gt; ou &lt;em&gt;double&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Em bin√°rio, usamos um bit extra para isso, onde 1 significa que o n√∫mero √© negativo e 0 que √© positivo. Um n√∫mero bin√°rio de &lt;span class="math"&gt;\(n\)&lt;/span&gt; bits pode representar &lt;span class="math"&gt;\(2^{n}\)&lt;/span&gt; n√∫meros. Por√©m, na representa√ß√£o sinal-magnitude, h√° dois fatores importantes. O primeiro √© que um dos bits √© usado para representar o sinal, ent√£o com &lt;span class="math"&gt;\(n\)&lt;/span&gt; bits podemos representar efetivamente &lt;span class="math"&gt;\(2^{n-1}\)&lt;/span&gt; n√∫meros positivos e a mesma quantidade de n√∫meros negativos. O segundo √© que h√° duas representa√ß√µes para o zero! Isso significa que dos &lt;span class="math"&gt;\(2^{n-1}\)&lt;/span&gt; n√∫meros represent√°veis para os positivos, um √© o zero e o mesmo ocorre para os negativos. No final, podemos representar &lt;span class="math"&gt;\(2^{n}-1\)&lt;/span&gt; n√∫meros, pois o zero √© representado duas vezes (o zero positivo e o zero negativo). Os n√∫meros represent√°veis est√£o na faixa &lt;span class="math"&gt;\(-(2^{n-1}-1)\leq x \leq +(2^{n-1}-1)\)&lt;/span&gt;. Exemplo: com 4 bits podemos representar &lt;span class="math"&gt;\(2^{4}=16\)&lt;/span&gt; n√∫meros, mas usando sinal-magnitude podemos representar de &lt;code&gt;-7 (1111)&lt;/code&gt; at√© &lt;code&gt;+7 (0111)&lt;/code&gt;, o que nos d√° efetivamente 15 n√∫meros (7 negativos, 7 positivos e o zero).&lt;/p&gt;
&lt;p&gt;A grande vantagem desta representa√ß√£o √© que √© muito f√°cil converter um n√∫mero de positivo para negativo e vice-versa: basta mudar o bit do sinal. As desvantagens s√£o tr√™s: (1) h√° dois zeros, o que complica os circuitos aritm√©ticos pois √© uma excess√£o a tratar; (2) ainda por existirem dois zeros, desperdi√ßamos um n√∫mero da capacidade de representa√ß√£o; e (3) os circuitos aritm√©ticos s√£o diferentes para cada opera√ß√£o e portanto o circuito aritm√©tico √© um pouco mais complexo que outras representa√ß√µes (ocupam maior √°rea e consomem mais energia). A complexidade desta √∫ltima desvantagem est√° ligada ao fato de sermos obrigado a verificar o sinal de ambos os operandos antes de realizar a opera√ß√£o.&lt;/p&gt;
&lt;h3&gt;Opera√ß√µes com sinal-magnitude em bin√°rio&lt;/h3&gt;
&lt;p&gt;As opera√ß√µes s√£o diferentes para soma e subtra√ß√£o e seguem as mesmas regras que usamos na aritm√©tica em base decimal. O c√°lculo do sinal deve ser realizado a parte.&lt;/p&gt;
&lt;h4&gt;Exemplo&lt;/h4&gt;
&lt;p&gt;Calcular &lt;code&gt;(+2)+(+3)&lt;/code&gt;, &lt;code&gt;(+2)-(-3)&lt;/code&gt; e &lt;code&gt;(+3)-(+4)&lt;/code&gt; em bin√°rio de 4 bits usando sinal-magnitude.&lt;/p&gt;
&lt;p&gt;Come√ßamos obtendo a representa√ß√£o bin√°ria dos n√∫meros:
&lt;code&gt;(+2)=0010&lt;/code&gt;, &lt;code&gt;(+3)=0011&lt;/code&gt;, &lt;code&gt;(-3)=1011&lt;/code&gt; e &lt;code&gt;(+4)=0100&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Depois observamos o sinais e montamos as opera√ß√µes. Como as duas primeiras opera√ß√µes s√£o id√™nticas, montamos uma soma. Para a √∫ltima opera√ß√£o devemos montar uma subtra√ß√£o. Na opera√ß√£o de fato, n√£o usamos o sinal, ent√£o operaremos com &lt;span class="math"&gt;\(n-1\)&lt;/span&gt; bits, ou tr√™s bits neste exemplo.
&lt;pre&gt;
010 (vai um)  011 (empresta um)
 010 +         100 -
 011           011
 ----          ----
 101           001
&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;Descri√ß√£o textual da opera√ß√£o de soma: come√ßamos com o LSB e somamos &lt;code&gt;(0)+0+1=01&lt;/code&gt;, ou seja, o resultado √© efetivamente &lt;code&gt;1&lt;/code&gt; e o vai-um para o pr√≥ximo d√≠gito √© &lt;code&gt;0&lt;/code&gt; (observe que o &lt;code&gt;(0)&lt;/code&gt; inicial √© o vem-um do primeiro d√≠gito, que assumimos como &lt;code&gt;0&lt;/code&gt; pois n√£o h√° c√°lculos anteriores para gerar um vai-um). Depois somamos &lt;code&gt;0+1+1=10&lt;/code&gt;. Note que desta vez devemos gerar um vai-um para o pr√≥ximo, ent√£o efetivamente colocamos &lt;code&gt;0&lt;/code&gt; no resultado e &lt;code&gt;1&lt;/code&gt; no vai-um. A pr√≥xima opera√ß√£o √© &lt;code&gt;1+0+0=01&lt;/code&gt; e assim terminamos o c√°lculo. Como √© uma soma de dois n√∫meros positivos, o resultado √© positivo ent√£o o resultado final com quatro bits √© &lt;code&gt;0101=+5&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Descri√ß√£o textual da opera√ß√£o de subtra√ß√£o: come√ßamos ordenando os n√∫meros para conseguirmos efetuar a opera√ß√£o (neste m√©todo, sempre subtra√≠mos o menor do maior). Partindo do LSB fazemos &lt;code&gt;0-1&lt;/code&gt;, por√©m n√£o √© poss√≠vel realizar esta opera√ß√£o, ent√£o devemos emprestar um do pr√≥ximo bit. Ao emprestarmos, estamos efetivamente fazendo &lt;code&gt;10-1=1&lt;/code&gt;, ent√£o colocamos o resultado &lt;code&gt;1&lt;/code&gt; e indicamos que emprestamos &lt;code&gt;1&lt;/code&gt; do bit com signific√¢ncia imediatamente superior. Para o pr√≥ximo bit, j√° come√ßamos emprestando &lt;code&gt;1&lt;/code&gt; pois o bit √© &lt;code&gt;0&lt;/code&gt;, ent√£o n√£o conseguimos realizar o c√°lculo. Ao emprestar, a opera√ß√£o se torna &lt;code&gt;1-1=0&lt;/code&gt;, e indicamos o empr√©stimo. A √∫ltima opera√ß√£o seria &lt;code&gt;1-0&lt;/code&gt;, mas como houve o empr√©stimo ela se torna &lt;code&gt;0-0=0&lt;/code&gt; e n√£o necessita empr√©stimo. Para finalizar o c√°lculo, estamos fazendo uma subtra√ß√£o de um n√∫mero menor, portanto o resultado √© negativo e com quatro bits √© &lt;code&gt;1001=-1&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Complemento de base diminu√≠da&lt;/h2&gt;
&lt;p&gt;O complemento de base diminu√≠da √© uma maneira de facilitar as opera√ß√µes aritm√©ticas, pois a subtra√ß√£o se transforma em uma soma. √â poss√≠vel us√°-lo em qualquer base, mas vamos nos concentrar no bin√°rio. Este sistema de numera√ß√£o √© utilizado em sistemas de prop√≥sito espec√≠ficos (e.g. algumas GPUs o utilizam).&lt;/p&gt;
&lt;p&gt;Em bin√°rio, como a base √© 2, chamamos esta representa√ß√£o de &lt;strong&gt;complemento de um&lt;/strong&gt;. Para converter um n√∫mero bin√°rio de positivo para negativo e vice-versa, basta inverter todos os bits. Exemplo: &lt;code&gt;-7 = inv(7)&lt;/code&gt; que em bin√°rio de 4 bits fica &lt;code&gt;inv(0111) = 1000&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;A capacidade de representa√ß√£o √© a mesma do sinal-magnitude e temos o mesmo problema dos dois zeros.&lt;/p&gt;
&lt;p&gt;O primeiro bit continua indicando o sinal (se 1 √© negativo), mas a grande vantagem √© que os circuitos que realizam as opera√ß√µes s√£o mais simples pois a subtra√ß√£o pode ser realizada usando uma soma. A desvantagem √© que ainda temos dois zeros, desperdi√ßando um n√∫mero.&lt;/p&gt;
&lt;h3&gt;Opera√ß√µes com complemento de base em bin√°rio&lt;/h3&gt;
&lt;p&gt;Calcular &lt;code&gt;3-4&lt;/code&gt; em bin√°rio de 4 bits usando complemento de um.&lt;/p&gt;
&lt;p&gt;Isso equivale a fazer &lt;code&gt;3+(-4)&lt;/code&gt;, o que significa converter o 4 para negativo. Em bin√°rio de 4 bits usando complemento de um, ficaria &lt;code&gt;0011+inv(0100) = 0011+1011&lt;/code&gt;.&lt;/p&gt;
&lt;pre&gt;
0011  (vai um)
 0011 +
 1011
 ----
 1110
&lt;/pre&gt;

&lt;p&gt;Descri√ß√£o textual: primeiro encontramos o negativo do n√∫mero e montamos a soma equivalente. Depois realizamos a soma normalmente e o resultado j√° est√° pronto (n√£o √© necess√°rio nem mesmo verificar o sinal).  Para comprovar, podemos verificar que &lt;code&gt;inv(1110)=0001=1&lt;/code&gt;, ou seja, o resultado decimal √© -1.&lt;/p&gt;
&lt;h2&gt;Complemento de base&lt;/h2&gt;
&lt;p&gt;O complemento de base √© a representa√ß√£o mais utilizada em bin√°rio (base 2), onde √© conhecido como &lt;strong&gt;complemento de dois&lt;/strong&gt;. Praticamente todos os processadores modernos o utilizam nas unidades l√≥gicas e aritm√©ticas internas para contas com inteiros e com ponto fixo, o que corresponde a maior parte dos c√°lculos realizados por um computador.&lt;/p&gt;
&lt;p&gt;Para converter um n√∫mero bin√°rio de positivo para negativo, invertemos os bits e somamos 1. Exemplo 1: &lt;code&gt;-7=inv(7)+1&lt;/code&gt;, ou em bin√°rio de 4 bits &lt;code&gt;inv(0111)+1=1000+1=1001&lt;/code&gt;. Exemplo 2: &lt;code&gt;-1=inv(1)+1&lt;/code&gt;, em bin√°rio de 4 bits &lt;code&gt;inv(0001)+1= 1110+1=1111&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;A capacidade de representa√ß√£o agora muda um pouco pois n√£o temos mais dois zeros! A fun√ß√£o de somar 1 √© justamente deslocar a parte negativa para que o -0 (&lt;code&gt;1000&lt;/code&gt; em sinal magnitude e &lt;code&gt;1111&lt;/code&gt; em complemento de um) represente um n√∫mero negativo (&lt;code&gt;-1=1111&lt;/code&gt; em complemento de 2). Isso faz que que um n√∫mero bin√°rio &lt;span class="math"&gt;\(x\)&lt;/span&gt; de &lt;span class="math"&gt;\(n\)&lt;/span&gt; bits possa estar na faixa de &lt;span class="math"&gt;\(-(2^{n-1})\leq x \leq +(2^{n-1}-1)\)&lt;/span&gt;, ou seja, h√° um n√∫mero negativo a mais! Exemplo: com 4 bits podemos representar &lt;span class="math"&gt;\(2^{4}=16\)&lt;/span&gt; n√∫meros, e usando complemento de dois podemos representar de &lt;code&gt;-8 (1000)&lt;/code&gt; at√© &lt;code&gt;+7 (0111)&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Apesar de ligeiramente mais complexos que os circuitos para opera√ß√µes em complemento de um devido √† convers√£o exigir uma soma de 1, a representa√ß√£o em complemento de dois √© a mais usada pois normalmente os circuitos somadores j√° possuem uma entrada de vai um para o bit menos significativo. Em condi√ß√µes normais, uma subtra√ß√£o em complemento de dois seria t√£o complexa quanto no sinal-magnitude (usando circuitos diferentes para soma e subtra√ß√£o) ou seriam tr√™s somas se convertermos para negativo e fizermos a soma, pois a convers√£o exige uma soma de +1. Se considerarmos que na maioria das opera√ß√µes somamos dois n√∫meros somente, a entrada de vai um para o bit menos significativo n√£o √© usada (est√° sempre em zero), portanto podemos us√°-la para implementar o complemento de dois com a mesma complexidade dos circuitos de complemento de um, mantendo a vantagem de usarmos toda a capacidade de representa√ß√£o (n√£o h√° dois zeros). Sendo assim, o mais comum √© usarmos um somador para realizar a subtra√ß√£o, usando a entrada do vai um (e invertendo os bits de um dos n√∫meros corretamente) para realizar a soma, tornando o complemento de 2 a representa√ß√£o mais eficiente, desde que n√£o usemos o vai=um de entrada.&lt;/p&gt;
&lt;h3&gt;Opera√ß√µes com complemento de base diminu√≠da em bin√°rio&lt;/h3&gt;
&lt;p&gt;Realizar &lt;code&gt;3-4&lt;/code&gt; em bin√°rio usando complemento de dois.&lt;/p&gt;
&lt;p&gt;Isso equivale a fazer &lt;code&gt;3+(-4)&lt;/code&gt;, o que significa converter o 4 para negativo. Em bin√°rio de 4 bits usando complemento de dois, ficaria &lt;code&gt;0011+(inv(0100)+1) = 0011+1011+1&lt;/code&gt;. Usando o truque de inserir o +1 da convers√£o na entrada inicial do vai um no bit menos significativo, fica assim:&lt;/p&gt;
&lt;pre&gt;
00111 (vai um)
 0011 +
 1011
 ----
 1111
&lt;/pre&gt;

&lt;p&gt;A opera√ß√£o √© a mesma que em complemento de um, mas com o vai-um inicial em 1. Note que o &lt;code&gt;1111&lt;/code&gt; √© um n√∫mero negativo  (MSB √© 1), ent√£o para encontrar o n√∫mero positivo equivalente, basta negar todos os bits e somar 1: &lt;code&gt;1111 = -(not(1111)+1) = -(0000+1) = -(0001)=-1&lt;/code&gt;, ou seja, o resultado em decimal √© -1.&lt;/p&gt;
&lt;h1&gt;&lt;em&gt;Overflow&lt;/em&gt;&lt;/h1&gt;
&lt;p&gt;O &lt;em&gt;overflow&lt;/em&gt; acontece quando efetuamos uma opera√ß√£o que excede a capacidade de representa√ß√£o. As possibilidades s√£o:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(+A)+(+B) = -C&lt;/li&gt;
&lt;li&gt;(-A)+(-B) = +C&lt;/li&gt;
&lt;li&gt;(+A)-(-B) = -C (equivale a (+A)+(+B) = -C)&lt;/li&gt;
&lt;li&gt;(-A)-(+B) = +C (equivale a (-A)+(-B) = +C)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Onde A, B e C s√£o n√∫meros bin√°rios em qualquer uma das representa√ß√µes. O primeiro item, por exemplo, significa que somamos dois n√∫meros positivos (primeiro bit √© 0) e o resultado foi um n√∫mero negativo (MSB √© 1), o que claramente √© um &lt;em&gt;overflow&lt;/em&gt; pois a soma de dois n√∫meros positivos jamais deveria resultar em um negativo. O segundo item √© a soma de dois n√∫meros negativos resultando em positivo, outra situa√ß√£o incorreta. J√° os dois √∫ltimos podem ser considerados equivalentes aos anteriores pois usamos a soma com o n√∫mero negativo para realizar a subtra√ß√£o.&lt;/p&gt;
&lt;h2&gt;&lt;em&gt;Overflow&lt;/em&gt; em complemento de 2&lt;/h2&gt;
&lt;p&gt;Em complemento de dois, podemos observar os vai-uns para determinar se aconteceu &lt;em&gt;overflow&lt;/em&gt;. Observe atentamente as opera√ß√µes a seguir.&lt;/p&gt;
&lt;pre&gt;
00000 (vai um)  01110 (vai um)
 0011 +          0011 +
 0100            0101
 ----            ----
 0111            1000
&lt;/pre&gt;

&lt;p&gt;Acima podemos ver duas somas de n√∫meros positivos (note que o vai-um do bit menos significativo √© zero (soma) e ambos os n√∫meros come√ßam com 0 (positivos)). No entanto, na opera√ß√£o da esquerda temos &lt;code&gt;3+4=7&lt;/code&gt; (sem &lt;em&gt;overflow&lt;/em&gt;) e na da direita temos &lt;code&gt;3+5=-8&lt;/code&gt; (&lt;code&gt;1000&lt;/code&gt; em complemento de 2 √© -8), o que caracteriza &lt;em&gt;overflow&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;A subtra√ß√£o √© similar:&lt;/p&gt;
&lt;pre&gt;
11111 (vai um)  10011 (vai um)
 1101 +          1101 +
 1010            1000
 ----            ----
 1000            0110
&lt;/pre&gt;

&lt;p&gt;Repare que agora estamos fazendo uma subtra√ß√£o pois, apesar de realizarmos uma soma, estamos usando o vai-um de entrada no LSB em ambos os casos. Na esquerda fizemos &lt;code&gt;-3-5=-3+(-6)+1&lt;/code&gt;. O resultado √© &lt;code&gt;1000=-8&lt;/code&gt;, sem &lt;em&gt;overflow&lt;/em&gt;. Na direita temos &lt;code&gt;-3-6=-3+(-7)+1&lt;/code&gt;, mas dessa vez note que o resultado √© positivo (&lt;code&gt;0110=+6&lt;/code&gt;) portanto houve &lt;em&gt;overflow&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Agora observe os vai-uns das opera√ß√µes. Sempre que realizamos a soma em complemento de dois com n√∫meros bin√°rios, se o vai-um final for diferente do vai-um do est√°gio anterior, houve um &lt;em&gt;overflow&lt;/em&gt; e o resultado n√£o est√° correto. Em circuitos digitais, pode-se fazer simplesmente &lt;span class="math"&gt;\(c_{n}\oplus c_{n-1}\)&lt;/span&gt; e teremos um &lt;em&gt;flag&lt;/em&gt; que indica a presen√ßa de um &lt;em&gt;overflow&lt;/em&gt;.&lt;/p&gt;
&lt;h3&gt;Explica√ß√£o do da detec√ß√£o do &lt;em&gt;overflow&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;Vamos entender o motivo pelo qual &lt;span class="math"&gt;\(ov=c_{n}\oplus c_{n-1}\)&lt;/span&gt; funciona para bin√°rios em complemento de 2.&lt;/p&gt;
&lt;p&gt;Como realizamos somente somas (a subtra√ß√£o √© uma soma com a representa√ß√£o do negativo), h√° somente dois casos poss√≠veis que geram &lt;em&gt;overflow&lt;/em&gt;: (a) dois operandos positivos e resultado negativo ou (b) dois operandos negativos e resultado positivo. A soma de n√∫meros de sinais opostos nunca gera &lt;em&gt;overflow&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Poder√≠amos facilmente fazer um comparador de 3 bits e detectar o &lt;em&gt;overflow&lt;/em&gt; usando as regras que acabamos de descrever, mas vamos entender o XOR. Sabemos que o bit de sinal na representa√ß√£o de complemento de dois √© o MSB, ent√£o chamaremos de &lt;span class="math"&gt;\(a_n\)&lt;/span&gt; e &lt;span class="math"&gt;\(b_n\)&lt;/span&gt; o MSB, que √© o bit de sinal dos operandos &lt;span class="math"&gt;\(a\)&lt;/span&gt; e &lt;span class="math"&gt;\(b\)&lt;/span&gt;, respectivamente.&lt;/p&gt;
&lt;p&gt;A √∫ltima opera√ß√£o que realizamos √© somar esta coluna, ou seja &lt;span class="math"&gt;\(a_n+b_n+c_{n-1}\)&lt;/span&gt;. O resultado √© o vai-um de sa√≠da &lt;span class="math"&gt;\(c_n\)&lt;/span&gt; e o sinal do resultado, que chamaremos de &lt;span class="math"&gt;\(r_n\)&lt;/span&gt;. A √∫ltima opera√ß√£o que realizamos √© ent√£o:
&lt;/p&gt;
&lt;div class="math"&gt;$$
c_nr_n=a_n+b_n+c_{n-1}
$$&lt;/div&gt;
&lt;p&gt;
Onde &lt;span class="math"&gt;\(c_nr_n\)&lt;/span&gt; representam os dois bits resultantes da soma (e.g. 10=1+1+0).&lt;/p&gt;
&lt;p&gt;No caso (a), sabemos que &lt;span class="math"&gt;\(a_n=b_n=0\)&lt;/span&gt; e &lt;span class="math"&gt;\(r_n=1\)&lt;/span&gt;. A √∫nica possibilidade de fecharmos a equa√ß√£o com &lt;em&gt;overflow&lt;/em&gt; √© se &lt;span class="math"&gt;\(c_{n-1}=1\)&lt;/span&gt;, quando &lt;span class="math"&gt;\(c_n=0\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;No caso (b), sabemos que &lt;span class="math"&gt;\(a_n=b_n=1\)&lt;/span&gt; e &lt;span class="math"&gt;\(r_n=0\)&lt;/span&gt;. A √∫nica possibilidade de fecharmos a equa√ß√£o √© se &lt;span class="math"&gt;\(c_{n-1}=0\)&lt;/span&gt;, quando &lt;span class="math"&gt;\(c_n=1\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;Note que ambos os casos, &lt;span class="math"&gt;\(c_n\neq c_{n-1}\)&lt;/span&gt; ou n√£o h√° nenhuma maneira de cairmos em uma condi√ß√£o de &lt;em&gt;overflow&lt;/em&gt;. A opera√ß√£o &lt;span class="math"&gt;\(c_{n}\oplus c_{n-1}\)&lt;/span&gt; √© verdadeira exatamente se &lt;span class="math"&gt;\(c_n\neq c_{n-1}\)&lt;/span&gt;.&lt;/p&gt;
&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width &lt; 768) ? "left" : align;
        indent = (screen.width &lt; 768) ? "0em" : indent;
        linebreak = (screen.width &lt; 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="sistemas digitais"></category><category term="sistemas digitais"></category><category term="sistemas de numera√ß√£o"></category></entry><entry><title>Como usar o EDA Playground</title><link href="https://balbertini.github.io/vhdl_edaplayground-pt_BR.html" rel="alternate"></link><published>2020-06-15T14:22:04-03:00</published><updated>2020-06-15T14:22:04-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2020-06-15:/vhdl_edaplayground-pt_BR.html</id><summary type="html">&lt;p&gt;Como usar o EDA Playground.&lt;/p&gt;</summary><content type="html">&lt;p&gt;O &lt;strong&gt;EDA Playground&lt;/strong&gt; √© uma ferramenta muito √∫til para estudantes pois n√£o precisa de nenhuma instala√ß√£o, sendo totalmente online. O ambiente possui suporte ao GHDL, portanto voc√™ conseguir√° testar os seus projetos facilmente, como o juiz usado nas mat√©rias de hardware do PCS testa.&lt;/p&gt;
&lt;h1&gt;EDA Playground&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://www.edaplayground.com/"&gt;&lt;i style="font-size: 1em;" class="fas fa-file-alt"&gt;&lt;/i&gt; P√°gina&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;HDLs:&lt;/strong&gt; VHDL, Verilog, SystemVerilog, C++/SystemC, Outras | &lt;strong&gt;SOs:&lt;/strong&gt; &lt;i style="font-size: 1em;" class="fas fa-globe"&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p&gt;O EDA Playground √© um simulador online que suporta v√°rias linguagens de descri√ß√£o de hardware. √â mantido pela &lt;a href="https://www.doulos.com/"&gt;Doulos&lt;/a&gt;, uma empresa privada que fornece treinamentos (inclusive em HDLs). Sua maior vantagem est√° em funcionar com qualquer navegador de internet moderno, sem necessidade de nenhuma instala√ß√£o adicional. H√° limita√ß√µes para utilizar o ambiente sem uma conta, mas √© poss√≠vel se cadastrar com o email @usp e conseguir uma conta com suporte a salvar o trabalho e acesso a algumas ferramentas indispon√≠veis na vers√£o aberta (o processo de cadastro demora, n√£o deixe para se cadastrar na √∫ltima hora). Para facilitar, fa√ßa login com sua senha √∫nica USP usando o m√©todo de login "com conta Google".&lt;/p&gt;
&lt;p&gt;Para us√°-lo, basta acessar o link acima (P√°gina) e come√ßar o seu projeto. A ferramenta s√≥ aceita projetos no formato padr√£o de DUT (&lt;em&gt;Design Under Test&lt;/em&gt;), onde o seu &lt;em&gt;testbench&lt;/em&gt; √© respons√°vel por instanciar e gerar os est√≠mulos para sua entidade &lt;em&gt;toplevel&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Caso tenha dificuldades, acesse a documenta√ß√£o (em ingl√™s) &lt;a href="https://eda-playground.readthedocs.io/en/latest/"&gt;aqui&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;No restante deste tutorial, assumimos que j√° logou com sua conta @usp e vamos nos concentrar em simular uma descri√ß√£o de uma ULA (Unidade L√≥gica e Aritm√©tica) simples em VHDL.&lt;/p&gt;
&lt;h2&gt;Configura√ß√£o&lt;/h2&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/vhdl/edaplayground/configuration.png' width="20%" align="left" style="padding-right:5%" /&gt;
Quando acessar o ambiente, ver√° um painel a esquerda, como o mostrado na figura. Neste painel voc√™ pode escolher e configurar a ferramenta que utilizar√° para simula√ß√£o.&lt;/p&gt;
&lt;p&gt;A primeira coisa que deve fazer √© escolher VHDL na caixa &lt;strong&gt;Testbench+Design&lt;/strong&gt;. Isto vai abrir um leque de op√ß√µes para escolher, todas relativas a VHDL.&lt;/p&gt;
&lt;p&gt;Em bibliotecas, marque a op√ß√£o &lt;strong&gt;None&lt;/strong&gt; pois n√£o usaremos nenhuma biblioteca extra. Mesmo se usar bibliotecas n√£o padronizadas na sua descri√ß√£o, esta op√ß√£o deve ficar como &lt;strong&gt;None&lt;/strong&gt; pois diz respeito a bibliotecas externas, usadas para verifica√ß√£o e teste de cobertura avan√ßados. Todas as bibliotecas de VHDL (incluindo a &lt;code&gt;1164&lt;/code&gt; e a &lt;code&gt;textio&lt;/code&gt;) j√° est√£o dispon√≠veis no EDA Playground sem importar bibliotecas extras.&lt;/p&gt;
&lt;p&gt;J√° no &lt;strong&gt;Top entity&lt;/strong&gt; voc√™ deve colocar a entidade principal do seu &lt;em&gt;toplevel&lt;/em&gt;, j√° que esta √© a entidade que o simulador deve procurar na hora de simular seu circuito. No nosso exemplo, a entidade chama-se &lt;code&gt;alu_andor_tb&lt;/code&gt;, portanto preencha com este nome.&lt;/p&gt;
&lt;p&gt;A caixa de de &lt;strong&gt;Enable VUnit&lt;/strong&gt; deve estar desmarcada pois n√£o usamos testes unit√°rios no exemplo (tamb√©m n√£o cobrimos este assunto para VHDL nas disciplinas de gradua√ß√£o).&lt;/p&gt;
&lt;p&gt;Em &lt;strong&gt;Tools &amp;amp; Simulators&lt;/strong&gt; escolha o GHDL. Para ficar mais pr√≥ximo da simula√ß√£o usada na gradua√ß√£o, deixe as op√ß√µes em &lt;strong&gt;Compile &amp;amp; Run options&lt;/strong&gt; todas vazias. Se desejar usar os &lt;em&gt;flags&lt;/em&gt; para controlar sua simula√ß√£o, leia o &lt;a href="https://ghdl.readthedocs.io/en/latest/using/InvokingGHDL.html"&gt;manual&lt;/a&gt; do GHDL antes.&lt;/p&gt;
&lt;p&gt;As duas caixas no final do painel de configura√ß√£o significam: &lt;strong&gt;Open EPWave after run&lt;/strong&gt; mostra a forma de onda obtida pela simula√ß√£o, similar ao que o GTKWave mostra (equivale a executar a simula√ß√£o com a op√ß√£o &lt;code&gt;--vcd&lt;/code&gt; habilitada); e &lt;strong&gt;Download files after run&lt;/strong&gt; far√° com que os seus arquivos todos sejam baixados para sua m√°quina automaticamente ao final da simula√ß√£o, no formato ZIP (voc√™ pode baixar manualmente depois tamb√©m).&lt;/p&gt;
&lt;h2&gt;Arquivos&lt;/h2&gt;
&lt;p&gt;O EDA Playground tem duas √°reas distintas: uma √°rea para o &lt;em&gt;testbench&lt;/em&gt; e outra para o arquivo da sua descri√ß√£o. Para continuar, baixe os arquivos &lt;a href="https://raw.githubusercontent.com/balbertini/hwProjects/master/vhdl_modules/alu/alu_andor/alu_andor_tb.vhd"&gt;alu_andor_tb.vhd&lt;/a&gt; e &lt;a href="https://raw.githubusercontent.com/balbertini/hwProjects/master/vhdl_modules/alu/alu_andor/alu_andor.vhd"&gt;alu_andor.vhd&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="√Årea dos arquivos" src="https://balbertini.github.io/images/vhdl/edaplayground/files.png"&gt;&lt;/p&gt;
&lt;p&gt;Na esquerda est√° a √°rea do &lt;em&gt;testbench&lt;/em&gt;. Cole o conte√∫do do arquivo &lt;code&gt;alu_andor_tb.vhd&lt;/code&gt; nesta √°rea. Na direita est√° a √°rea da sua descri√ß√£o, cole o conte√∫do do arquivo &lt;code&gt;alu_andor.vhd&lt;/code&gt; nesta √°rea. Voc√™ deve ter algo parecido com a figura acima.&lt;/p&gt;
&lt;p&gt;Em ambas as √°reas, √© poss√≠vel adicionar mais arquivos caso necessite. Se voc√™ usa algum componente que est√° em um outro arquivo VHD, por exemplo, pode inclu√≠-lo usando o bot√£o &lt;i class="fa fa-plus-square"&gt;&lt;/i&gt; e o arquivo estar√° dispon√≠vel no mesmo ambiente onde o simulador ser√° executado. N√£o se esque√ßa de instanciar apropriadamente seus componentes na sua descri√ß√£o. No nosso exemplo, usamos apenas um arquivo para o &lt;em&gt;testbench&lt;/em&gt; e outro para a descri√ß√£o, ent√£o n√£o precisamos adicionar mais nada.&lt;/p&gt;
&lt;h2&gt;Simulando&lt;/h2&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/vhdl/edaplayground/runbutton.png' width="20%" align="left" style="padding-right:5%; padding-bottom:1%;" /&gt;
Na √°rea superior do EDA Playground h√° tr√™s bot√µes, sendo que o primeiro √© o &lt;strong&gt;&lt;i class="fa fa-play-circle"&gt;&lt;/i&gt;Run&lt;/strong&gt;. Ao clicar neste bot√£o, o EDA Playground ir√° invocar o simulador que escolhemos na configura√ß√£o, neste caso o GHDL.&lt;/p&gt;
&lt;p&gt;A execu√ß√£o exata √©: &lt;code&gt;ghdl -i &amp;lt;arquivos.vhd&amp;gt;&lt;/code&gt; (&lt;code&gt;i&lt;/code&gt; de &lt;em&gt;import&lt;/em&gt; em ingl√™s) que importa todos os arquivos VHD do seu projeto para o ambiente de simula√ß√£o, depois &lt;code&gt;ghdl -m  &amp;lt;toplevel&amp;gt;&lt;/code&gt; (&lt;code&gt;m&lt;/code&gt; de &lt;em&gt;make&lt;/em&gt; em ingl√™s) que analisar√° todos os arquivos importados considerando que &lt;code&gt;&amp;lt;toplevel&amp;gt;&lt;/code&gt; √© a entidade principal a ser simulada, e depois &lt;code&gt;ghdl -r  &amp;lt;toplevel&amp;gt;&lt;/code&gt; (&lt;code&gt;r&lt;/code&gt; de &lt;em&gt;run&lt;/em&gt; em ingl√™s) que efetivamente executar√° a simula√ß√£o.&lt;/p&gt;
&lt;p&gt;Clique neste bot√£o agora e observe a sa√≠da do &lt;em&gt;Log&lt;/em&gt;, na √°rea logo abaixo dos seus arquivos.&lt;/p&gt;
&lt;p&gt;&lt;img alt="√Årea de log" src="https://balbertini.github.io/images/vhdl/edaplayground/log.png"&gt;&lt;/p&gt;
&lt;p&gt;Na √°rea de log, podemos ver a execu√ß√£o da simula√ß√£o. Qualquer mensagem eventualmente impressa pelo seu &lt;em&gt;testbench&lt;/em&gt; aparecer√° nesta √°rea. Veja que imprimimos BOT e EOT sem nenhuma mensagem intermedi√°ria, o que significa que a descri√ß√£o passou em todos os testes.&lt;/p&gt;
&lt;h2&gt;Visualizando formas de onda&lt;/h2&gt;
&lt;p&gt;Para simula√ß√µes de descri√ß√µes totalmente combinat√≥rias, um &lt;em&gt;testbench&lt;/em&gt; bem feito √© suficiente para procurar e resolver poss√≠veis problemas, por√©m para circuitos sequenciais isto n√£o √© totalmente verdade devido a correla√ß√£o temporal inerente deste tipo de circuito. Para este tipo de circuito, √© muito √∫til ter acesso √† forma de onda do circuito simulado.&lt;/p&gt;
&lt;p&gt;Marque a op√ß√£o &lt;strong&gt;Open EPWave after run&lt;/strong&gt; e execute a simula√ß√£o novamente. Ao final, voc√™ ser√° apresentado com a tela do visualizador de forma de onda, chamado de &lt;strong&gt;EPWave&lt;/strong&gt; no EDA Playground. A primeira vez que abri-lo, as forma de onda estar√° vazia. Vamos adicionar sinais: clique no bot√£o (esquerda superior do EPWave) &lt;strong&gt;Get Signals&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="√Årea de log" src="https://balbertini.github.io/images/vhdl/edaplayground/getsignals.png"&gt;&lt;/p&gt;
&lt;p&gt;No menu que abrir√°, como na figura acima, escolha os sinais que deseja visualizar na forma de onda. No nosso exemplo, clique em &lt;code&gt;dut&lt;/code&gt; e depois no bot√£o &lt;strong&gt;Append All&lt;/strong&gt; e em seguida &lt;strong&gt;Close&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Pronto! Voc√™ poder√° ver a forma de onda do circuito como na figura abaixo.&lt;/p&gt;
&lt;p&gt;&lt;img alt="√Årea de log" src="https://balbertini.github.io/images/vhdl/edaplayground/wave.png"&gt;&lt;/p&gt;
&lt;p&gt;Tente identificar as entradas e sa√≠das do circuito na forma de onda. Note que a ULA √© combinat√≥ria, ent√£o quem dita o tempo √© o &lt;em&gt;testbench&lt;/em&gt;.&lt;/p&gt;
&lt;h2&gt;Diferen√ßas do juiz&lt;/h2&gt;
&lt;p&gt;H√° duas diferen√ßas prim√°rias na execu√ß√£o do EDA Playground e do juiz. A primeira √© a vers√£o do GHDL. O juiz pode usar uma vers√£o diferente do GHDL, o que pode fazer com que a simula√ß√£o seja ligeiramente diferente do EDA Playground. A segunda √© a maneira que o juiz executa a simula√ß√£o. No EDA Playground, usa-se o fluxo &lt;code&gt;import&lt;/code&gt;, &lt;code&gt;make&lt;/code&gt; e &lt;code&gt;run&lt;/code&gt; do GHDL, enquanto o juiz analisa arquivo por arquivo (op√ß√£o &lt;code&gt;-a&lt;/code&gt; do GHDL) e s√≥ depois de todos analisados √© que elabora (op√ß√£o &lt;code&gt;-e&lt;/code&gt; do GHDL) e executa (op√ß√£o &lt;code&gt;-r&lt;/code&gt; do GHDL) a simula√ß√£o. A diferen√ßa no fluxo √© somente para evitar que o juiz processe arquivos que est√£o sintaticamente incorretos, preservando a carga da m√°quina que executa o juiz.&lt;/p&gt;
&lt;p&gt;Nenhuma das diferen√ßas traz vantagens ou desvantagens significativas, se a sua descri√ß√£o passou em um &lt;em&gt;testbench&lt;/em&gt; bem feito no EDA Playground, ir√° passar no juiz tamb√©m. O segredo em "passar" √© construir um &lt;em&gt;testbench&lt;/em&gt; bem feito, assim voc√™ garante que passar√° no &lt;em&gt;testbench&lt;/em&gt; feito pelos professores.&lt;/p&gt;</content><category term="hdl"></category><category term="vhdl"></category><category term="verilog"></category><category term="simuladores"></category></entry><entry><title>OBS Streaming</title><link href="https://balbertini.github.io/obsstreaming-pt_BR.html" rel="alternate"></link><published>2020-03-17T12:36:54-03:00</published><updated>2020-03-17T12:36:54-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2020-03-17:/obsstreaming-pt_BR.html</id><summary type="html">&lt;p&gt;OBS para stream ao vivo&lt;/p&gt;</summary><content type="html">&lt;p&gt;Uma das principais caracter√≠sticas do &lt;a href="https://obsproject.com/pt-br"&gt;OBS&lt;/a&gt; √© a possibilidade de fazer uma transmiss√£o ao vivo da sua aula, em tempo real, o que √© chamado de &lt;em&gt;streaming&lt;/em&gt;. As duas plataformas mais utilizadas para isso s√£o o YouTube e o Facebook. Neste tutorial vamos ver como fazer uma transmiss√£o deste tipo usando ambas as plataformas.&lt;/p&gt;
&lt;h1&gt;YouTube&lt;/h1&gt;
&lt;p&gt;O &lt;a href="https://www.youtube.com/"&gt;YouTube&lt;/a&gt; √© uma plataforma bastante popular de streaming. As contas de email da USP s√£o contas Google, ent√£o voc√™ pode logar no YouTube com sua conta. Quando logar, ver√° alguns √≠cones diferenciados no canto superior direito, como na figura abaixo. Clique no √≠cone com uma c√¢mera de v√≠deo com um + (s√≠mbolo de adi√ß√£o) e escolha "Transmiss√£o ao Vivo" (circulado na figura abaixo).&lt;/p&gt;
&lt;p&gt;&lt;img alt="√çcone do YouTube para cria√ß√£o de transmiss√£o ao vivo" src="https://balbertini.github.io/images/educacao/yt001.png"&gt;&lt;/p&gt;
&lt;p&gt;Caso seja questionado sobre criar uma nova transmiss√£o ou usar uma existente, escolha criar uma nova. O YouTube mostrar√° as prefer√™ncias da nova transmiss√£o como na figura abaixo. Preencha com os dados solicitados e depois clique em "Criar Stream".&lt;/p&gt;
&lt;p&gt;Explicando algumas op√ß√µes:  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;As categorias &lt;strong&gt;P√∫blica&lt;/strong&gt;, &lt;strong&gt;N√£o listada&lt;/strong&gt; e &lt;strong&gt;Particular&lt;/strong&gt; definem quem poder√° ver o seu v√≠deo, sendo qualquer um, somente pessoas com o link e s√≥ voc√™, respectivamente. Para aulas aconselho a categoria &lt;strong&gt;N√£o listada&lt;/strong&gt;, e voc√™ divulga o link para seus alunos usando as plataformas convencionais (e.g. e-Disciplinas).&lt;/li&gt;
&lt;li&gt;A op√ß√£o de "programar para mais tarde" permite que voc√™ agende uma transmiss√£o. Para aulas com hor√°rio marcado, esta op√ß√£o deve ser usada, pois permite que voc√™ crie o link para a transmiss√£o de antem√£o. Coloque o hor√°rio que pretende fazer a transmiss√£o.&lt;/li&gt;
&lt;li&gt;A op√ß√£o de "fazer upload de uma miniatura personalizada" permite que a imagem do v√≠deo (que os usu√°rios veem antes de clicar no play) seja definida de antem√£o. Normalmente coloco uma foto ou logotipo do departamento.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="Op√ß√µes do YouTube para cria√ß√£o de transmiss√£o ao vivo" src="https://balbertini.github.io/images/educacao/yt002.png"&gt;&lt;/p&gt;
&lt;p&gt;Depois de criar o &lt;em&gt;stream&lt;/em&gt;, voc√™ ser√° apresentado com uma tela similar a figura abaixo.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Tela de teste de transmiss√£o ao vivo do YouTube" src="https://balbertini.github.io/images/educacao/yt003.png"&gt;&lt;/p&gt;
&lt;p&gt;Os pontos importantes aqui:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Anote a chave de transmiss√£o, copiando-a para algum lugar seguro. Qualquer pessoa com esta chave poder√° transmitir no seu canal, portanto proteja-a adequadamente.&lt;/li&gt;
&lt;li&gt;A lat√™ncia recomendada √©: &lt;strong&gt;normal&lt;/strong&gt; para aulas sem intera√ß√£o, &lt;strong&gt;baixa&lt;/strong&gt; para aulas com intera√ß√£o pontual (e.g. professor responde perguntas em momento oportuno) e &lt;strong&gt;ultra baixa&lt;/strong&gt; para itera√ß√£o em tempo real. Note que quanto mais baixa a lat√™ncia, mais recursos ser√£o exigidos da sua m√°quina e conex√£o.&lt;/li&gt;
&lt;li&gt;A op√ß√£o "Ativar DVR" tornar√° seu v√≠deo dispon√≠vel no YouTube ap√≥s a grava√ß√£o. Recomendo deixar marcada, assim um aluno que perder a aula ao vivo poder√° assisti-la depois.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Feitas as configura√ß√µes, voc√™ pode voltar ao YouTube Studio usando a seta no canto superior esquerdo. Voc√™ ser√° apresentado com uma tela onde aparecem as suas transmiss√µes agendadas. Clique nos tr√™s pontos ao lado da transmiss√£o e escolha "Gerar link compartilh√°vel" no menu que aparecer√°, como na figura abaixo.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Tela de espera para transmiss√£o ao vivo do YouTube" src="https://balbertini.github.io/images/educacao/yt004.png"&gt;&lt;/p&gt;
&lt;p&gt;O link do v√≠deo ser√° automaticamente copiado para a sua √°rea de transfer√™ncia. Divulgue este link para os alunos e se prepare para transmitir no hor√°rio marcado.&lt;/p&gt;
&lt;p&gt;Voc√™ deve ter agora uma transmiss√£o agendada, com os seguintes itens:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Uma chave de acesso para a transmiss√£o ao vivo&lt;/li&gt;
&lt;li&gt;Um link para compartilhar com seu p√∫blico&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Caso esteja agendando a transmiss√£o e necessite fechar a tela do navegador, voc√™ poder√° acessar novamente o painel no &lt;a href="https://studio.youtube.com"&gt;YouTube Studio&lt;/a&gt;, clicando em "V√≠deos" no menu esquerdo, depois no √≠cone de gerenciamento da transmiss√£o agendada (veja a figura abaixo).&lt;/p&gt;
&lt;p&gt;&lt;img alt="Lista de transmiss√µes ao vivo do YouTube" src="https://balbertini.github.io/images/educacao/yt005.png"&gt;&lt;/p&gt;
&lt;p&gt;V√° para a √∫ltima se√ß√£o deste post para come√ßar a transmitir.&lt;/p&gt;
&lt;h1&gt;Facebook&lt;/h1&gt;
&lt;p&gt;O Facebook √© uma rede social popular entre os alunos. A vantagem de us√°-lo √© que a maioria dos planos das operadoras de celular n√£o desconta franquia para que os alunos vejam v√≠deos.&lt;/p&gt;
&lt;p&gt;Para come√ßar a usar voc√™ precisa de uma conta no Facebook. Crie ou entre com sua conta.&lt;/p&gt;
&lt;p&gt;H√° duas maneiras de publicar, em uma p√°gina espec√≠fica ou no seu feed.&lt;/p&gt;
&lt;h2&gt;Em uma p√°gina espec√≠fica&lt;/h2&gt;
&lt;p&gt;Acesse o &lt;a href="https://www.facebook.com/bookmarks/pages"&gt;Facebook pages&lt;/a&gt; e crie uma p√°gina. Voc√™ pode dar o nome que desejar (e.g. da disciplina). ap√≥s criar sua pa«µina, role e ver√° um menu como o da figura abaixo. Clique na c√¢mera "ao vivo".&lt;/p&gt;
&lt;p&gt;&lt;img alt="Menu transmiss√£o em p√°gina Facebook" src="https://balbertini.github.io/images/educacao/fb001.png"&gt;&lt;/p&gt;
&lt;h2&gt;No seu feed&lt;/h2&gt;
&lt;p&gt;Na p√°gina principal do Facebook (j√° logado), procure o √≠cone de adicionar novo conte√∫do e clique no bot√£o da c√¢mera "V√≠deo ao Vivo", como na figura abaixo.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Menu transmiss√£o no feed Facebook" src="https://balbertini.github.io/images/educacao/fb002.png"&gt;&lt;/p&gt;
&lt;h2&gt;Para ambos so m√©todos do Facebook&lt;/h2&gt;
&lt;p&gt;No momento de tranmitir o v√≠deo (alguns minutos ante do hor√°rio marcado), acesseo o &lt;a href="https://www.facebook.com/live/producer"&gt;Facebook Producer&lt;/a&gt;. Clique em "Iniciar transmiss√£o agora" e anote a "chave de stream".&lt;/p&gt;
&lt;p&gt;Voc√™ deve ter os seguintes itens:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Uma chave de acesso para a transmiss√£o ao vivo&lt;/li&gt;
&lt;li&gt;Uma p√°gina para link para compartilhar com seu p√∫blico (ou pe√ßa para eles te seguirem caso publique no feed)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;V√° para a pr√≥xima se√ß√£o para come√ßar a transmitir.&lt;/p&gt;
&lt;h1&gt;Transmitindo com o OBS&lt;/h1&gt;
&lt;p&gt;Abra o OBS e configure as cenas que deseja (aqui tem um &lt;a href="obsbasics.md"&gt;post&lt;/a&gt;) sobre como configurar uma cena b√°sica para aulas no formato de apresenta√ß√£o narrada). V√° ao menu de op√ß√µes (canto inferior direito) e abra as configura√ß√µes, como na figura abaixo.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Configura√ß√µes OBS" src="https://balbertini.github.io/images/educacao/obs008.png"&gt;&lt;/p&gt;
&lt;p&gt;Com as configura√ß√µes abertas, no menu a direita escolha "Transmiss√£o". Em "Servi√ßo", escolha &lt;strong&gt;YouTube/YouTube Gaming&lt;/strong&gt; ou &lt;strong&gt;Facebook Live&lt;/strong&gt; de acordo com o local em que deseja transmitir. Cole a chave da transmiss√£o no campo correspondente (circulado na figura abaixo).&lt;/p&gt;
&lt;p&gt;&lt;img alt="Configura√ß√µes OBS" src="https://balbertini.github.io/images/educacao/obs009.png"&gt;&lt;/p&gt;
&lt;p&gt;Clique em OK. Abra o site do YouTube ou do Facebook. Quando estiver pronto, clique no bot√£o "Iniciar transmiss√£o" na aba de controle e pronto! Voc√™ est√° ao vivo!&lt;/p&gt;
&lt;p&gt;Quando terminar o seu v√≠deo estar√° dispon√≠vel para acesso online (ambas as plataformas suportam), desde que tenha marcado a op√ß√£o para isso. Voc√™ pode compartilhar o link com os alunos que n√£o puderam assistir ao vivo.&lt;/p&gt;
&lt;p&gt;Outra fun√ß√£o muito √∫til s√£o os coment√°rios, tamb√©m dispon√≠veis em ambas as plataformas. √â poss√≠vel utiliz√°-los para intera√ß√£o em tempo real, mas isso fica para outro post.&lt;/p&gt;</content><category term="educacao"></category><category term="educacao"></category><category term="video-aula"></category></entry><entry><title>OBS B√°sico</title><link href="https://balbertini.github.io/obsbasics-pt_BR.html" rel="alternate"></link><published>2020-03-16T12:44:33-03:00</published><updated>2020-03-17T12:36:54-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2020-03-16:/obsbasics-pt_BR.html</id><summary type="html">&lt;p&gt;OBS B√°sico para grava√ß√£o de aulas&lt;/p&gt;</summary><content type="html">&lt;p&gt;O OBS √© um software open-source para grava√ß√£o de v√≠deos. Seu grande diferencial √© a possibilidade de &lt;em&gt;live streaming&lt;/em&gt; para v√°rias plataformas (e.g. YouTube, Facebook, etc).&lt;/p&gt;
&lt;h1&gt;Baixando e instalando&lt;/h1&gt;
&lt;p&gt;O software √© intuitivo de instalar e tem suporte aos sistemas operacionais mais utilizados (Linux, MacOS e Windows). Baixe o arquivo do &lt;a href="https://obsproject.com"&gt;site oficial&lt;/a&gt; e siga as instru√ß√µes de instala√ß√£o padr√£o para o seu sistema operacional.&lt;/p&gt;
&lt;p&gt;Para terminar o tutorial, voc√™ precisa ter:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;O software OBS instalado&lt;/li&gt;
&lt;li&gt;Sua apresenta√ß√£o aberta (e.g. PowerPoint, Impress, etc.)&lt;/li&gt;
&lt;li&gt;Uma c√¢mera e microfone&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Configura√ß√£o B√°sica&lt;/h1&gt;
&lt;p&gt;O OBS tem um excelente &lt;a href="https://obsproject.com/wiki/OBS-Studio-Quickstart"&gt;quickstart&lt;/a&gt; e uma excelente &lt;a href="https://obsproject.com/wiki/"&gt;documenta√ß√£o&lt;/a&gt;. Aqui veremos como fazer a configura√ß√£o b√°sica do SW para grava√ß√£o de vide-aulas simples, no formato apresenta√ß√£o narrada (com ou sem c√¢mera do professor).&lt;/p&gt;
&lt;p&gt;Com os requisitos (acima) instalados, abra o OBS. Voc√™ deve ver uma tela parecida com a da figura abaixo.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Painel de cenas" src="https://balbertini.github.io/images/educacao/obs002.png"&gt;&lt;/p&gt;
&lt;p&gt;Preste aten√ß√£o √† lista de cenas, no canto inferior esquerdo e circulada em vermelho na figura. Na lista de cenas, clique no bot√£o + (s√≠mbolo de soma, canto inferior esquerdo do painel de cenas) e adicione uma nova cena chamada "Apresenta√ß√£o" como na figura abaixo:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Entrada do nome da cena" src="https://balbertini.github.io/images/educacao/obs004.png"&gt;&lt;/p&gt;
&lt;p&gt;Quando adicionar ter√° uma cena chamada "Apresenta√ß√£o", sem nenhuma fonte configurada, ent√£o aparecer√° como uma tela preta. Ao lado do painel de cenas, h√° o painel de fontes.&lt;/p&gt;
&lt;p&gt;Neste momento, abra a sua apresenta√ß√£o e comece a apresenta√ß√£o (e.g. PowerPoint, LibreOffice Impress, etc.) como faria em uma apresenta√ß√£o normal. A apresenta√ß√£o deve abrir e tomar a tela toda.&lt;/p&gt;
&lt;p&gt;Com a fonte "Apresenta√ß√£o" selecionada, adicione uma fonte clicando no + (s√≠mbolo de soma, canto inferior esquerdo do painel de fontes), conforme a figura abaixo.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Painel de fontes" src="https://balbertini.github.io/images/educacao/obs003.png"&gt;&lt;/p&gt;
&lt;p&gt;Quando adicionar a fonte para a nova cena, voc√™ ser√° solicitado a escolher a fonte de captura que deseja. Neste caso, escolha "Captura de Tela" ou "Captura de Janela" e "Criar nova". Voc√™ pode dar o nome que desejar para esta fonte, chamaremos de "Slides", como na figura abaixo.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Menu de cria√ß√£o de fonte" src="https://balbertini.github.io/images/educacao/obs005.png"&gt;&lt;/p&gt;
&lt;p&gt;Ap√≥s criar a fonte, voc√™ ser√° apresentado com as op√ß√µes desta fonte. Caso tenha selecionado a tela toda quando criou a fonte, escolha a tela onde a apresenta√ß√£o est√° acontecendo (se houver mais de uma tela). Caso n√£o veja a janela da apresenta√ß√£o, voc√™ se esqueceu de come√ßar o modo apresenta√ß√£o do seu software, volte e coloque o software em modo de apresenta√ß√£o, depois tente novamente. Caso tenha escolhido capturar por janelas, escolha a "Janela" do seu software de apresenta√ß√£o, como na figura abaixo.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Menu de captura de tela" src="https://balbertini.github.io/images/educacao/obs006.png"&gt;&lt;/p&gt;
&lt;p&gt;Ap√≥s isso, voc√™ ver√° uma tela como a abaixo, com uma cena aparecendo a sua apresenta√ß√£o. Verifique os os mostradores de captura de √°udio se movimentam quando voc√™ fala, isto √© um sinal que o microfone est√° sendo capturado corretamente. Clique no bot√£o "Iniciar Grava√ß√£o", circulado abaixo.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Bot√£o de Iniciar Grava√ß√£o" src="https://balbertini.github.io/images/educacao/obs007.png"&gt;&lt;/p&gt;
&lt;p&gt;Narre sua apresenta√ß√£o normalmente. Quando terminar, clique no mesmo bot√£o (durante a grava√ß√£o o bot√£o mudar√° para "Parar Grava√ß√£o").&lt;/p&gt;
&lt;p&gt;Pronto! Seu v√≠deo est√° salvo e pronto para a pr√≥xima etapa, que √© sub√≠-lo para uma plataforma que os alunos tenham acesso.&lt;/p&gt;
&lt;p&gt;Para hospedar o seu v√≠deo no e-Aulas da USP, veja &lt;a href="http://eaulas.usp.br/portal/video.action?idItem=8730"&gt;este tutorial&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Uma alternativa ao OBS √© o &lt;a href="https://atomisystems.com/download/"&gt;ActivePresenter&lt;/a&gt;, que tem um &lt;a href="http://eaulas.usp.br/portal/video.action?idItem=8728"&gt;tutorial de grava√ß√£o de v√≠deo&lt;/a&gt; feito pela PRG.&lt;/p&gt;
&lt;p&gt;Veja um v√≠deo com o passo a passo do que foi feito neste tutorial:&lt;/p&gt;
&lt;iframe width="560" height="315" src="https://www.youtube.com/embed/zRaIofzCqOg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;</content><category term="educacao"></category><category term="educacao"></category><category term="video-aula"></category></entry><entry><title>Tipos agregados em VHDL</title><link href="https://balbertini.github.io/vhdl_aggregate-pt_BR.html" rel="alternate"></link><published>2019-09-05T16:22:44-03:00</published><updated>2019-09-09T10:16:11-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2019-09-05:/vhdl_aggregate-pt_BR.html</id><summary type="html">&lt;p&gt;Como usar tipos agregados em VHDL&lt;/p&gt;</summary><content type="html">&lt;p&gt;VHDL suporta um tipo de dado chamado de &lt;strong&gt;agregado&lt;/strong&gt;, que nada mais √© que uma cole√ß√£o de sinais, representada por um vetor ou um registro. O vetor √© o mais utilizado pois representa um conjunto de fios no hardware sintetizado.&lt;/p&gt;
&lt;h2&gt;Vetores&lt;/h2&gt;
&lt;p&gt;Os dois tipos de dados mais utilizados em VHDL, &lt;code&gt;bit&lt;/code&gt; e &lt;code&gt;std_logic&lt;/code&gt; possuem vers√µes em vetores pr√©-definidas, o &lt;code&gt;bit_vector&lt;/code&gt; e o &lt;code&gt;std_logic_vector&lt;/code&gt;. A vers√£o em &lt;code&gt;bit&lt;/code&gt; √© nativa, portanto voc√™ pode utiliz√°-la imediadamente na sua descri√ß√£o. No caso do &lt;code&gt;std_logic&lt;/code&gt;, como o tipo √© considerado uma extens√£o do VHDL, deve-se incluir a biblioteca &lt;code&gt;ieee.std_logic_1164&lt;/code&gt; antes da sua utiliza√ß√£o.&lt;/p&gt;
&lt;p&gt;No entanto, pode-se definir um vetor de &lt;a href="https://balbertini.github.io/vhdl_datatypes-pt_BR.html"&gt;qualquer tipo suportado&lt;/a&gt;. A palavra chave para definir-se um vetor √© &lt;code&gt;array&lt;/code&gt;. Declara-se um tipo de dados personalizado com a palavra reservada &lt;code&gt;type&lt;/code&gt; e usa-se o &lt;code&gt;array&lt;/code&gt; para especificar um vetor. Ap√≥s a declara√ß√£o, pode-se usar o tipo agregado como um tipo qualquer.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;type&lt;/span&gt; &lt;span class="n"&gt;meu_vetor&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="k"&gt;array&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;meu_conjunto_de_fios&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;meu_vetor&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;mv&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;meu_vetor&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;O trecho acima ir√° gerar um conjunto de tr√™s fios (chamado &lt;code&gt;meu_conjunto_de_fios&lt;/code&gt;) do tipo que podem ser acessados como um √∫nico. Sabemos que para um vetor de &lt;code&gt;bit&lt;/code&gt; poder√≠amos usar simplesmente &lt;code&gt;signal meu_conjunto_de_fios: bit_vector(2 downto 0);&lt;/code&gt;, por√©m a declara√ß√£o pode ser usada para qualquer outro tipo e √© especialmente √∫til quando estamos modelando &lt;a href="https://balbertini.github.io/vhdl_mem-pt_BR.html"&gt;mem√≥rias&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;√â poss√≠vel declarar vetores de vetores, criando estruturas multidimensionais.&lt;/p&gt;
&lt;h3&gt;Utilizando Vetores&lt;/h3&gt;
&lt;p&gt;Para acessar um elemento de um vetor, basta usar a indexa√ß√£o. E.g. &lt;code&gt;a&amp;lt;=mv(0)&lt;/code&gt; ir√° atribuir o bit menos significativo do vetor &lt;code&gt;mv&lt;/code&gt; ao sinal &lt;code&gt;a&lt;/code&gt;. √â importante notar que &lt;code&gt;a&lt;/code&gt; deve ser do mesmo tipo declarado no tipo do vetor, nesse caso &lt;code&gt;bit&lt;/code&gt;. A ordem em que os √≠ndices s√£o acessados tamb√©m depende da declara√ß√£o do vetor. Como declaramos o &lt;code&gt;meu_vetor&lt;/code&gt; como &lt;code&gt;(2 downto 0)&lt;/code&gt;, o bit menos significativo ser√° o &lt;code&gt;0&lt;/code&gt;. Se declar√°ssemos &lt;code&gt;(0 to 2)&lt;/code&gt;, o bit menos significativo deveria ser acessado com &lt;code&gt;mv(2)&lt;/code&gt;. Lembre-se que a signific√¢ncia de um conjunto de bits √© uma conven√ß√£o, que assumimos sempre como o menos significativo sendo o bit mais a direita.&lt;/p&gt;
&lt;p&gt;Para escrever em um vetor tamb√©m usamos os par√™nteses (como na indexa√ß√£o), mas temos duas alternativas: associa√ß√£o posicional ou nomeada.&lt;/p&gt;
&lt;p&gt;Na &lt;strong&gt;associa√ß√£o posicional&lt;/strong&gt;, os elementos s√£o associados sempre em ordem, da esquerda para a direita. E.g. &lt;code&gt;mv &amp;lt;= (c,b,a);&lt;/code&gt; equivale a &lt;code&gt;mv(0)&amp;lt;=a;&lt;/code&gt;, &lt;code&gt;mv(1)&amp;lt;=b;&lt;/code&gt; e &lt;code&gt;mv(2)&amp;lt;=c;&lt;/code&gt;. √â recomendado que todas as posi√ß√µes do vetor estejam preenchidas e o tipo de cada uma deve ser do mesmo tipo declarado no tipo do vetor. Tamb√©m √© poss√≠vel associarmos posicionalmente usando um operador de concatena√ß√£o:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;mv&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;-- todos devem ser bits&lt;/span&gt;
&lt;span class="n"&gt;mv&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;a2&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;-- a2 √© um vetor de duas posi√ß√µes&lt;/span&gt;
&lt;span class="n"&gt;mv&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;mv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;mv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;-- rotacao para esquerda&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;A parte importante da atribui√ß√£o posicional √© conter todos os elementos do vetor (o que implica que o tipo e o tamanho devem ser id√™nticos). Constantes literais tamb√©m s√£o aceitas, bastando retirar os par√™nteses, como em &lt;code&gt;mv&amp;lt;="101";&lt;/code&gt;, obviamente respeitando o tipo e tamanho.&lt;/p&gt;
&lt;p&gt;A segunda maneira √© chamada de &lt;strong&gt;associa√ß√£o nomeada&lt;/strong&gt;. Neste tipo de associa√ß√£o podemos atribuir os valores sem respeitar a ordem, nomeando-os. E.g. &lt;code&gt;mv&amp;lt;=(0=&amp;gt;a,2=&amp;gt;c,1=&amp;gt;b);&lt;/code&gt; equivale a &lt;code&gt;mv &amp;lt;= (c,b,a);&lt;/code&gt;. A utilidade principal deste tipo de atribui√ß√£o √© atribuir valores somente para as posi√ß√µes de interesse. mas n√£o √© necess√°rio atribuir para todos os elementos do vetor? Sim, mas temos uma palavra chave que diz exatamente o que fazer com todos as posi√ß√µes n√£o especificadas:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;mv&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;others&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;-- atribui√ß√£o 0c0&lt;/span&gt;
&lt;span class="n"&gt;mv&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;others&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;-- 0c1&lt;/span&gt;
&lt;span class="n"&gt;mv&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;others&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;-- 000&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Note que &lt;strong&gt;n√£o&lt;/strong&gt; precisamos saber o tamanho do vetor para usar &lt;code&gt;others&lt;/code&gt;, ent√£o este tipo de atribui√ß√£o √© muito √∫til quando associada com &lt;a href="https://balbertini.github.io/vhdl_generic-pt_BR.html"&gt;generics&lt;/a&gt;. De fato, a constru√ß√£o &lt;code&gt;vetor&amp;lt;=(others=&amp;gt;'0');&lt;/code&gt; zera qualquer vetor cujo tipo seja compat√≠vel com o literal &lt;code&gt;'0'&lt;/code&gt;, independentemente do tamanho.&lt;/p&gt;
&lt;h2&gt;Registros&lt;/h2&gt;
&lt;p&gt;Quando todos os elementos do vetor s√£o do mesmo tipo, usamos o &lt;code&gt;array&lt;/code&gt; para declar√°-lo, mas e se os tipos n√£o forem os mesmos? A palava chave &lt;code&gt;record&lt;/code&gt; serve exatamente para isso. Suponha que eu quero um conjunto de seis fios, sendo um &lt;em&gt;clock&lt;/em&gt;, um inteiro sem sinal de quatro bits e um &lt;em&gt;flag&lt;/em&gt; que pode ser &lt;em&gt;tri-state&lt;/em&gt;.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;type&lt;/span&gt; &lt;span class="n"&gt;meu_registro&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="k"&gt;record&lt;/span&gt;
  &lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;mi&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;integer&lt;/span&gt; &lt;span class="k"&gt;range&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;mf&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;std_logic&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;record&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Se declararmos um &lt;code&gt;signal mr: meu_registro;&lt;/code&gt;, teremos um conjunto de fios que representam exatamente o que est√° no registro. As atribui√ß√µes seguem as mesmas regras que para o vetor, inclusive para associa√ß√£o nomeada.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;mr&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;mr&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;ck&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mi&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mf&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;As ferramentas de s√≠ntese na sua maioria n√£o suportam a s√≠ntese completa de registros, portanto evite-os em descri√ß√µes sintetiz√°veis.&lt;/p&gt;
&lt;h2&gt;Convers√£o&lt;/h2&gt;
&lt;p&gt;Muitas pessoas se confundem quando convertem entre agregados. Veja este post sobre &lt;a href="https://balbertini.github.io/vhdl_conversion-pt_BR.html"&gt;convers√£o de dados&lt;/a&gt; para um guia de como fazer a convers√£o corretamente.&lt;/p&gt;
&lt;h2&gt;Considera√ß√µes&lt;/h2&gt;
&lt;p&gt;Se voc√™ est√° na gradua√ß√£o ou est√° aprendendo a descrever hardware, seguem algumas dicas:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Evite matrizes (vetores multidimensionais) pois voc√™ tender√° a esgotar seus recursos de projeto rapidamente. A exce√ß√£o s√£o mem√≥rias pois n√£o h√° outra maneira de descrev√™-las.&lt;/li&gt;
&lt;li&gt;A atribui√ß√£o nomeada pode n√£o ser sintetiz√°vel pelo seu software. Para evitar problemas, sempre fa√ßa uma atribui√ß√£o completa (para todos os elementos do vetor) e use &lt;code&gt;others&lt;/code&gt; somente para fazer o &lt;em&gt;reset&lt;/em&gt; de elementos de mem√≥ria.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Se voc√™ est√° na p√≥s-gradua√ß√£o, este guia n√£o √© suficiente para voc√™ e voc√™ deve seriamente considerar constru√ß√µes mais avan√ßadas, mas seguir as dicas acima n√£o prejudicar√° seu poder de express√£o, somente deixar√° seu c√≥digo mais prolixo.&lt;/p&gt;</content><category term="vhdl"></category><category term="vhdl"></category><category term="basic"></category></entry><entry><title>Convers√£o e Cast</title><link href="https://balbertini.github.io/vhdl_conversion-pt_BR.html" rel="alternate"></link><published>2019-09-05T16:22:44-03:00</published><updated>2021-05-03T08:55:51-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2019-09-05:/vhdl_conversion-pt_BR.html</id><summary type="html">&lt;p&gt;Como converter entre tipos em VHDL&lt;/p&gt;</summary><content type="html">&lt;p&gt;VHDL √© uma linguagem fortemente tipada, o que na pr√°tica significa que voc√™ n√£o pode atribuir um sinal de um tipo a outro diretamente.&lt;/p&gt;
&lt;p&gt;No entanto, convers√µes entre tipos relacionados s√£o muito comuns, ent√£o apresentaremos aqui algumas formas de convers√£o.&lt;/p&gt;
&lt;h2&gt;Tipos agregados&lt;/h2&gt;
&lt;p&gt;H√° uma diferen√ßa muito grande entre tipos agregados e nativos.&lt;/p&gt;
&lt;p&gt;Uma das convers√µes mais comuns que existem em VHDL √© de/para inteiros, pois estes s√£o utilizados como indexadores ou comparadores com literais constantes. O inteiro no entanto, √© um tipo nativo do VHDL enquanto que outros tipos, como &lt;code&gt;unsigned&lt;/code&gt; ou &lt;code&gt;signed&lt;/code&gt; s√£o tipos compostos, considerados agregados (s√£o como vetores de bits com um significado especial). Os tipos vetores, em especial o &lt;code&gt;bit_vector&lt;/code&gt; e o &lt;code&gt;std_logic_vector&lt;/code&gt; tamb√©m s√£o vetores de bits, por√©m n√£o tem nenhum significado associado fora os definidos pelo seus respectivos tipos base.&lt;/p&gt;
&lt;p&gt;Para converter entre um tipo num√©rico e um agregado, √© necess√°rio uma fun√ß√£o de convers√£o pois s√£o tipos diferentes dentro da linguagem. J√° entre dois tipos num√©ricos ou entre dois tipos agregados, √© necess√°rio somente um &lt;em&gt;cast&lt;/em&gt;. Exceto pelo &lt;code&gt;bit_vector&lt;/code&gt;, todos os outros tipos e convers√µes precisam ser descritos, por√©m h√° bibliotecas padronizadas para todas as convers√µes poss√≠veis.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="right"&gt;Tipo&lt;/th&gt;
&lt;th align="center"&gt;Biblioteca&lt;/th&gt;
&lt;th align="center"&gt;Categoria&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;bit&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;nativo&lt;/td&gt;
&lt;td align="center"&gt;Simples&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;bit_vector&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;nativo&lt;/td&gt;
&lt;td align="center"&gt;Agregado&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;std_logic&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;&lt;code&gt;ieee.std_logic_1164&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;Enumerado&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;std_logic_vector&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;&lt;code&gt;ieee.std_logic_1164&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;Agregado&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Ao incluir a biblioteca &lt;code&gt;ieee.std_logic_1164&lt;/code&gt;, passamos a ter acesso aos tipos baseados em &lt;code&gt;std_logic&lt;/code&gt;. As bibliotecas padronizadas com as rotinas de convers√£o s√£o as &lt;code&gt;ieee.numeric_std&lt;/code&gt; para os derivados de &lt;code&gt;std_logic&lt;/code&gt;, e a &lt;code&gt;ieee.numeric_bit&lt;/code&gt; para os tipos derivados do &lt;code&gt;bit&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;As fun√ß√µes de convers√£o dispon√≠veis na &lt;code&gt;numeric_bit&lt;/code&gt; podem ser vista na figura:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Tabela de convers√£o de tipos da numeric_bit." src="https://balbertini.github.io/images/vhdl/conversaobitvectortabela.png"&gt;&lt;/p&gt;
&lt;p&gt;Em cinza as c√©lulas que dispensam de convers√£o (mesmo tipo), amarelo as que requerem uma fun√ß√£o de convers√£o espec√≠fica, verde as que dispensam a convers√£o mas precisam de um &lt;em&gt;cast&lt;/em&gt; para mudar a sem√¢ntica de interpreta√ß√£o. Em vermelho as convers√µes indispon√≠veis diretamente.&lt;/p&gt;
&lt;p&gt;De &lt;code&gt;integer&lt;/code&gt; para qualquer um dos outros tipos, temos que usar uma fun√ß√£o de convers√£o (em amarelo na tabela), que come√ßam com &lt;code&gt;to_&lt;/code&gt;. S√£o elas:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;I to_integer(S)&lt;/code&gt;: recebe um &lt;code&gt;signed&lt;/code&gt; e retorna um inteiro;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;I to_integer(U)&lt;/code&gt;: recebe um &lt;code&gt;unsigned&lt;/code&gt; e retorna um inteiro;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;S to_signed(I,S'lenght)&lt;/code&gt;: recebe um inteiro e retorna um &lt;code&gt;signed&lt;/code&gt;, segundo par√¢metro √© o tamanho do &lt;code&gt;signed&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;U to_unsigned(I,U'lenght)&lt;/code&gt;: recebe um inteiro e retorna um &lt;code&gt;unsigned&lt;/code&gt;, segundo par√¢metro √© o tamanho do &lt;code&gt;unsigned&lt;/code&gt;;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Nas convers√µes para inteiro, o inteiro resultante ter√° o tamanho necess√°rio para acomodar o tipo de origem (normalmente um bit a mais), mas a defini√ß√£o final do tamanho do inteiro depende do sintetizador. Nas convers√µes de inteiros, o tamanho do retorno deve ser especificado pois um inteiro tem tamanho indefinido, mas os vetores tem tamanho definido (veja &lt;a href="https://balbertini.github.io/vhdl_datatypes-pt_BR.html"&gt;o post sobre tipos de dados&lt;/a&gt; para limita√ß√µes dos simuladores/sintetizadores).&lt;/p&gt;
&lt;p&gt;Os demais tipos s√£o todos vetores de bits, portanto n√£o precisamos converter o tipo mas sim fazer um &lt;em&gt;cast&lt;/em&gt;, ou seja, ordenar o sintetizador a interpretar os dados com uma sem√¢ntica diferente. O &lt;em&gt;cast&lt;/em&gt; pode ser feito usando o tipo de destino e colocando a origem entre par√™nteses:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;V bit_vector(S)&lt;/code&gt;: recebe um &lt;code&gt;signed&lt;/code&gt; e o interpreta como um &lt;code&gt;bit_vector&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;V bit_vector(U)&lt;/code&gt;: recebe um &lt;code&gt;unsigned&lt;/code&gt; e o interpreta como um &lt;code&gt;bit_vector&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;S signed(V)&lt;/code&gt;: recebe um &lt;code&gt;bit_vector&lt;/code&gt; e o interpreta como &lt;code&gt;signed&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;U unsigned(V)&lt;/code&gt;: recebe um &lt;code&gt;bit_vector&lt;/code&gt; e o interpreta como &lt;code&gt;unsigned&lt;/code&gt;;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Note que isto n√£o √© uma fun√ß√£o de convers√£o, o sintetizador apenas interpretar√° aquele conjunto de bits (agregado) com uma sem√¢ntica diferente do tipo original declarado.&lt;/p&gt;
&lt;p&gt;Para resumir, veja o diagrama abaixo:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Diagrama de convers√£o de tipos baseados em BIT." src="https://balbertini.github.io/images/vhdl/vhdlconversao.png"&gt;&lt;/p&gt;
&lt;p&gt;O diagrama acima foi inspirado no diagrama do site &lt;a href="http://www.bitweenie.com/listings/vhdl-type-conversion/"&gt;BitWeenie&lt;/a&gt; para &lt;code&gt;std_logic&lt;/code&gt;. Se o tipo base que voc√™ est√° usando e o &lt;code&gt;std_logic&lt;/code&gt;, voc√™ deve incluir a biblioteca &lt;code&gt;numeric_std&lt;/code&gt; pois as convers√µes de/para este tipo est√£o nesta biblioteca.&lt;/p&gt;
&lt;h3&gt;Contribui√ß√µes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;25/set/2020: Arthur Lopes corrigiu o tipo do &lt;code&gt;std_logic&lt;/code&gt; na tabela e o &lt;code&gt;bit_vector(U)&lt;/code&gt;  no diagrama.&lt;/li&gt;
&lt;/ul&gt;</content><category term="vhdl"></category><category term="vhdl"></category><category term="basic"></category></entry><entry><title>Instanciando componentes parametricamente</title><link href="https://balbertini.github.io/vhdl_generate-pt_BR.html" rel="alternate"></link><published>2019-09-02T19:48:57-03:00</published><updated>2019-09-09T10:16:11-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2019-09-02:/vhdl_generate-pt_BR.html</id><summary type="html">&lt;p&gt;Usando o generate em VHDL.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Em muitas situa√ß√µes, n√£o sabemos de antem√£o quantas inst√¢ncias de determinado componente precisaremos pois este n√∫mero √© parametriz√°vel. Em VHDL, h√° a constru√ß√£o &lt;code&gt;generate&lt;/code&gt; que permite instanciar componentes e fazer liga√ß√µes para as inst√¢ncias de modo program√°tico, dependendo de um par√¢metro. A √∫nica restri√ß√£o para que esta constru√ß√£o seja sintetiz√°vel √© que todos os par√¢metros sejam resolv√≠veis no momento da s√≠ntese.&lt;/p&gt;
&lt;h2&gt;Sintaxe&lt;/h2&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nc"&gt;nome&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;parametro&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="n"&gt;lista&lt;/span&gt; &lt;span class="k"&gt;generate&lt;/span&gt;
    &lt;span class="n"&gt;primitivas&lt;/span&gt; &lt;span class="n"&gt;concorrentes&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;generate&lt;/span&gt; &lt;span class="nc"&gt;nome&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Onde &lt;code&gt;nome&lt;/code&gt; √© opcional e pode ser um nome qualquer para este &lt;em&gt;for-generate&lt;/em&gt;. O &lt;code&gt;parametro&lt;/code&gt; √© o nome do par√¢metro que ir√° variar dentro do la√ßo, assumindo os valores da &lt;code&gt;lista&lt;/code&gt;, e as primitivas concorrentes s√£o as que ser√£o instanciadas parametricamente (usando o par√¢metro definido no la√ßo).&lt;/p&gt;
&lt;p&gt;O par√¢metro deve ser algo resolv√≠vel pois o sintetizador ir√° substituir as primitivas concorrentes por v√°rias c√≥pias das mesmas primitivas, variando o par√¢metro. A id√©ia √© que o projetista possa instanciar v√°rias inst√¢ncias do mesmo componente de uma s√≥ vez. Com o exemplo, a utiliza√ß√£o ficar√° mais clara, ent√£o vamos l√°!&lt;/p&gt;
&lt;h3&gt;Exemplo&lt;/h3&gt;
&lt;p&gt;Suponha que tenhamos a seguinte descri√ß√£o de um &lt;em&gt;flip-flop&lt;/em&gt; tipo D:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;ffd&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;reset&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;q&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;
  &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;entity&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;processor&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="nc"&gt;ffd&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
  &lt;span class="nc"&gt;sequencial&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;reset&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;begin&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;reset&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
      &lt;span class="n"&gt;q&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;elsif&lt;/span&gt; &lt;span class="n"&gt;rising_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
      &lt;span class="n"&gt;q&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;architecture&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Para fazer um registrador simples com &lt;span class="math"&gt;\(n\)&lt;/span&gt; bits baseado neste &lt;em&gt;flip-flop&lt;/em&gt;, devemos montar a seguinte estrutura:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Registrador Simples com FFD" src="https://balbertini.github.io/images/vhdl/regffd.png"&gt;&lt;/p&gt;
&lt;p&gt;Em VHDL, a estrutura base deste registrador (parametriz√°vel), fica como abaixo:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;registrador&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;generic&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;natural&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;
  &lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;port&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;reset&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;q&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;entity&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;arch&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="nc"&gt;registrador&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;component&lt;/span&gt; &lt;span class="nc"&gt;ffd&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
    &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
      &lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;reset&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="n"&gt;q&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;
    &lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;component&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
  &lt;span class="nc"&gt;regs&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="k"&gt;generate&lt;/span&gt;
    &lt;span class="n"&gt;ffs&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;ffd&lt;/span&gt; &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;reset&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;q&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;generate&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;architecture&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Observe o &lt;code&gt;generate&lt;/code&gt; na arquitetura. A linha &lt;code&gt;ffs: ffd port map(clock, d(i), reset, q(i));&lt;/code&gt; instanciar√° &lt;span class="math"&gt;\(n\)&lt;/span&gt; &lt;em&gt;flip-flops&lt;/em&gt;, cada um ligado em um fio dos vetores (conjunto de fios) &lt;code&gt;d&lt;/code&gt; e &lt;code&gt;q&lt;/code&gt;, mas compartilhando o mesmo &lt;em&gt;clock&lt;/em&gt; e &lt;em&gt;reset&lt;/em&gt;. O fio do vetor que cada inst√¢ncia usar√° depende do par√¢metro &lt;code&gt;i&lt;/code&gt;, que ir√° variar de &lt;code&gt;n-1&lt;/code&gt; at√© &lt;code&gt;0&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Note que o nome da inst√¢ncia n√£o leva √≠ndice e fica s√≥ como &lt;code&gt;ffs&lt;/code&gt;. Cada sintetizador tem uma maneira de diferenciar as inst√¢ncias, mas a maioria deles colocar√° algum tipo de √≠ndice na inst√¢ncia. Quando formos usar este registrador, se setarmos o par√¢metro &lt;code&gt;n&lt;/code&gt; como 4 durante a instancia√ß√£o, o sintetizador instanciar√° quatro &lt;em&gt;flip-flops&lt;/em&gt;, chamados por exemplo de &lt;code&gt;ffs_3&lt;/code&gt;, &lt;code&gt;ffs_2&lt;/code&gt;, &lt;code&gt;ffs_1&lt;/code&gt; e &lt;code&gt;ffs_0&lt;/code&gt;. De fato, o c√≥digo acima ser√° transformado em algo similar a:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;arch&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="nc"&gt;registrador&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;component&lt;/span&gt; &lt;span class="nc"&gt;ffd&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
    &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
      &lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;reset&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="n"&gt;q&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;
    &lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;component&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
  &lt;span class="n"&gt;ffs_3&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;ffd&lt;/span&gt; &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;reset&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;q&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
  &lt;span class="n"&gt;ffs_2&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;ffd&lt;/span&gt; &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;reset&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;q&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
  &lt;span class="n"&gt;ffs_1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;ffd&lt;/span&gt; &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;reset&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;q&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
  &lt;span class="n"&gt;ffs_0&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;ffd&lt;/span&gt; &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;reset&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;q&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;architecture&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;A √∫nica diferen√ßa √© que o sintetizador √© quem far√° o "desenrolamento" do la√ßo &lt;em&gt;for-generate&lt;/em&gt;, permitindo que o projetista descreva um hardware gen√©rico cujo tamanho n√£o √© conhecido.&lt;/p&gt;
&lt;h2&gt;Condicionando o &lt;em&gt;for-generate&lt;/em&gt;&lt;/h2&gt;
&lt;p&gt;Quando a estrutura √© regular como no caso do registrador, o &lt;em&gt;for-generate&lt;/em&gt; √© muito √∫til e simples de usar. Mas e se houver pequenas diferen√ßas? Para isso, h√° o &lt;em&gt;if-generate&lt;/em&gt;, cuja sintaxe √©:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;nome&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;condicao&lt;/span&gt; &lt;span class="k"&gt;generate&lt;/span&gt;
  &lt;span class="n"&gt;primitivas&lt;/span&gt; &lt;span class="n"&gt;concorrentes&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;generate&lt;/span&gt; &lt;span class="nc"&gt;nome&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Este tipo de &lt;em&gt;if&lt;/em&gt; s√≥ pode ser usado dentro de um &lt;em&gt;for-generate&lt;/em&gt; e serve justamente para fazer pequenas mudan√ßas na estrutura do hardware sendo descrito, sem abrir m√£o da parametriza√ß√£o. Vejamos novamente um exemplo.&lt;/p&gt;
&lt;h3&gt;Exemplo&lt;/h3&gt;
&lt;p&gt;Considere o &lt;em&gt;half-adder&lt;/em&gt; (&lt;code&gt;ha&lt;/code&gt;) e o &lt;em&gt;full-adder&lt;/em&gt; (&lt;code&gt;fa&lt;/code&gt;) abaixo:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;ha&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt;  &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;co&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;
  &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;entity&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;structural&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="nc"&gt;ha&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
  &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="k"&gt;xor&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;co&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;architecture&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;fa&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ci&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt;  &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;co&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;
  &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;entity&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;structural&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="nc"&gt;fa&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
  &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="k"&gt;xor&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="k"&gt;xor&lt;/span&gt; &lt;span class="n"&gt;ci&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;co&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;or&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;ci&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;or&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;ci&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;architecture&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Um somador simples de &lt;span class="math"&gt;\(n\)&lt;/span&gt; bits tem a seguinte estrutura:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Somador Simples com FFD" src="https://balbertini.github.io/images/vhdl/somador.png"&gt;&lt;/p&gt;
&lt;p&gt;Note que o primeiro componente √© um &lt;em&gt;half-adder&lt;/em&gt; e n√£o possui entrada de &lt;em&gt;carry&lt;/em&gt;, enquanto todos os demais possuem. Usando somente um &lt;em&gt;for-generate&lt;/em&gt; este tipo de constru√ß√£o se torna complicada, inviabilizando sua utiliza√ß√£o. Por√©m, com o uso do &lt;em&gt;if-generate&lt;/em&gt;, podemos quebrar a regularidade do &lt;em&gt;for-generate&lt;/em&gt; somente para alguns elementos selecionados, como na descri√ß√£o do somador abaixo:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;somador&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;generic&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;bits&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;natural&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;
  &lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;port&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt;  &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bits&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;   &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bits&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;co&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;  &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;
  &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;entity&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;estrutural&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="nc"&gt;somador&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;component&lt;/span&gt; &lt;span class="nc"&gt;ha&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
    &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
      &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt;  &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;co&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;
    &lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;component&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;component&lt;/span&gt; &lt;span class="nc"&gt;fa&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
    &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
      &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ci&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt;  &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;co&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;
    &lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;component&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;cots&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bits&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
  &lt;span class="nc"&gt;fas&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="n"&gt;bits&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="k"&gt;generate&lt;/span&gt;
    &lt;span class="n"&gt;lsb&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="k"&gt;generate&lt;/span&gt;
      &lt;span class="n"&gt;hai&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;ha&lt;/span&gt; &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="n"&gt;cots&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;generate&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;msb&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="k"&gt;generate&lt;/span&gt;
      &lt;span class="n"&gt;fai&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;fa&lt;/span&gt; &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="n"&gt;cots&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="n"&gt;cots&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;generate&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;generate&lt;/span&gt; &lt;span class="nc"&gt;fas&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;co&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;cots&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bits&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;architecture&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Dentro do &lt;em&gt;for-generate&lt;/em&gt; temos dois &lt;em&gt;if-generates&lt;/em&gt;: um para o bit menos significativo do somador, que onde deve ser usado um &lt;code&gt;ha&lt;/code&gt; (sem entrada de &lt;em&gt;carry&lt;/em&gt;) e outro para os demais bits, onde deve ser usado um &lt;code&gt;fa&lt;/code&gt; com os &lt;em&gt;carries&lt;/em&gt; sendo ligados sequencialmente. Este tipo de constru√ß√£o chama-se &lt;em&gt;carry propagation&lt;/em&gt; ou &lt;em&gt;ripple carry&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Da mesma forma que o anterior, para um somador de quatro bits, o sintetizador "desenrolar√°" o &lt;em&gt;for-generate&lt;/em&gt; em (declara√ß√£o dos componentes suprimida):&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;estrutural&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="nc"&gt;somador&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="p"&gt;...&lt;/span&gt;
  &lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;cots&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bits&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
  &lt;span class="n"&gt;fai_3&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;fa&lt;/span&gt; &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="n"&gt;cots&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="n"&gt;cots&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
  &lt;span class="n"&gt;fai_2&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;fa&lt;/span&gt; &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="n"&gt;cots&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="n"&gt;cots&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
  &lt;span class="n"&gt;fai_1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;fa&lt;/span&gt; &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="n"&gt;cots&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="n"&gt;cots&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
  &lt;span class="n"&gt;hai_0&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;ha&lt;/span&gt; &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;        &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="n"&gt;cots&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;architecture&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;h1&gt;Resumo&lt;/h1&gt;
&lt;p&gt;O &lt;em&gt;for-generate&lt;/em&gt;, aliado ao &lt;em&gt;if-generate&lt;/em&gt; √© uma poderosa ferramenta para descrever hardware parametriz√°vel em VHDL, pois n√£o sabemos no momento da descri√ß√£o qual o valor do par√¢metro. √â muito usado para estruturas regulares ou com pouca varia√ß√£o. √â poss√≠vel usar outros tipos de primitivas concorrentes dentro do &lt;em&gt;for-generate&lt;/em&gt; que n√£o sejam a instancia√ß√£o de componentes, e √© poss√≠vel at√© mesmo aninhar &lt;em&gt;for-generates&lt;/em&gt; para instanciar matrizes de componentes, por exemplo.&lt;/p&gt;
&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width &lt; 768) ? "left" : align;
        indent = (screen.width &lt; 768) ? "0em" : indent;
        linebreak = (screen.width &lt; 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="vhdl"></category><category term="vhdl"></category><category term="basic"></category></entry><entry><title>Mem√≥rias em VHDL</title><link href="https://balbertini.github.io/vhdl_mem-pt_BR.html" rel="alternate"></link><published>2019-06-06T10:18:24-03:00</published><updated>2020-11-27T20:29:48-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2019-06-06:/vhdl_mem-pt_BR.html</id><summary type="html">&lt;p&gt;Mem√≥rias em VHDL.&lt;/p&gt;</summary><content type="html">&lt;p&gt;As mem√≥rias s√£o parte integrante de qualquer sistema digital sequencial. Enquanto trabalhamos com circuitos simples ou m√°quinas de estado, costumamos usar &lt;em&gt;flip-flops&lt;/em&gt; como elementos de mem√≥ria. Contudo, as tarefas mais complexas n√£o escalam devido ao tamanho dos elementos de mem√≥ria envolvidos. Considerando a tarefa de guardar informa√ß√µes, √© √∫til utilizarmos estruturas de mem√≥rias espec√≠ficas, como RAMs ou ROMs.&lt;/p&gt;
&lt;p&gt;Neste artigo, veremos como representar mem√≥rias do tipo RAM e ROM em VHDL.&lt;/p&gt;
&lt;h2&gt;Descri√ß√£o base&lt;/h2&gt;
&lt;p&gt;Postergaremos a descri√ß√£o da entidade (veja os exemplos no final do artigo), bastando o conhecimento que a mem√≥ria possui uma porta de entrada de endere√ßos (&lt;code&gt;addr&lt;/code&gt;), uma entrada de dados (&lt;code&gt;data_i&lt;/code&gt;) e uma sa√≠da de dados (&lt;code&gt;data_o&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;A mem√≥ria em VHDL ser√° ent√£o uma &lt;strong&gt;matriz&lt;/strong&gt; (&lt;code&gt;array&lt;/code&gt;) do &lt;strong&gt;tipo de dado&lt;/strong&gt; que se quer representar. O tamanho (profundidade) da matriz define o tamanho da mem√≥ria e normalmente √© representado por &lt;span class="math"&gt;\(n\)&lt;/span&gt;, onde &lt;span class="math"&gt;\(n=2^{a_s}\)&lt;/span&gt; e &lt;span class="math"&gt;\(a_s\)&lt;/span&gt; √© o tamanho em bits do endere√ßo &lt;code&gt;addr&lt;/code&gt;. A matriz vai ent√£o de &lt;span class="math"&gt;\(0\)&lt;/span&gt; at√© &lt;span class="math"&gt;\(n-1\)&lt;/span&gt;, contendo efetivamente &lt;span class="math"&gt;\(n\)&lt;/span&gt; posi√ß√µes.&lt;/p&gt;
&lt;p&gt;Cada posi√ß√£o da matriz √© uma palavra de mem√≥ria, representada pelo tipo de dado que se quer armazenar. O tamanho de cada palavra de mem√≥ria √© igual ao tamanho do tipo de dado usado, expresso por &lt;span class="math"&gt;\(d_s\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;Vamos ao exemplo, que deve estar no pre√¢mbulo da arquitetura:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;type&lt;/span&gt; &lt;span class="n"&gt;mem_t&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="k"&gt;array&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="mi"&gt;31&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;mem&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;mem_t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;No trecho, estamos descrevendo duas coisas, uma abstrata (de apoio a representa√ß√£o de hardware) e uma descri√ß√£o f√≠sica (que ir√° de fato gerar um hardware). A descri√ß√£o abstrata √© a declara√ß√£o do sinal &lt;code&gt;mem_t&lt;/code&gt; na primeira linha. Apesar de n√£o gerar um hardware por si s√≥, estamos declarando um tipo do usu√°rio que √© uma matriz (&lt;code&gt;array&lt;/code&gt;) de 32 posi√ß√µes (de 0 a 31). Cada posi√ß√£o armazena um &lt;code&gt;bit_vector&lt;/code&gt; de 4 bits. Podemos dizer que acabamos de declarar uma mem√≥ria com &lt;span class="math"&gt;\(n=32\)&lt;/span&gt; (ou &lt;span class="math"&gt;\(a_s=5\)&lt;/span&gt;) e &lt;span class="math"&gt;\(d_s=4\)&lt;/span&gt;. Esta mem√≥ria possui ent√£o 32 palavras de 4 bits, ou 128 bits no total.&lt;/p&gt;
&lt;p&gt;A segunda declara√ß√£o efetivamente descreve a mem√≥ria, fazendo com que o sinal &lt;code&gt;mem&lt;/code&gt; seja interpretado como a matriz declarada anteriormente.&lt;/p&gt;
&lt;p&gt;Mas √© s√≥ isso? Sim, √© s√≥ isso. Ao declarar uma matriz da maneira descrita, o sintetizador ir√° entender automaticamente que o que voc√™ quer descrever √© uma mem√≥ria. O tipo de mem√≥ria ser√° determinado pelo restante da sua descri√ß√£o, que dever√° conter as opera√ß√µes poss√≠veis sobre a matriz rec√©m declarada.&lt;/p&gt;
&lt;h2&gt;Operando sobre a matriz de mem√≥ria&lt;/h2&gt;
&lt;p&gt;H√° duas opera√ß√µes poss√≠veis, a escrita e a leitura. Para ler do vetor, basta index√°-lo com a posi√ß√£o do vetor que deseja-se ler. O resultado da indexa√ß√£o ser√° um dado do mesmo tipo que o declarado anteriormente como o tipo de dado da mem√≥ria.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;data_o&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;to_integer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;unsigned&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;addr&lt;/span&gt;&lt;span class="p"&gt;)));&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Para escrever no vetor, basta inverter a escrita, ou seja, atribuir um valor do mesmo tipo que o declarado na mem√≥ria √† uma posi√ß√£o do vetor, indexada da mesma maneira.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;to_integer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;unsigned&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;addr&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;data_i&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Note que o &lt;code&gt;addr&lt;/code&gt; deve ser um inteiro pois este √© o √∫nico tipo de dados permitido para indexa√ß√£o (neste caso usamos uma rotina de convers√£o para converter o &lt;code&gt;addr&lt;/code&gt; para um inteiro sem sinal). Tamb√©m observe que ambas as constru√ß√µes devem estar dentro do corpo da arquitetura e s√£o suscept√≠veis a qualquer estrutura em que estejam inseridas.&lt;/p&gt;
&lt;p&gt;Um conceito importante que costuma gerar d√∫vidas √© a inser√ß√£o destas opera√ß√µes dentro de um &lt;code&gt;process&lt;/code&gt;, o que a tornaria sequencial. No caso da leitura, isto √© opcional e o comando pode estar dentro ou fora do &lt;code&gt;process&lt;/code&gt;. Quando fora, a mem√≥ria gerada far√° uma leitura de forma combinat√≥ria e cabe ao utilizador da mem√≥ria esperar o tempo adequado para a estabiliza√ß√£o dos dados (decodifica√ß√£o do endere√ßo), evitando os poss√≠veis &lt;em&gt;glitches&lt;/em&gt;. Ao contr√°rio, a escrita deve estar dentro de um &lt;code&gt;process&lt;/code&gt; pois uma escrita combinat√≥ria pode gerar efeitos indesejados (e.g. escrita de parte da palavra em um endere√ßo e parte em outra). Isto n√£o √© uma limita√ß√£o da linguagem e sim uma descri√ß√£o errada. Lembro tamb√©m que isto n√£o tem rela√ß√£o com a sincronicidade da mem√≥ria a um &lt;em&gt;clock&lt;/em&gt;, pois o sinal de disparo do &lt;code&gt;process&lt;/code&gt; n√£o precisa ser um &lt;em&gt;clock&lt;/em&gt;. √â poss√≠vel descrever mem√≥rias com escritas combinat√≥rias em VHDL, mas nesse caso a decodifica√ß√£o de endere√ßo deve ser realizada antes da escrita, que deve ser controlada de fora da mem√≥ria. No entanto, se voc√™ est√° come√ßando, atenha-se a:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;escrita sequencial (dentro de um &lt;code&gt;process&lt;/code&gt;), e&lt;/li&gt;
&lt;li&gt;leitura combinat√≥ria para ROMs, e&lt;/li&gt;
&lt;li&gt;leitura sequencial ou combinat√≥ria para RAMs.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Carregamento Inicial&lt;/h2&gt;
&lt;p&gt;Em v√°rias situa√ß√µes, √© √∫til a mem√≥ria j√° conter algum valor no momento em que √© sintetizada, principalmente quando se trata de uma ROM. Isto pode ser feito de duas maneiras: atrav√©s de um literal constante na pr√≥pria descri√ß√£o ou atrav√©s de um arquivo externo.&lt;/p&gt;
&lt;h3&gt;Literal&lt;/h3&gt;
&lt;p&gt;Para carregar os valores com um literal na pr√≥pria descri√ß√£o, basta atribuir o valor na declara√ß√£o do sinal que representa a matriz. Isto pode ser feito da seguinte maneira:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;mem&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;mem_type&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
  &lt;span class="s"&gt;&amp;quot;0000&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;0001&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;0010&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;0011&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;0100&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;0101&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;0110&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;0111&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="s"&gt;&amp;quot;1000&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;1001&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;1010&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;1011&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;1100&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;1101&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;1110&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;1111&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="s"&gt;&amp;quot;0000&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;0001&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;0010&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;0011&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;0100&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;0101&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;0110&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;0111&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="s"&gt;&amp;quot;1000&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;1001&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;1010&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;1011&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;1100&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;1101&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;1110&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;1111&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Ao declarar a matriz de mem√≥ria podemos atribuir um valor inicial usando o operador &lt;code&gt;:=&lt;/code&gt;. No exemplo acima, h√° exatamente 32 palavras de 4 bits, o que preenche completamente a mem√≥ria. A representa√ß√£o usada para cada palavra √© a mesma usada para o tipo de dados declarado no tipo da mem√≥ria (nesse caso &lt;code&gt;bit_vector&lt;/code&gt;).&lt;/p&gt;
&lt;h3&gt;Arquivo&lt;/h3&gt;
&lt;p&gt;A ideia de se carregar a memoria usando um literal parece interessante por√©m se torna dif√≠cil quando a mem√≥ria √© grande, pois o literal est√° junto com a descri√ß√£o da mem√≥ria no arquivo VHDL. Imagine uma mem√≥ria com o tamanho de uma mem√≥ria atual, e calcule a quantidade de palavras que voc√™ ter√° que especificar...&lt;/p&gt;
&lt;p&gt;Para amenizar o problema, h√° uma biblioteca chamada de &lt;code&gt;textio&lt;/code&gt;, que cont√©m primitivas de leitura de arquivos. Podemos facilmente utiliz√°-la para ler o conte√∫do inicial da mem√≥ria de um arquivo externo ao VHDL e escrev√™-lo na matriz de mem√≥ria. Para fazer uso desta biblioteca, temos que declarar o uso do pacote &lt;code&gt;std.textio&lt;/code&gt; (lembre-se do &lt;code&gt;.all&lt;/code&gt; ou das funcionalidades que ir√° utilizar), o que nos disponibilizar√° as rotinas de manipula√ß√£o de arquivos. Para atribuir um valor inicial √† matriz de mem√≥ria, escrevemos uma fun√ß√£o auxiliar que l√™ os dados do arquivo e preenche uma matriz tempor√°ria id√™ntica a matriz de mem√≥ria, assim podemos atribuir a matriz tempor√°ria √† matriz de mem√≥ria durante a sua declara√ß√£o. Vejamos um exemplo:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;impure&lt;/span&gt; &lt;span class="k"&gt;function&lt;/span&gt; &lt;span class="n"&gt;inicializa&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nome_do_arquivo&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;string&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;mem_t&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;file&lt;/span&gt;     &lt;span class="n"&gt;arquivo&lt;/span&gt;  &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;text&lt;/span&gt; &lt;span class="k"&gt;open&lt;/span&gt; &lt;span class="n"&gt;read_mode&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="n"&gt;nome_do_arquivo&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;variable&lt;/span&gt; &lt;span class="n"&gt;linha&lt;/span&gt;    &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;variable&lt;/span&gt; &lt;span class="n"&gt;temp_bv&lt;/span&gt;  &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;variable&lt;/span&gt; &lt;span class="n"&gt;temp_mem&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;mem_t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;begin&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="n"&gt;mem_t&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;range&lt;/span&gt; &lt;span class="k"&gt;loop&lt;/span&gt;
      &lt;span class="n"&gt;readline&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;arquivo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;linha&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;linha&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;temp_bv&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;temp_mem&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="n"&gt;temp_bv&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;loop&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;temp_mem&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;mem&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;mem_t&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="n"&gt;inicializa&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;rom32x4.dat&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;A fun√ß√£o, resumidamente, est√° lendo um arquivo (cujo nome √© seu √∫nico par√¢metro) linha por linha, considerando que h√° uma palavra de mem√≥ria por linha, na forma de um &lt;code&gt;bit_vector&lt;/code&gt; de 4 bits. Note que a fun√ß√£o s√≥ ler√° a quantidade de dados necess√°ria para preencher a mem√≥ria pois o la√ßo √© limitado pelo tamanho do tipo da mem√≥ria. No nosso exemplo, ela ler√° as primeiras 32 palavras (uma por linha, ent√£o 32 linhas) do arquivo, esperando que cada linha contenha exatamente 4 bits. Na √∫ltima linha do exemplo declaramos a matriz de mem√≥ria atribuindo como valor inicial o valor retornado pela fun√ß√£o, que √© invocada com o nome do arquivo como par√¢metro. Um exemplo de arquivo √©:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;0000&lt;/span&gt;
&lt;span class="err"&gt;0001&lt;/span&gt;
&lt;span class="err"&gt;0010&lt;/span&gt;
&lt;span class="err"&gt;...&lt;/span&gt;
&lt;span class="err"&gt;1111&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Observe que o arquivo ter√° 32 linhas, que omito por quest√µes de espa√ßo.&lt;/p&gt;
&lt;h3&gt;Considera√ß√µes sobre valores iniciais&lt;/h3&gt;
&lt;p&gt;Normalmente, atribui√ß√µes na declara√ß√£o do sinal ou vari√°vel n√£o s√£o levadas em considera√ß√£o pelo sintetizador e tem efeitos somente para simula√ß√£o. Contudo, em algumas situa√ß√µes a maioria dos sintetizadores leva em considera√ß√£o o valor declarado na descri√ß√£o. Uma delas √© quando declaramos uma constante e n√£o um sinal. Isto faz sentido pois o valor inicial de uma mem√≥ria faz sentido se esta for uma ROM, portanto n√£o ser√° escrita. Dessa forma, a declara√ß√£o da matriz de mem√≥ria ser√°:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;constant&lt;/span&gt; &lt;span class="n"&gt;mem&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;mem_type&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Ambas as t√©cnicas de atribui√ß√£o de valores iniciais s√£o v√°lidas e podem ser usadas na declara√ß√£o da matriz de mem√≥ria (constante agora).&lt;/p&gt;
&lt;h2&gt;Exemplos&lt;/h2&gt;
&lt;p&gt;Os exemplos a seguir podem ser baixados e usados livremente, desde que respeitada a autoria &lt;a href="https://creativecommons.org/licenses/by/4.0/"&gt;CC-BY 4.0&lt;/a&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/balbertini/hwProjects/blob/master/vhdl_modules/memory/ram.vhd"&gt;RAM&lt;/a&gt; s√≠ncrona gen√©rica parametriz√°vel, com &lt;code&gt;WE&lt;/code&gt; (no exemplo o sinal chama-se &lt;code&gt;wr&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/balbertini/hwProjects/blob/master/vhdl_modules/memory/rom.vhd"&gt;ROM&lt;/a&gt; gen√©rica parametriz√°vel, com carga externa.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/balbertini/hwProjects/blob/master/vhdl_modules/memory/rom32x4.vhd"&gt;ROM&lt;/a&gt; de 32 palavras de 4 bits (como no exemplo deste artigo), com carga por literal e externa.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/balbertini/hwProjects/blob/master/vhdl_modules/memory/rom32x4.dat"&gt;Arquivo de dados&lt;/a&gt; para carga externa nos exemplos.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/balbertini/hwProjects/blob/master/vhdl_modules/memory/memorias_tb.vhd"&gt;&lt;em&gt;Testbench&lt;/em&gt;&lt;/a&gt; para todas as mem√≥rias acima (para rodar s√£o necess√°rios todos os arquivos).&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/balbertini/hwProjects/blob/master/vhdl_modules/memory/utils.vhd"&gt;Rotinas&lt;/a&gt; auxiliares para impress√£o dos vetores no &lt;em&gt;testbench&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;### Contribui√ß√µes
    * 27/nov/2020: Tomaz Maia Suller corrigiu um erro sobre o nome da &lt;code&gt;std.textio&lt;/code&gt;.&lt;/p&gt;
&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width &lt; 768) ? "left" : align;
        indent = (screen.width &lt; 768) ? "0em" : indent;
        linebreak = (screen.width &lt; 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="vhdl"></category><category term="vhdl"></category><category term="memory"></category></entry><entry><title>M√°quinas de estado em VHDL</title><link href="https://balbertini.github.io/vhdl_fsm-pt_BR.html" rel="alternate"></link><published>2019-03-19T10:58:59-03:00</published><updated>2019-09-09T10:24:21-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2019-03-19:/vhdl_fsm-pt_BR.html</id><summary type="html">&lt;p&gt;M√°quinas de estado em VHDL.&lt;/p&gt;</summary><content type="html">&lt;p&gt;M√°quinas de estado s√£o muito comuns pois, em sistemas digitais, todos os circuitos sequenciais podem ser vistos como uma m√°quina de estados finita. No entanto, especific√°-las em VHDL √© um desafio para os projetistas novatos devido aos problemas que surgem quando o tempo est√° envolvido. Circuitos combinat√≥rios n√£o dependem de tempo e n√£o possuem mem√≥ria, por√©m m√°quinas de estado possuem e precisam ser projetadas com o devido cuidado. Neste artigo mostrarei algumas formas seguras de especificar corretamente m√°quinas de estado finitas s√≠ncronas e determin√≠sticas em VHDL.&lt;/p&gt;
&lt;h3&gt;Revisitando o conceito de m√°quinas de estado&lt;/h3&gt;
&lt;p&gt;&lt;img alt="Modelo de FSM" src="https://balbertini.github.io/images/sd/fsmmodel.png"&gt;&lt;/p&gt;
&lt;p&gt;O modelo base de qualquer m√°quina de estados em sistemas digitais pode ser visto na figura. √â composto por um elemento de mem√≥ria (S) e duas fun√ß√µes combinat√≥rias, uma de transi√ß√£o de estados (T) e outra de sa√≠da (G). Quando a fun√ß√£o de sa√≠da depende somente do estado (aus√™ncia da seta tracejada na figura), dizemos que a m√°quina segue o modelo de Moore. Ao contr√°rio, quando a sa√≠da da m√°quina depende do estado e da entrada (presen√ßa da seta tracejada na figura), dizemos que a m√°quina segue o modelo de Mealy. Em ambos os casos, somente o elemento de mem√≥ria √© sequencial. As fun√ß√µes s√£o puramente combinat√≥rias e dependem somente da entrada (da fun√ß√£o) para produzir a sa√≠da. Note que, apesar de dependerem apenas na sua entrada, ambas as fun√ß√µes recebem a sa√≠da do elemento combinat√≥rio como entrada.&lt;/p&gt;
&lt;p&gt;Resumindo:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;T √© combinat√≥ria, recebe o estado e a entrada e produz o pr√≥ximo estado;&lt;/li&gt;
&lt;li&gt;G √© combinat√≥ria, recebe o estado (Moore) ou o estado e a entrada (Mealy), e produz a sa√≠da;&lt;/li&gt;
&lt;li&gt;S √© um elemento de mem√≥ria que armazena o estado atual.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Descrevendo a FSM em VHDL usando Moore ou Mealy&lt;/h2&gt;
&lt;p&gt;Aqui parte-se do pressuposto que voc√™ desenhou o diagrama de transi√ß√£o de estados da sua m√°quina de estados, ela √© finita e determin√≠stica. De fato, a grande maioria dos problemas sequenciais em sistemas digitais possuem a sua dificuldade no desenho do diagrama de transi√ß√£o e n√£o na implementa√ß√£o. Em outras palavras, implementar uma m√°quina de estados em VHDL √© relativamente simples, pois a parte dif√≠cil da solu√ß√£o do problema est√° imbu√≠da no diagrama de transi√ß√£o.&lt;/p&gt;
&lt;p&gt;Comece sua m√°quina de estados declarando a entidade e, consequentemente, a interface de entrada e sa√≠da da sua m√°quina de estados.&lt;/p&gt;
&lt;p&gt;Na arquitetura, sempre teremos duas partes: a parte sequencial e a parte combinat√≥ria. O elemento de mem√≥ria representa a parte sequencial da m√°quina de estado e portanto √© sens√≠vel ao &lt;em&gt;clock&lt;/em&gt;. Para implement√°-lo dessa maneira, utiliza-se o &lt;code&gt;process&lt;/code&gt;. Para detalhes sobre o uso correto do &lt;code&gt;process&lt;/code&gt;, veja &lt;a href="https://balbertini.github.io/vhdl_sequential-pt_BR.html"&gt;o artigo sobre circuitos s√≠ncronos&lt;/a&gt;. De fato, voc√™ n√£o precisa usar &lt;code&gt;process&lt;/code&gt; para mais nada em VHDL, exceto para a parte sequencial das m√°quinas de estado finitas. A parte combinat√≥ria √© o que diferencia os estilos de codifica√ß√£o em VHDL, e neste artigo veremos duas formas, atrav√©s de exemplos, portanto n√£o deixe de l√™-los e entend√™-los.&lt;/p&gt;
&lt;h3&gt;Exemplo 1 (Moore)&lt;/h3&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/fsmexemplo1.png' width="15%" align="right" style="padding-left:5%" /&gt;
A m√°quina que iremos implementar como exemplo √© a m√°quina de Moore da figura ao lado. Cont√©m apenas dois estados e todas as quatro transi√ß√µes poss√≠veis totalmente especificadas. Comecemos pela declara√ß√£o de uso das bibliotecas e pela entidade:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;library&lt;/span&gt; &lt;span class="nn"&gt;ieee&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;use&lt;/span&gt; &lt;span class="nn"&gt;ieee.numeric_bit.rising_edge&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;fsm&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;port&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;saida&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;reset_n&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;
  &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="nc"&gt;fsm&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;

&lt;p&gt;Na descri√ß√£o da arquitetura, o que teremos de novidade √© a utiliza√ß√£o de um tipo composto definido pelo usu√°rio. O tipo composto √© uma enumera√ß√£o e representa o conjunto S (todos os estados poss√≠veis). Ap√≥s declarado o tipo composto, √© poss√≠vel declarar sinais e vari√°veis deste tipo, ent√£o usaremos o tipo declarado para declarar a vari√°vel de estado, ou seja, o elemento de mem√≥ria que armazenar√° o estado.&lt;/p&gt;
&lt;h4&gt;Exemplo 1 (Moore) - Estilo tradicional&lt;/h4&gt;
&lt;p&gt;Neste primeiro estilo de descri√ß√£o, a arquitetura √© descrita usando exatamente o modelo tradicional de m√°quina de estados, ou seja, o elemento de mem√≥ria √© sequencial (dentro do &lt;code&gt;process&lt;/code&gt;) e as fun√ß√µes combinat√≥rias (fora do &lt;code&gt;process&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/fsmvhdl01.png' width="50%" align="right" style="padding-left:0%" /&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;proccomb&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="nc"&gt;fsm&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;type&lt;/span&gt; &lt;span class="n"&gt;estado_t&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;PE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;EA&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;estado_t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
  &lt;span class="nc"&gt;sincrono&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;reset_n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;begin&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;reset_n&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
      &lt;span class="n"&gt;EA&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;elsif&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rising_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
      &lt;span class="n"&gt;EA&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;PE&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt; &lt;span class="nc"&gt;sincrono&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;PE&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;
    &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;EA&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt;
    &lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;EA&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt;
    &lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;EA&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt;
    &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;EA&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt;
    &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;saida&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;
    &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;EA&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt;
    &lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;EA&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt;
    &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;proccomb&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Note que h√° somente um processo. O processo faz o &lt;em&gt;reset&lt;/em&gt; ass√≠ncrono da m√°quina de estados, colocando-a no estado A (veja a seta de in√≠cio chegando no estado A do diagrama de transi√ß√£o de estados). Caso o &lt;em&gt;reset&lt;/em&gt; n√£o esteja ativo, o processo faz uma √∫nica tarefa que √© copiar o sinal PE (de Pr√≥ximo Estado) para o sinal EA (de Estado Atual) na borda de subida do &lt;em&gt;clock&lt;/em&gt;. Neste contexto, apenas o sinal EA representa um elemento combinat√≥rio pois fora destas duas condi√ß√µes, o sinal EA √© mantido inalterado. O comportamento √© exatamente o de um &lt;em&gt;flip-flop&lt;/em&gt; tipo D e, de fato, podemos ver que o circuito gerado cont√©m exatamente um &lt;em&gt;flip-flop&lt;/em&gt;, pois temos somente dois estados poss√≠veis. Caso o tipo composto &lt;code&gt;estado_t&lt;/code&gt; possu√≠sse mais de dois estados, o n√∫mero de &lt;em&gt;flip-flops&lt;/em&gt; seria maior para acomodar o maior n√∫mero de estados.&lt;/p&gt;
&lt;p&gt;Fora do processo, temos duas declara√ß√µes concorrentes ao &lt;code&gt;process&lt;/code&gt;, que representam as duas fun√ß√µes combinat√≥rias. A primeira calcula o pr√≥ximo estado (&lt;code&gt;PE&amp;lt;=...&lt;/code&gt;) e a segunda calcula a sa√≠da (&lt;code&gt;saida&amp;lt;=...&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Este estilo tem a vantagem de ser muito pr√≥ximo do modelo tradicional de m√°quinas de estado. O processo s√≠ncrono √© muito simples (ser√° similar independentemente da m√°quina) e com pouco espa√ßo para erros. A desvantagem √© que este estilo se torna cr√≠ptico rapidamente, pois a descri√ß√£o combinat√≥ria das fun√ß√µes de transi√ß√£o e de pr√≥ximo estado crescer√£o exponencialmente em complexidade e tamanho junto com a complexidade da m√°quina, tornando-se ileg√≠veis rapidamente.&lt;/p&gt;
&lt;p&gt;Use esse estilo nas suas primeiras m√°quinas de estado, para garantir que voc√™ n√£o ter√° problemas de sincronismo, ou se a m√°quina for muito simples ou com poucos estados.&lt;/p&gt;
&lt;h4&gt;Exemplo 1 (Moore) - Estilo com dois &lt;code&gt;process&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;No segundo estilo, levamos a descri√ß√£o combinat√≥ria para dentro de um &lt;code&gt;process&lt;/code&gt; novo, mantendo o &lt;code&gt;process&lt;/code&gt; sequencial que faz o papel de elemento de mem√≥ria inalterado. Este estilo exige um cuidado muito grande pois estamos descrevendo um elemento combinat√≥rio dentro de uma primitiva de VHDL que indica para o sintetizador que estamos descrevendo algo sequencial. Temos que ser claros com a descri√ß√£o para que o sintetizador entenda que a vari√°vel de estados √© o sinal EA somente, e os outros sinais (neste caso o PE e a &lt;code&gt;saida&lt;/code&gt;), s√£o combinat√≥rios.&lt;/p&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/fsmvhdl02.png' width="50%" align="right" style="padding-left:0%" /&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;doisproc&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="nc"&gt;fsm&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;type&lt;/span&gt; &lt;span class="n"&gt;estado_t&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;PE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;EA&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;estado_t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;

  &lt;span class="nc"&gt;sincrono&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;reset_n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;PE&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;begin&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;reset_n&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
      &lt;span class="n"&gt;EA&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;elsif&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rising_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
      &lt;span class="n"&gt;EA&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;PE&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt; &lt;span class="nc"&gt;sincrono&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="nc"&gt;combinatorio&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;EA&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;begin&lt;/span&gt;
    &lt;span class="n"&gt;saida&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;EA&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
      &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;
        &lt;span class="n"&gt;saida&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
          &lt;span class="n"&gt;PE&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;
          &lt;span class="n"&gt;PE&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;
        &lt;span class="n"&gt;saida&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
          &lt;span class="n"&gt;PE&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;
          &lt;span class="n"&gt;PE&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="k"&gt;others&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;
        &lt;span class="n"&gt;saida&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;PE&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;case&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt; &lt;span class="nc"&gt;combinatorio&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;doisproc&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;A vantagem desta abordagem √© que temos acesso a estruturas sequenciais, como o &lt;code&gt;case&lt;/code&gt; usado como decisor no processo combinat√≥rio, que facilitam a descri√ß√£o comportamental de m√°quinas de estado. A desvantagem √© que um pequeno deslize pode levar o sintetizador a registrar ou inferir &lt;em&gt;latches&lt;/em&gt; para os sinais combinat√≥rios, comprometendo a sequencialidade da m√°quina.&lt;/p&gt;
&lt;p&gt;Note que o sinal PE foi inclu√≠do na lista de sensibilidade do processo sequencial, o que foi omitido no estilo anterior. A presen√ßa na lista de sensibilidade indica que PE pode mudar devido a fatores externos ao processo sequencial, e que o processo deve ser reavaliado se isto acontecer (mesmo que o resultado seja o mesmo pois n√£o h√° borda nem &lt;em&gt;reset&lt;/em&gt;). J√° o processo combinat√≥rio depende de EA (obrigat√≥rio), fechando a cadeia de depend√™ncia entre os sinais dos processos (um ativa o outro). Esta liga√ß√£o amplia as possibilidades de otimiza√ß√£o do sintetizador pois ele entende que os dois processos s√£o partes de um circuito √∫nico e os algoritmos de s√≠ntese foram preparados para otimizar esta situa√ß√£o (√© um pouco mais complexo que isso, mas basta saber que √© melhor assim). Note que o circuito gerado cont√©m um multiplexador no lugar das portas l√≥gicas.&lt;/p&gt;
&lt;p&gt;Este exemplo √© simples e h√° pouca diferen√ßa entre em manter o circuito combinat√≥rio isolado do sequencial (primeiro estilo), ou descrev√™-los em conjunto usando dois processos interligados (segundo estilo). Em circuitos complexos as otimiza√ß√µes podem ser bem diferentes, quase sempre com vantagem para o estilo de descri√ß√£o com dois processos.&lt;/p&gt;
&lt;p&gt;Outro ponto importante √© a aus√™ncia de sinais temporais no processo combinat√≥rio &lt;strong&gt;e a completude de todas as atribui√ß√µes&lt;/strong&gt;. Se esquecermos de uma atribui√ß√£o para PE em qualquer um dos casos poss√≠veis (incluindo a cl√°usula &lt;code&gt;when others&lt;/code&gt;), a atribui√ß√£o estar√° incompleta e o processo pode se tornar sequencial (e nesse caso ass√≠ncrono ainda por cima), fazendo com que a descri√ß√£o n√£o se comporte como o esperado.&lt;/p&gt;
&lt;p&gt;Aconselha-se a utiliza√ß√£o deste tipo de descri√ß√£o quando voc√™ estiver habituado a descrever m√°quinas de estados em VHDL e confort√°vel em encontrar problemas de sincronismo.&lt;/p&gt;
&lt;p&gt;Se voc√™ tem uma bagagem como programador de software, √© natural optar por este estilo pois √© muito parecido com os processos em software, mas evite-o at√© estar confort√°vel pois voc√™ n√£o est√° programando e sim descrevendo um hardware. A maioria dos problemas dos alunos iniciantes em pr√°ticas de sistemas digitais adv√©m da descri√ß√£o incorreta deste estilo de m√°quinas de estado, principalmente ligadas a infer√™ncia de &lt;em&gt;latches&lt;/em&gt; devido a atribui√ß√£o incompleta.&lt;/p&gt;
&lt;h3&gt;Outros estilos&lt;/h3&gt;
&lt;p&gt;Mas ent√£o por que n√£o usamos um processo s√≥ para tudo? Vamos ver:
&lt;img src='https://balbertini.github.io/images/sd/fsmvhdl03.png' width="50%" align="right" style="padding-left:0%" /&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;umproc&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="nc"&gt;fsm&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;type&lt;/span&gt; &lt;span class="n"&gt;estado_t&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;EA&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;estado_t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
  &lt;span class="nc"&gt;sincrono&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;reset_n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;begin&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;reset_n&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
      &lt;span class="n"&gt;saida&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="n"&gt;EA&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;elsif&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rising_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
      &lt;span class="k"&gt;case&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;EA&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
        &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;
          &lt;span class="n"&gt;saida&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
          &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
            &lt;span class="n"&gt;EA&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
          &lt;span class="k"&gt;else&lt;/span&gt;
            &lt;span class="n"&gt;EA&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
          &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;
          &lt;span class="n"&gt;saida&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
          &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
            &lt;span class="n"&gt;EA&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
          &lt;span class="k"&gt;else&lt;/span&gt;
            &lt;span class="n"&gt;EA&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
          &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="k"&gt;others&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;
          &lt;span class="n"&gt;saida&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
          &lt;span class="n"&gt;EA&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;case&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt; &lt;span class="nc"&gt;sincrono&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;umproc&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;De fato isso √© poss√≠vel, mas o processo ser√° considerado sequencial pelo sintetizador pois cont√©m uma sensibilidade √† uma borda (no &lt;code&gt;rising_edge&lt;/code&gt;). Como processo sequencial, seus sinais ser√£o registrados, o que √© desej√°vel para o sinal EA pois ele representa a pr√≥pria vari√°vel de estado da m√°quina. Por√©m, pode n√£o ser desej√°vel tampouco aceit√°vel para os demais sinais. Neste caso, a sa√≠da foi o √∫nico sinal que sobrou pois o PE p√¥de ser eliminado, dado que n√£o precisamos mais calcular a fun√ß√£o de pr√≥ximo estado separadamente.&lt;/p&gt;
&lt;p&gt;Observe que o circuito gerado possui a sa√≠da registrada (inferida pelo sintetizador). Isto n√£o √© um problema se voc√™ puder conviver com a sa√≠da sempre defasada de um ciclo de &lt;em&gt;clock&lt;/em&gt;, mas est√° errado conceitualmente pois a m√°quina de estados se comportar√° em fase com o &lt;em&gt;clock&lt;/em&gt; para as transi√ß√µes e defasada de um ciclo para os demais sinais. Esta caracter√≠stica costuma confundir muito os iniciantes e dificulta consideravelmente a depura√ß√£o. Por estes motivos, se voc√™ √© meu aluno, &lt;strong&gt;n√£o use este estilo&lt;/strong&gt; em nenhum momento durante a gradua√ß√£o (p√≥s por favor consulte antes).&lt;/p&gt;
&lt;h3&gt;Exemplo 2 (Mealy)&lt;/h3&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/fsmexemplo2.png' width="15%" align="right" style="padding-left:5%" /&gt;
Esta √© a mesma m√°quina que a do Exemplo 1, por√©m no modelo de Mealy, onde a sa√≠da depende tamb√©m da entrada.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;library&lt;/span&gt; &lt;span class="nn"&gt;ieee&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;use&lt;/span&gt; &lt;span class="nn"&gt;ieee.numeric_bit.rising_edge&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;fsm&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;port&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;saida&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;reset_n&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;
  &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="nc"&gt;fsm&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;

&lt;h4&gt;Exemplo 2 (Mealy) - Estilo tradicional&lt;/h4&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/fsmvhdl04.png' width="50%" align="right" style="padding-left:0%" /&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;proccombmealy&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="nc"&gt;fsm&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;type&lt;/span&gt; &lt;span class="n"&gt;estado_t&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;PE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;EA&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;estado_t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;

  &lt;span class="nc"&gt;sincrono&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;reset_n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;begin&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;reset_n&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
      &lt;span class="n"&gt;EA&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;elsif&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rising_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
      &lt;span class="n"&gt;EA&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;PE&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt; &lt;span class="nc"&gt;sincrono&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="n"&gt;PE&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;
    &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;EA&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt;
    &lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;EA&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt;
    &lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;EA&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt;
    &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;EA&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt;
    &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;saida&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;
    &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;EA&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt;
    &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;EA&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt;
    &lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;EA&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt;
    &lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;EA&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt;
    &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;proccombmealy&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Note que o circuito gerado √© um pouco maior devido a arquitetura para o qual foi sintetizado (FPGA).&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h4&gt;Exemplo 2 (Mealy) - Estilo com dois &lt;code&gt;process&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/fsmvhdl05.png' width="50%" align="right" style="padding-left:0%" /&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;doisprocmealy&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="nc"&gt;fsm&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;type&lt;/span&gt; &lt;span class="n"&gt;estado_t&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;PE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;EA&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;estado_t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;

  &lt;span class="nc"&gt;sincrono&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;reset_n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;PE&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;begin&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;reset_n&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
      &lt;span class="n"&gt;EA&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;elsif&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rising_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
      &lt;span class="n"&gt;EA&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;PE&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt; &lt;span class="nc"&gt;sincrono&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="nc"&gt;combinatorio&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;EA&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;begin&lt;/span&gt;
    &lt;span class="n"&gt;saida&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;EA&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
      &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
          &lt;span class="n"&gt;saida&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
          &lt;span class="n"&gt;PE&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;
          &lt;span class="n"&gt;saida&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
          &lt;span class="n"&gt;PE&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
          &lt;span class="n"&gt;saida&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
          &lt;span class="n"&gt;PE&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;
          &lt;span class="n"&gt;saida&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
          &lt;span class="n"&gt;PE&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="k"&gt;others&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;
        &lt;span class="n"&gt;saida&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;PE&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;case&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt; &lt;span class="nc"&gt;combinatorio&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;doisprocmealy&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Observe que n√£o h√° diferen√ßa entre o circuito gerado para esta m√°quina e para a m√°quina Moore com dois processos.
&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;&lt;/p&gt;
&lt;!-- ### Dicas gerais

Use nomes significativos. Para estados, tente --&gt;</content><category term="vhdl"></category><category term="vhdl"></category><category term="state machine"></category></entry><entry><title>Componentes em VHDL</title><link href="https://balbertini.github.io/vhdl_component-pt_BR.html" rel="alternate"></link><published>2019-03-14T15:40:49-03:00</published><updated>2020-09-18T19:49:39-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2019-03-14:/vhdl_component-pt_BR.html</id><summary type="html">&lt;p&gt;Usando componentes em VHDL.&lt;/p&gt;</summary><content type="html">&lt;p&gt;A linguagem VHDL √© inerentemente hier√°rquica, sendo muito f√°cil usar um componente de um projeto em outro. Esta caracter√≠stica permite algumas vantagens como: reutiliza√ß√£o de descri√ß√µes, divis√£o do projeto e partes menores (permite que projetistas trabalhem em paralelo e aumenta a legibilidade) e o teste separado (de um m√≥dulo e da integra√ß√£o).&lt;/p&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/vhdl/74181simbolo.png' width="30%" align="right" style="padding-left:5%" /&gt;
Usar componentes √© muito simples em VHDL pois toda a entidade (&lt;code&gt;entity&lt;/code&gt;) define um componente. No entanto, precisamos declarar e instanciar o componente, o que veremos neste post.&lt;/p&gt;
&lt;p&gt;Considere a figura ao lado, que representa uma ULA (Unidade L√≥gica e Aritm√©tica) modelo 74181 (fonte: &lt;em&gt;datasheet&lt;/em&gt; da Texas). Os n√∫meros nos pinos representam o n√∫mero do pino f√≠sico (e.g. a entrada &lt;code&gt;M&lt;/code&gt; est√° no pino 8). Como convencionado, entradas de dados est√£o acima, sa√≠das abaixo, entradas de controle a esquerda e sa√≠da de controle a direita. As entradas de dados s√£o &lt;code&gt;A&lt;/code&gt; e &lt;code&gt;B&lt;/code&gt; de 4 bits e a sa√≠da de dados &lt;code&gt;F&lt;/code&gt; tamb√©m √© de 4 bits. O &lt;em&gt;carry_in&lt;/em&gt; (&lt;span class="math"&gt;\(\overline{C_n}\)&lt;/span&gt;) e o &lt;em&gt;carry_out&lt;/em&gt; (&lt;span class="math"&gt;\(\overline{C_{n+4}}\)&lt;/span&gt;) s√£o ambos ambos ativos baixo. A entrada &lt;code&gt;M&lt;/code&gt; define se a opera√ß√£o √© l√≥gica ou aritm√©tica e a entrada &lt;code&gt;S&lt;/code&gt; (4 bits) define qual opera√ß√£o a ULA realizar√°. H√° ainda a sa√≠da &lt;span class="math"&gt;\(A=B\)&lt;/span&gt; e as sa√≠das para cascateamento &lt;em&gt;generate&lt;/em&gt; (&lt;span class="math"&gt;\(\overline{G}\)&lt;/span&gt;) e &lt;em&gt;propagate&lt;/em&gt; (&lt;span class="math"&gt;\(\overline{P}\)&lt;/span&gt;), ambas ativas baixo.&lt;/p&gt;
&lt;p&gt;A entidade para este componente √© algo assim:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;alu181&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;cn&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;cn4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;aeqb&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;gn&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pn&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;
  &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;entity&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Para usar essa ULA como componente, h√° duas fases distintas: a declara√ß√£o e a inst√¢ncia.&lt;/p&gt;
&lt;h2&gt;Declarando um componente&lt;/h2&gt;
&lt;p&gt;A declara√ß√£o tem o seguinte formato:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;component&lt;/span&gt; &lt;span class="nc"&gt;nome_da_entidade&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
  &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;generic&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;elementos_genericos&lt;/span&gt; &lt;span class="p"&gt;)]&lt;/span&gt;
  &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;portas&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;component&lt;/span&gt; &lt;span class="err"&gt;[&lt;/span&gt;&lt;span class="nc"&gt;nome_da_entidade&lt;/span&gt;&lt;span class="err"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;A cl√°usula &lt;code&gt;is&lt;/code&gt; √© opcional, assim como o &lt;code&gt;nome_da_entidade&lt;/code&gt; no final da declara√ß√£o. O &lt;code&gt;generic&lt;/code&gt; serve para declarar componentes parametriz√°veis, que &lt;a href="https://balbertini.github.io/vhdl_generic-pt_BR.html"&gt;est√° coberto em outro post&lt;/a&gt;. J√° o &lt;code&gt;port&lt;/code&gt;, apesar de opcional, √© o que declara as portas do componente dispon√≠veis para a entidade que o utilizar√° como m√≥dulo. De modo geral, √© esperado que as cl√°usulas &lt;code&gt;generic&lt;/code&gt; e &lt;code&gt;port&lt;/code&gt; &lt;strong&gt;sejam id√™nticas&lt;/strong&gt; √† declara√ß√£o da entidade, ent√£o a ULA 181 do nosso exemplo deve ser declarada como componente assim:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;component&lt;/span&gt; &lt;span class="nc"&gt;alu181&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;cn&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;cn4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;aeqb&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;gn&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pn&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;
  &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;component&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;h2&gt;Instanciando um componente&lt;/h2&gt;
&lt;p&gt;Depois de declarado, ainda precisamos instanciar o componente.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;nome_da_instancia&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;component&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;nome_do_componente&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;nome_da_entidade&lt;/span&gt; &lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="n"&gt;nome_da_arquitetura&lt;/span&gt;&lt;span class="p"&gt;)]]&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;
&lt;span class="k"&gt;configuration&lt;/span&gt; &lt;span class="n"&gt;nome_da_configura√ß√£o&lt;/span&gt;
    &lt;span class="k"&gt;generic&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lista_de_associacao_de_elementos_genericos&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lista_de_associacao_de_portas&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Note que h√° tr√™s modos distintos de instanciar um componente, que s√£o mutuamente exclusivos. O primeiro usamos o nome do componente (opcionalmente antecedido por &lt;code&gt;component&lt;/code&gt;), no segundo usamos o nome da entidade e no terceiro usamos o nome da configura√ß√£o (a configura√ß√£o √© um elemento prim√°rio do VHDL).&lt;/p&gt;
&lt;p&gt;Quando usamos a instancia√ß√£o pelo &lt;code&gt;component&lt;/code&gt;, instanciaremos exatamente o componente que declaramos. A escolha de qual arquitetura depende do sintetizador (normalmente √© a √∫ltima arquitetura descrita no arquivo).&lt;/p&gt;
&lt;p&gt;Na instancia√ß√£o pela entidade, podemos escolher qual arquitetura usamos. A sintaxe comum √© &lt;code&gt;work.nome_da_entidade(nome_da_arquitetura)&lt;/code&gt;, mas pode-se omitir o &lt;code&gt;nome_da_arquitetura&lt;/code&gt; (deixando a cargo do sintetizador escolher). A palavra reservada &lt;code&gt;work&lt;/code&gt; refere-se √† biblioteca padr√£o, o local onde ficam todos os componentes do seu projeto que n√£o pertencem a uma biblioteca (n√£o est√£o em um &lt;code&gt;package&lt;/code&gt;). Neste caso de instancia√ß√£o podemos omitir a declara√ß√£o do componente se o nome da entidade for √∫nico. Caso seja necess√°rio, voc√™ pode incluir a biblioteca &lt;code&gt;work&lt;/code&gt; no pre√¢mbulo o arquivo VHDL usando &lt;code&gt;use work.all;&lt;/code&gt; ou selecionando explicitamente o componente que quer usar: &lt;code&gt;use work.nome_da_entidade;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;A terceira maneira √© declarar explicitamente uma configura√ß√£o (&lt;code&gt;configuration&lt;/code&gt;), mas n√£o cobrirei neste post.&lt;/p&gt;
&lt;p&gt;Na pr√°tica, acabamos quase sempre por usar o primeiro m√©todo por ser mais simples e compat√≠vel com todas as vers√µes de VHDL:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;nome_da_instancia&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;nome_do_componente&lt;/span&gt;
    &lt;span class="k"&gt;generic&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lista_de_associacao_de_elementos_genericos&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lista_de_associacao_de_portas&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Agora observe as cl√°usulas &lt;code&gt;map&lt;/code&gt;. Elas mapeiam os sinais do seu componente para a inst√¢ncia e ambos seguem o mesmo padr√£o usado para declara√ß√£o de portas. O &lt;code&gt;generic map&lt;/code&gt; &lt;a href="https://balbertini.github.io/vhdl_generic-pt_BR.html"&gt;est√° coberto em outro post&lt;/a&gt;, ent√£o vamos focar na inst√¢ncia simples da nossa ULA.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;minha_alu&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;alu181&lt;/span&gt; &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Op&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;co4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;aeqb0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;open&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;open&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;No trecho acima, declaramos uma inst√¢ncia do componente &lt;code&gt;alu181&lt;/code&gt; chamada &lt;code&gt;minha_alu&lt;/code&gt;. Note que a ordem dos sinais √© a mesma usada na declara√ß√£o do componente. Isto significa que o sinal &lt;code&gt;A&lt;/code&gt;, que deve existir na arquitetura que est√° usando este componente, ser√° ligado ao sinal &lt;code&gt;a&lt;/code&gt; desta inst√¢ncia de ULA. Chamamos este tipo de associa√ß√£o de &lt;strong&gt;associa√ß√£o posicional&lt;/strong&gt; pois a ordem do sinal importa. Repare tamb√©m que n√£o vamos usar o _carry_in__ (&lt;code&gt;cn&lt;/code&gt;), portanto fixamos esta entrada em &lt;code&gt;0&lt;/code&gt;. Tamb√©m n√£o usaremos as sa√≠das &lt;code&gt;gn&lt;/code&gt; e &lt;code&gt;pn&lt;/code&gt;, ent√£o n√£o conectaremos a lugar algum, o que pode ser feito em VHDL usando a palavra reservada &lt;code&gt;open&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Uma outra forma de fazer a associa√ß√£o √© usando &lt;strong&gt;associa√ß√£o nomeada&lt;/strong&gt;. Neste tipo de associa√ß√£o, dizemos explicitamente qual sinal √© ligado em qual porta da inst√¢ncia do componente, ent√£o a ordem em que fazemos o &lt;code&gt;port map&lt;/code&gt; n√£o importa:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;minha_alu&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;alu181&lt;/span&gt;
  &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
             &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;Op&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
             &lt;span class="n"&gt;gn&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="k"&gt;open&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pn&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="k"&gt;open&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cn&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cn4&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;co4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
             &lt;span class="n"&gt;aeqb&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;aeqb0&lt;/span&gt;
           &lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;A sintaxe √© sempre &lt;code&gt;sinal_do_componente =&amp;gt; sinal_da_arquitetura_pai&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;Exemplo&lt;/h3&gt;
&lt;p&gt;Neste exemplo, usamos duas ULAs 181 para formar uma ULA de 8 bits, sem &lt;em&gt;carry_in&lt;/em&gt;, &lt;em&gt;carry_out&lt;/em&gt; e sem sa√≠das de cascateamento, mas mantendo a sa√≠da de igualdade. Usamos os dois tipos de associa√ß√£o para exemplificar. Lembre-se que as portas de uma entidade s√£o sinais v√°lidos dentro da sua arquitetura.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;ula2x&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;Op&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;aeqb&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;
  &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;entity&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;arch&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="nc"&gt;ula2x&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;component&lt;/span&gt; &lt;span class="nc"&gt;alu181&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
    &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
      &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;cn&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;cn4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;aeqb&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;gn&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pn&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;
    &lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;component&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;co4&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;aeqb_it&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;

  &lt;span class="n"&gt;alu1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;alu181&lt;/span&gt; &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;Op&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;co4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;aeqb_it&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="k"&gt;open&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;open&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="n"&gt;alu0&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;alu181&lt;/span&gt; &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
  &lt;span class="n"&gt;minha_alu&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;alu181&lt;/span&gt;
    &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;Op&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;gn&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="k"&gt;open&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pn&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="k"&gt;open&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cn&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cn4&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;co4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;aeqb&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;aeqb_it&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="n"&gt;aeqb&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;aeqb_it&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;aeqb_it&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;architecture&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;h2&gt;Qual associa√ß√£o utilizar?&lt;/h2&gt;
&lt;p&gt;A associa√ß√£o nomeada torna o c√≥digo mais robusto pois se algo mudar de lugar na entidade, os sinais continuam a mapear a inst√¢ncia corretamente. Tamb√©m facilita a compreens√£o da liga√ß√£o pois, se usar nomes significativos para seus sinais, o projetista n√£o precisar√° consultar a declara√ß√£o do componente a todo momento para entender a liga√ß√£o na inst√¢ncia.  &lt;/p&gt;
&lt;p&gt;J√° a associa√ß√£o posicional √© mais enxuta e aumenta a legibilidade do c√≥digo. No entanto para entender a liga√ß√£o do seu componente voc√™ precisa consultar a declara√ß√£o.&lt;/p&gt;
&lt;p&gt;Na pr√°tica, sugiro usar declara√ß√£o posicional sempre que poss√≠vel, sempre acompanhada de coment√°rios explicando sua inten√ß√£o. No entanto, se o seu componente tem portas suficientes para que o &lt;code&gt;port map&lt;/code&gt; ultrapasse uma ou duas linhas, considere fortemente usar a associa√ß√£o nomeada para melhorar o entendimento.&lt;/p&gt;
&lt;h2&gt;Uso nas disciplinas de gradua√ß√£o&lt;/h2&gt;
&lt;p&gt;Voc√™ est√° livre para usar qualquer um dos dois formatos que desejar. No entanto, o juiz usado nas disciplinas de gradua√ß√£o usa a associa√ß√£o posicional, o que significa que se voc√™ montar uma entidade diferente do enunciado, sua descri√ß√£o n√£o ser√° avaliada. Siga estritamente o enunciado, especialmente em rela√ß√£o √† entidade.&lt;/p&gt;
&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width &lt; 768) ? "left" : align;
        indent = (screen.width &lt; 768) ? "0em" : indent;
        linebreak = (screen.width &lt; 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="vhdl"></category><category term="vhdl"></category><category term="basic"></category></entry><entry><title>M√≥dulos gen√©ricos parametriz√°veis em VHDL</title><link href="https://balbertini.github.io/vhdl_generic-pt_BR.html" rel="alternate"></link><published>2019-03-12T14:58:40-03:00</published><updated>2019-09-09T10:16:11-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2019-03-12:/vhdl_generic-pt_BR.html</id><summary type="html">&lt;p&gt;Usando o generic em VHDL.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Uma das caracter√≠sticas interessantes de HDLs (incluindo VHDL), √© a capacidade de reutiliza√ß√£o de m√≥dulos. Podemos aumentar ainda mais a reutiliza√ß√£o descrevendo m√≥dulos parametriz√°veis. Este artigo trata de como descrever m√≥dulos gen√©ricos parametriz√°veis em VHDL.&lt;/p&gt;
&lt;h2&gt;Declarando um par√¢metro genericamente&lt;/h2&gt;
&lt;p&gt;Em muitos casos, a descri√ß√£o de um m√≥dulo em VHDL pode n√£o ser reaproveit√°vel porque precisamos de um m√≥dulo ligeiramente diferente. Um exemplo: se descrevermos um registrador de 8 bits, poderemos usar este registrador somente em projetos que utilizam registradores de exatamente 8 bits. Contudo, quando o hardware √© regular, ou seja, seu funcionamento √© id√™ntico independentemente da caracter√≠stica vari√°vel, √© poss√≠vel descrev√™-lo de forma a definir a caracter√≠stica vari√°vel no momento da inst√¢ncia e n√£o da descri√ß√£o. Dessa forma, descreve-se o m√≥dulo genericamente e somente no momento de utiliz√°-lo parametrizamos as caracter√≠sticas vari√°veis. No exemplo do registrador, podemos descrev√™-lo genericamente de forma que o seu tamanho seja um par√¢metro.&lt;/p&gt;
&lt;p&gt;A palavra reservada que possibilita isso √© a &lt;code&gt;generic&lt;/code&gt;. Na descri√ß√£o da entidade do m√≥dulo, podemos incluir esta palavra, como a seguir:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;nome_da_entidade&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
   &lt;span class="k"&gt;generic&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lista_de_elementos_genericos&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
   &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lista_de_portas&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="nc"&gt;nome_da_entidade&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;A &lt;code&gt;lista_de_elementos_genericos&lt;/code&gt; √© uma lista de todas as caracter√≠sticas parametriz√°veis, no formato: &lt;code&gt;nome: tipo := valor_padrao&lt;/code&gt;, separadas por &lt;code&gt;;&lt;/code&gt;. O &lt;code&gt;nome&lt;/code&gt; pode ser o que voc√™ desejar, desde que seja um nome v√°lido em VHDL. O tipo define qual tipo de dados ser√° utilizado para aquele par√¢metro e pode ser &lt;a href="https://balbertini.github.io/vhdl_datatypes-pt_BR.html"&gt;qualquer tipo suportado&lt;/a&gt;. O &lt;code&gt;valor_padrao&lt;/code&gt; √© opcional e pode ser omitido. Quando omitido, termina-se a declara√ß√£o ap√≥s a declara√ß√£o do tipo (exclui-se tamb√©m o &lt;code&gt;:=&lt;/code&gt;). No caso da omiss√£o do valor padr√£o, a declara√ß√£o do valor no momento da instancia√ß√£o √© obrigat√≥ria. Caso o valor padr√£o esteja presente, ele ser√° usado somente se a inst√¢ncia n√£o especificar nenhum valor, caso contr√°rio o valor da inst√¢ncia sobrep√µe o valor padr√£o. Como boa pr√°tica, sempre defina o valor padr√£o. O &lt;code&gt;valor_padrao&lt;/code&gt; deve ser obrigatoriamente uma constante do mesmo &lt;code&gt;tipo&lt;/code&gt; que o par√¢metro correspondente.&lt;/p&gt;
&lt;p&gt;Depois de especificados, os par√¢metros da &lt;code&gt;lista_de_elementos_genericos&lt;/code&gt; tornam-se constantes dispon√≠veis em todo o restante do projeto, incluindo a declara√ß√£o de portas da entidade e toda a arquitetura. Como est√£o dispon√≠veis e podem ser usados no lugar de qualquer constante, √© poss√≠vel declarar portas, sinais e qualquer outra estrutura de VHDL usando o par√¢metro no lugar de um valor fixo.&lt;/p&gt;
&lt;h3&gt;Inst√¢ncia&lt;/h3&gt;
&lt;p&gt;No momento da inst√¢ncia do componente, podemos definir os par√¢metros que desejarmos. Lembre-se que, caso a descri√ß√£o n√£o estabele√ßa um valor padr√£o para um determinado par√¢metro, a defini√ß√£o na instancia√ß√£o √© obrigat√≥ria. A sintaxe da inst√¢ncia √©:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;nome_instancia&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;nome_componente&lt;/span&gt;
    &lt;span class="k"&gt;generic&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lista_de_associacao_de_elementos_genericos&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt;    &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lista_de_associacao_de_portas&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Se o componente n√£o possui nenhum par√¢metro (aus√™ncia de &lt;code&gt;generic&lt;/code&gt;) ou n√£o deseja-se especificar nenhum (todos os valores padr√µes ser√£o utilizados), toda a linha do &lt;code&gt;generic map&lt;/code&gt; pode ser omitida. A &lt;code&gt;lista_de_associacao_de_elementos_genericos&lt;/code&gt; segue o mesmo padr√£o de associa√ß√£o usado para as portas.&lt;/p&gt;
&lt;h3&gt;S√≠ntese&lt;/h3&gt;
&lt;p&gt;O &lt;code&gt;generic&lt;/code&gt; n√£o √© uma estrutura sintetiz√°vel. No momento da s√≠ntese, todos os valores gen√©ricos parametriz√°veis devem ser resolv√≠veis, ou seja, o valor do par√¢metro √© fixo na inst√¢ncia. N√£o √© poss√≠vel mudar este valor dinamicamente durante ou ap√≥s a s√≠ntese, e muito menos mud√°-lo no hardware pronto. √â poss√≠vel herdar par√¢metros, desde que a √°rvore de heran√ßa seja resolv√≠vel para um valor constante no momento da s√≠ntese.&lt;/p&gt;
&lt;p&gt;√â poss√≠vel usar o &lt;code&gt;generic&lt;/code&gt; para parametrizar algo n√£o sintetiz√°vel. Exemplos deste uso incluem vari√°veis condicionais de depura√ß√£o e temporiza√ß√£o.&lt;/p&gt;
&lt;h2&gt;Exemplo&lt;/h2&gt;
&lt;p&gt;Neste exemplo, mostrarei um registrador de deslocamento gen√©rico com entrada paralela e sa√≠da serial, carga paralela s√≠ncrona, &lt;em&gt;reset&lt;/em&gt; ass√≠ncrono e deslocamento para a direita ou para a esquerda. A modelagem contempla temporiza√ß√£o (atraso e &lt;em&gt;setup time&lt;/em&gt;) e depura√ß√£o.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;library&lt;/span&gt; &lt;span class="nn"&gt;ieee&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;use&lt;/span&gt; &lt;span class="nn"&gt;ieee.numeric_bit.rising_edge&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;reg_deslocamento&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;generic&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;tamanho&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;natural&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;tp&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;time&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;80&lt;/span&gt; &lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;time&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;15&lt;/span&gt; &lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;debug&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="n"&gt;false&lt;/span&gt;
  &lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;port&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tamanho&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;saida&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt;  &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tamanho&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;entrada_serial&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;direcao&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;-- 1=direita, 0=esquerda&lt;/span&gt;
    &lt;span class="n"&gt;carrega&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;reset_n&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;
  &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
  &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;tamanho&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
  &lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Este registrador precisa ter tamanho &amp;gt; 1 e foi instanciado com &amp;quot;&lt;/span&gt;
         &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="kt"&gt;integer&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;image&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tamanho&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;.&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;failure&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;reg_deslocamento&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;funcional&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="nc"&gt;reg_deslocamento&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;interno&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tamanho&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;

  &lt;span class="n"&gt;saida&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;interno&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="k"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;reset_n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;begin&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;reset_n&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
      &lt;span class="n"&gt;interno&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;others&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;elsif&lt;/span&gt; &lt;span class="n"&gt;rising_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;carrega&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;stable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
          &lt;span class="n"&gt;interno&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt; &lt;span class="k"&gt;after&lt;/span&gt; &lt;span class="n"&gt;tp&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="k"&gt;else&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;direcao&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
          &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;entrada_serial&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;stable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
            &lt;span class="n"&gt;interno&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;entrada_serial&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;interno&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tamanho&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;after&lt;/span&gt; &lt;span class="n"&gt;tp&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
          &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;
          &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;entrada_serial&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;stable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
            &lt;span class="n"&gt;interno&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;interno&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tamanho&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;entrada_serial&lt;/span&gt; &lt;span class="k"&gt;after&lt;/span&gt; &lt;span class="n"&gt;tp&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
          &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="k"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;begin&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;rising_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;debug&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;reset_n&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;carrega&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
          &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;stable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
          &lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Setup time violado na entrada paralela.&amp;quot;&lt;/span&gt;
          &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;warning&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;elsif&lt;/span&gt; &lt;span class="n"&gt;reset_n&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;carrega&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
          &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;entrada_serial&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;stable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
          &lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Setup time violado na entrada serial.&amp;quot;&lt;/span&gt;
          &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;warning&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;architecture&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Um poss√≠vel &lt;em&gt;testbench&lt;/em&gt; para este registrador pode ser visto abaixo:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;library&lt;/span&gt; &lt;span class="nn"&gt;ieee&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;use&lt;/span&gt; &lt;span class="nn"&gt;ieee.numeric_bit.rising_edge&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;reg_deslocamento_tb&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;reg_deslocamento_tb&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;stim&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="nc"&gt;reg_deslocamento_tb&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;component&lt;/span&gt; &lt;span class="nc"&gt;reg_deslocamento&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
    &lt;span class="k"&gt;generic&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
      &lt;span class="n"&gt;tamanho&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;natural&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="n"&gt;tp&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;time&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;80&lt;/span&gt; &lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;time&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;15&lt;/span&gt; &lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="n"&gt;debug&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="n"&gt;false&lt;/span&gt;
    &lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;port&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
      &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tamanho&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;saida&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt;  &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tamanho&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;entrada_serial&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="n"&gt;direcao&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;-- 1=direita, 0=esquerda&lt;/span&gt;
      &lt;span class="n"&gt;carrega&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="n"&gt;reset_n&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;
    &lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;component&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;saida&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;entrada_serial&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;direcao&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;carrega&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;reset_n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;simula&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;

  &lt;span class="n"&gt;reg&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;reg_deslocamento&lt;/span&gt;
    &lt;span class="k"&gt;generic&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tamanho&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tp&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;40&lt;/span&gt; &lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;debug&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;true&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;saida&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;entrada_serial&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;direcao&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;carrega&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;reset_n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="n"&gt;clock&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;simula&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt; &lt;span class="n"&gt;clock&lt;/span&gt; &lt;span class="k"&gt;after&lt;/span&gt; &lt;span class="mi"&gt;50&lt;/span&gt; &lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="nc"&gt;stim&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt;
  &lt;span class="k"&gt;begin&lt;/span&gt;
    &lt;span class="n"&gt;simula&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;reset_n&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="mi"&gt;200&lt;/span&gt; &lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;reset_n&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;entrada&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;1010&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;carrega&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;until&lt;/span&gt; &lt;span class="n"&gt;rising_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="mi"&gt;95&lt;/span&gt; &lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;entrada&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;1011&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;until&lt;/span&gt; &lt;span class="n"&gt;rising_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;carrega&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="mi"&gt;95&lt;/span&gt; &lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;entrada_serial&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;until&lt;/span&gt; &lt;span class="n"&gt;rising_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;carrega&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;entrada&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;1010&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;until&lt;/span&gt; &lt;span class="n"&gt;rising_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;carrega&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;entrada_serial&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;until&lt;/span&gt; &lt;span class="n"&gt;rising_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;simula&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;wait&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;architecture&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;A execu√ß√£o deste &lt;em&gt;testbench&lt;/em&gt; ir√° imprimir:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;reg_deslocamento.vhd:59:11:@350ns:&lt;span class="o"&gt;(&lt;/span&gt;assertion warning&lt;span class="o"&gt;)&lt;/span&gt;: Setup &lt;span class="nb"&gt;time&lt;/span&gt; violado na entrada paralela.
reg_deslocamento.vhd:63:11:@450ns:&lt;span class="o"&gt;(&lt;/span&gt;assertion warning&lt;span class="o"&gt;)&lt;/span&gt;: Setup &lt;span class="nb"&gt;time&lt;/span&gt; violado na entrada serial.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;No c√≥digo do &lt;em&gt;testbench&lt;/em&gt; h√° tr√™s usos distintos do &lt;code&gt;generic&lt;/code&gt;. Note a inst√¢ncia do registrador usado no &lt;em&gt;testbench&lt;/em&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;reg&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;reg_deslocamento&lt;/span&gt;
  &lt;span class="k"&gt;generic&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tamanho&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tp&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;40&lt;/span&gt; &lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;debug&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;true&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;saida&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;entrada_serial&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;direcao&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;carrega&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;reset_n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;A primeira coisa que podemos notar √© que a atribui√ß√£o dos par√¢metros no &lt;code&gt;generic map&lt;/code&gt; foi feita por nome e n√£o posicionalmente (como feita no &lt;code&gt;port map&lt;/code&gt;). Contudo, podemos usar atribui√ß√£o posicional se desejado. O tamanho foi parametrizado como 4 bits, o tempo de propaga√ß√£o (&lt;code&gt;tp&lt;/code&gt;) como 40ns e foi habilitada a depura√ß√£o. A primeira utiliza√ß√£o do &lt;code&gt;generic&lt;/code&gt; foram estas atribui√ß√µes. J√° a segunda, foi uma atribui√ß√£o impl√≠cita. O &lt;em&gt;setup time&lt;/em&gt; (&lt;code&gt;st&lt;/code&gt;) n√£o foi definido no &lt;code&gt;genric map&lt;/code&gt;, portanto a inst√¢ncia utilizar√° o valor padr√£o, que nesse caso √© 15ns. J√° a terceira diz respeito ao par√¢metro &lt;code&gt;debug&lt;/code&gt;. Note que este par√¢metro, se habilitado, permite a ativa√ß√£o de um &lt;code&gt;process&lt;/code&gt; (o √∫ltimo da descri√ß√£o do registrador) que n√£o √© sintetiz√°vel e serve exclusivamente para emitir mensagens de viola√ß√£o do &lt;em&gt;setup time&lt;/em&gt; durante uma simula√ß√£o.&lt;/p&gt;</content><category term="vhdl"></category><category term="vhdl"></category><category term="basic"></category></entry><entry><title>Algorithmic State Machines</title><link href="https://balbertini.github.io/asm-pt_BR.html" rel="alternate"></link><published>2018-12-17T15:22:53-02:00</published><updated>2021-05-03T08:55:51-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2018-12-17:/asm-pt_BR.html</id><summary type="html">&lt;p&gt;ASM (Algorithmic State Machines)&lt;/p&gt;</summary><content type="html">&lt;p&gt;A m√°quina de estados algor√≠tmica, do ingl√™s &lt;em&gt;Algorithmic State Machine&lt;/em&gt; (ASM), √© uma forma gr√°fica de descri√ß√£o de um circuito s√≠ncrono. Assim como os diagramas de transi√ß√£o de estados, a ASM captura o comportamento do circuito em um n√≠vel abstrato, mas sintetiz√°vel.&lt;/p&gt;
&lt;h2&gt;Elementos gr√°ficos&lt;/h2&gt;
&lt;h3&gt;Estado&lt;/h3&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/asm_estado.png' width="20%" align="right" style="padding-left:5%" /&gt;
Um estado √© representado por uma caixa quadrada com arestas orientadas entrando e saindo do estado. As arestas sempre s√£o duas como na figura. A aresta superior pode vir de um outro elemento ASM anterior a este estado na sequencia imposta pela m√°quina, ou n√£o possuir nenhuma origem, o que implica que este estado √© o inicial da m√°quina (estado ap√≥s o &lt;em&gt;reset&lt;/em&gt;). Lembre-se que, circuitos digitais, uma m√°quina de estado possui um e somente um estado inicial. J√° a aresta inferior liga este estado ao pr√≥ximo elemento na sequencia imposta pela m√°quina e n√£o √© opcional: deve existir e ser conectada a algum outro elemento.  &lt;/p&gt;
&lt;p&gt;O nome do estado e o seu c√≥digo (em bin√°rio) s√£o considerados obrigat√≥rios por alguns autores. No entanto, dependendo do m√©todo de s√≠ntese adotado, a codifica√ß√£o n√£o se faz necess√°ria. Tamb√©m alguns autores circulam o nome do estado, em alguns casos deixando-o  na lateral esquerda da caixa. Em sistemas digitais usamos a nota√ß√£o sobre a caixa (√† esquerda), sem circular o nome do estado, e consideramos a codifica√ß√£o opcional exceto quando solicitado explicitamente.  &lt;/p&gt;
&lt;p&gt;O nome &lt;code&gt;[sa√≠das]&lt;/code&gt; representa exatamente os sinais de sa√≠da deste estado. Por conven√ß√£o, s√≥ √© necess√°rio listar os sinais ativos neste estado, pois considera-se que todas as sa√≠das da m√°quina n√£o listadas em um estado assumem o valor desativado. Lembre-se que o valor ativo de um sinal depende da l√≥gica que est√° utilizando (normalmente o valor ativo √© alto, ou 1). Para evitar confus√£o, liste sempre todos os sinais que assumem o valor 1 pois quando n√£o dizemos nada assume-se implicitamente (conven√ß√£o) que a l√≥gica √© positiva. Sinais n√£o listados que possuam mais de um bit assumem desativado (i.e. zero) para todos os bits.
&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h3&gt;Decisor&lt;/h3&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/asm_decisor.png' width="30%" align="right" style="padding-left:3%" /&gt;
O decisor √© o componente que faz a transi√ß√£o condicional entre os estados. Sem ele, toda transi√ß√£o seria incondicional e n√£o dependeria de entrada alguma. √â representado graficamente por um losango, com uma aresta orientada de entrada e duas de sa√≠da. A aresta de entrada √© proveniente de um elemento sequencialmente anterior da m√°quina de estados e deve obrigatoriamente ter uma origem. As arestas de sa√≠da s√£o condicionais, ou seja, caso a condi√ß√£o do decisor seja verdadeira, a m√°quina segue pelo caminho 1, caso contr√°rio pelo caminho 0. √â importante notar que h√° duas e somente duas arestas de sa√≠da, uma para o caso da condi√ß√£o ser falsa e outra verdadeira. N√£o h√° condi√ß√£o com m√∫ltiplos bits ou m√∫ltiplas sa√≠das e as duas sa√≠das devem ser conectadas em outro elemento ASM.&lt;br&gt;
A condi√ß√£o sempre deve ser uma condi√ß√£o resolv√≠vel em l√≥gica booleana, retornando sempre verdadeiro ou falso (1 ou 0). √â toler√°vel inverter as sa√≠das de lado para facilitar o diagrama, assim como desenhar uma seta saindo na ponta inferior do losango, mas prefira sempre usar o desenho padr√£o como no exemplo ao lado (incluindo os lados de sa√≠da para verdadeiro e falso) para garantir que est√° seguindo as boas pr√°ticas.   &lt;/p&gt;
&lt;p&gt;Este componente √© atemporal, ou seja, n√£o representa tampouco depende do tempo. Isso implica que √© um componente puramente combinat√≥rio e deve estar inserido em um caminho v√°lido entre dois elementos sequenciais, que em ASM s√£o os estados. √â permitido cascatear m√∫ltiplos decisores, mas n√£o deve-se retornar para caminhos atemporais (e.g. um decisor voltar para ele mesmo ou para um caminho atemporal; veja no final do artigo os erros mais comuns).  &lt;/p&gt;
&lt;p&gt;H√° tamb√©m um s√≠mbolo alternativo representado por um hex√°gono achatado como na parte inferior da figura ao lado. Este s√≠mbolo tem o mesmo significado do losango e, apesar de pouco utilizado, pode ser √∫til quando a condi√ß√£o tem um nome extenso.
&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h3&gt;Sa√≠da condicional&lt;/h3&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/asm_saidaCondicional.png' width="15%" align="right" style="padding-left:5%" /&gt;
As sa√≠das listadas dentro de um estado s√£o as que ser√£o ativadas durante o tempo em que a m√°quina permanecer naquele estado. Contudo, h√° casos em que a sa√≠da n√£o depende somente do estado mais tamb√©m da(s) entrada(s) (i.e. m√°quina de Mealy). Para este tipo de sa√≠da, existe a representa√ß√£o de sa√≠da condicional, sujo s√≠mbolo √© um ret√¢ngulo oblongo com as laterais arrendondadas ao m√°ximo poss√≠vel (i.e. um semi-c√≠rculo). H√° uma aresta direcional de entrada e uma de sa√≠da. A aresta de sa√≠da deve ser conectada a qualquer outro elemento ASM, por√©m este √© um componente atemporal (combinat√≥rio, sem depend√™ncia temporal, como o decisor) e portanto deve estar em um caminho v√°lido entre dois estados. A entrada de uma sa√≠da condicional deve necessariamente originar-se da sa√≠da de um ou mais decisores, quando a condi√ß√£o, por consequ√™ncia, indicar√° a condi√ß√£o para que esta sa√≠da seja ativada. Note que n√£o faz sentido usar uma sa√≠da condicional sem nenhum decisor no caminho que a antecede pois nesse caso a sa√≠da s√≥ depende do estado atual (i.e. m√°quina de Moore) e portanto deve estar dentro do estado.&lt;/p&gt;
&lt;p&gt;Assim como a lista de sa√≠das em um estado, a lista de sa√≠das de uma sa√≠da condicional apresenta a lista de sinais que devem ser ativados quando a m√°quina estiver com este caminho ativo, ou seja, a condi√ß√£o do grupo de decisores que a antecede for satisfeita. Note que, enquanto a m√°quina estiver no estado em que os decisores est√£o ativos, mudar a condi√ß√£o pode levar os decisores a ativar outro caminho, alterando o estado de ativa√ß√£o de uma sa√≠da condicional dependente destes decisores.
&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h3&gt;Jun√ß√£o&lt;/h3&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/asm_juncao.png' width="15%" align="right" style="padding-left:5%" /&gt;
A jun√ß√£o √© o componente que permite juntar dois caminhos diferentes em dire√ß√£o a outro estado. √â composta por um ponto onde chegam duas arestas direcionais e sai somente uma. Este componente deve ser desenhado na forma como est√°, tolerando-se que as arestas sejam desenhadas em diferentes posi√ß√µes ao redor do ponto, mantidas duas de entrada e uma de sa√≠da. Todas as arestas devem ter como origem ou destino um elemento ASM, incluindo outra jun√ß√£o, mas devem estar em um caminho sequencial (entre dois estados) pois, assim como o decisor e a sa√≠da condiciona, a jun√ß√£o n√£o possui depend√™ncia temporal.  &lt;/p&gt;
&lt;p&gt;Observe que o ponto foi exagerado no exemplo ao lado. Quando desenhar sua m√°quina, use somente um ponto onde fique clara a converg√™ncia de duas arestas de entrada e uma de sa√≠da. De fato, em desenhos feito usando aux√≠lio de ferramentas computacionais, √© comum omitir a jun√ß√£o, desde que fique clara a converg√™ncia. Tamb√©m √© poss√≠vel uma jun√ß√£o com mais de duas arestas de entrada, mas sempre h√° somente uma aresta de sa√≠da.
&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h3&gt;Outros elementos gr√°ficos&lt;/h3&gt;
&lt;p&gt;Alguns autores permitem uma condi√ß√£o em uma aresta, logo ap√≥s a sa√≠da do estado e antes de qualquer outro bloco. Para isto, basta escrever o nome de uma condi√ß√£o booleana ao lado da aresta. Isto implica que o estado ir√° transicionar para aquela transi√ß√£o caso a condi√ß√£o seja verdadeira, ou n√£o ir√° transicionar caso seja falsa, permanecendo no mesmo estado. Este tipo de mecanimso est√° relacionado ao &lt;em&gt;clock enable&lt;/em&gt; presente em &lt;em&gt;flip-flops&lt;/em&gt;. A condi√ß√£o √© exatamente o &lt;em&gt;enable&lt;/em&gt;, prevenindo que o &lt;em&gt;flip-flop&lt;/em&gt; transicione caso seja falsa. Contudo, deve-se evitar este tipo de transi√ß√£o, especialmente se voc√™ √© iniciante, pois: (i) nem todo &lt;em&gt;flip-flop&lt;/em&gt; conta com um &lt;em&gt;clock enable&lt;/em&gt;, e (ii) esta transi√ß√£o n√£o deve permitir que o pr√≥ximo estado seja acionado, complicando desnecessariamente a s√≠ntese. Nem pense em inserir uma porta no caminho do &lt;em&gt;clock&lt;/em&gt; para implementar um &lt;em&gt;clock enable&lt;/em&gt; pois as implica√ß√µes podem ser bem desastrosas. Em suma: n√£o use este tipo de constru√ß√£o exceto se souber o que est√° fazendo.&lt;/p&gt;
&lt;h2&gt;Fluxo de um diagrama ASM&lt;/h2&gt;
&lt;p&gt;Um diagrama ASM tem um fluxo simples: sai de um estado ativo e vai para o pr√≥ximo. O estado ativo inicialmente √© sempre aquele que √© o destino da √∫nica aresta sem origem do diagrama. √â poss√≠vel que entre esta aresta e o estado existam jun√ß√µes, mas nenhum outro componente √© permitido entre a aresta que representa o &lt;em&gt;reset&lt;/em&gt; e o estado inicial.&lt;/p&gt;
&lt;p&gt;A partir de um estado inicial, segue-se a analogia de circuitos chaveados: o estado ativo no momento ativa todos os elementos que est√£o ligados em sua sa√≠da. √â poss√≠vel que haja um decisor entre um estado e outro, indicando que esta √© uma transi√ß√£o condicional: dependendo da condi√ß√£o ser atendida ou n√£o, a m√°quina segue para um estado ou para outro. No momento da transi√ß√£o (sinal de &lt;em&gt;clock&lt;/em&gt;), o estado que possuir sua entrada ativa √© ativado e o anterior desativado. √â permitido um estado ativar-se a si mesmo bastando colocar na sua entrada uma jun√ß√£o,  ligando-se uma das entradas da jun√ß√£o a sa√≠da do estado (um la√ßo ou &lt;em&gt;loop&lt;/em&gt;). No entanto, n√£o √© permitido que o fluxo ative dois estados. Cada transi√ß√£o sai de um estado e vai para outro de forma determin√≠stica e n√£o amb√≠gua. Caso n√£o seja especificado, assume-se que a transi√ß√£o acontece na borda de subida do &lt;em&gt;clock&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Normalmente os diagramas ASM s√£o desenhados na vertical, com o estado inicial acima na p√°gina e o final abaixo. N√£o h√° limita√ß√µes em desenh√°-lo em outra orienta√ß√£o, mas evite fugir do usual. Jamais mude a orienta√ß√£o do diagrama no meio do desenho (e.g. inicia-se superior e no meio do diagrama parte-se para a direita) para n√£o dar margem a interpreta√ß√µes amb√≠guas.&lt;/p&gt;
&lt;p&gt;Uma outra maneira de visualizar o diagrama ASM √© usando Blocos ASM. Cada bloco √© composto por exatamente um estado e a quantidade de decisores, sa√≠das condicionais e jun√ß√µes que forem necess√°rias para implementar a l√≥gica desejada. O diagrama ASM passa a ser ent√£o uma liga√ß√£o entre blocos ASM, de forma que todos os caminhos de sa√≠da de um bloco levam a um estado (que pode ser o estado do mesmo bloco).&lt;/p&gt;
&lt;h3&gt;Exemplo 1: m√°quina de detectar 1001 com sobreposi√ß√£o (Moore)&lt;/h3&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/asm_exemplo1.png' width="30%" align="left" style="padding-right:5%" /&gt;
Esta m√°quina possui uma entrada &lt;code&gt;e&lt;/code&gt; e uma sa√≠da &lt;code&gt;z&lt;/code&gt;. A sa√≠da &lt;code&gt;z&lt;/code&gt; √© alta quando a sequencia 1001 √© detectada na entrada &lt;code&gt;e&lt;/code&gt;, com sobreposi√ß√£o.&lt;/p&gt;
&lt;p&gt;A m√°quina pode ser vista ao lado, com os estados &lt;code&gt;ini&lt;/code&gt;,&lt;code&gt;S1&lt;/code&gt;,&lt;code&gt;S10&lt;/code&gt;,&lt;code&gt;S100&lt;/code&gt; e &lt;code&gt;S1001&lt;/code&gt;. O estado &lt;code&gt;ini&lt;/code&gt; √© o √∫nico que possui uma aresta com origem indeterminada, portanto √© o estado inicial. Note que entre esta aresta e o estado h√° somente uma jun√ß√£o, o que √© permitido. A √∫nica sa√≠da da m√°quina, &lt;code&gt;z&lt;/code&gt;, √© ativada somente no estado &lt;code&gt;S1001&lt;/code&gt;, portanto todos os outros estados n√£o possuem lista de sa√≠da. Esta m√°quina n√£o possui nenhuma sa√≠da condicional, portanto representa uma m√°quina de Moore.  &lt;/p&gt;
&lt;p&gt;Enquanto o estado &lt;code&gt;ini&lt;/code&gt; est√° ativo, sua sa√≠da tamb√©m est√°, portanto o decisor abaixo deste estado est√° ativo. Este decisor possui como condi√ß√£o a entrada &lt;code&gt;e&lt;/code&gt;, o que implica que se a entrada for verdadeira (1) a m√°quina segue para a direita, caso contr√°rio para a esquerda. Se &lt;code&gt;e=0&lt;/code&gt;, o destino do decisor √© uma nova jun√ß√£o que acaba ativando o pr√≥prio estado &lt;code&gt;ini&lt;/code&gt;, portanto na borda de subida do &lt;em&gt;clock&lt;/em&gt; a m√°quina transicionar√° para o mesmo estado, ou seja, n√£o h√° efeito sobre a m√°quina. √â importante notar que a m√°quina n√£o deixa de transicionar, apenas transiciona para o mesmo estado. Caso &lt;code&gt;e=1&lt;/code&gt; a m√°quina transiciona para a direita, ativando o estado &lt;code&gt;S1&lt;/code&gt;. Neste caso, na pr√≥xima borda de subida do &lt;em&gt;clock&lt;/em&gt;, o estado passar√° a ser o &lt;code&gt;S1&lt;/code&gt;, portanto todos os elementos abaixo de &lt;code&gt;ini&lt;/code&gt; ser√£o desativados e os elementos abaixo de &lt;code&gt;S1&lt;/code&gt; ser√£o ativados.&lt;/p&gt;
&lt;p&gt;Com &lt;code&gt;S1&lt;/code&gt; ativo, repete-se a an√°lise, mas desta vez o destino ser√° o &lt;code&gt;S10&lt;/code&gt; se &lt;code&gt;e=0&lt;/code&gt; ou &lt;code&gt;S1&lt;/code&gt; se &lt;code&gt;e=1&lt;/code&gt;. √â importante notar que os caminhos ativam-se com a mudan√ßa da entrada, portanto se a entrada mudar o decisor tamb√©m muda o caminho ativo imediatamente. O caminho que vale √© o caminho ativo no momento da borda do &lt;em&gt;clock&lt;/em&gt;. Lembre-se que estes componentes (decisores e jun√ß√µes) s√£o combinat√≥rios, com os atrasos inerentes deste tipo de circuito, e os estados s√£o elementos s√≠ncronos tamb√©m com atrasos e ainda suscept√≠veis a viola√ß√µes nos tempos de &lt;em&gt;setup&lt;/em&gt; e &lt;em&gt;hold&lt;/em&gt;. Mudar a entrada entre duas bordas de &lt;em&gt;clock&lt;/em&gt; n√£o altera o comportamento da m√°quina e a m√°quina transicionar√° para o caminho ativo no momento da borda, mas caso mude-se a entrada muito pr√≥ximo da borda do &lt;em&gt;clock&lt;/em&gt;, deve-se levar em considera√ß√£o os tempos envolvidos ou a m√°quina poder√° transicionar erroneamente.&lt;/p&gt;
&lt;p&gt;Se continuarmos a an√°lise, invariavelmente chegaremos no &lt;code&gt;S1001&lt;/code&gt;, que cont√©m a sa√≠da &lt;code&gt;z&lt;/code&gt; na sua lista de sa√≠das. isto significa que quanto este estado estiver ativo, a sa√≠da tamb√©m estar√°. A √∫nica maneira de chegarmos neste estado √© a entrada assumir os valores &lt;code&gt;1001&lt;/code&gt; antes de cada borda de subida do &lt;em&gt;clock&lt;/em&gt;, portanto o estado &lt;code&gt;S1001&lt;/code&gt; √© literalmente o estado onde a m√°quina detecta que observou o valor correto na entrada. Observe tamb√©m a transi√ß√£o a partir deste estado: elas n√£o voltam para o estado &lt;code&gt;ini&lt;/code&gt; e sim para os estados correspondentes a sobreposi√ß√£o. E.g. se ap√≥s detectarmos uma sequencia come√ßarmos outra (&lt;code&gt;1001001&lt;/code&gt;), a m√°quina produzir√° sa√≠da &lt;code&gt;z=1&lt;/code&gt; em ambos os &lt;code&gt;1&lt;/code&gt; depois do primeiro.&lt;/p&gt;
&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;

&lt;h3&gt;Exemplo 2: m√°quina de detectar 1001 com sobreposi√ß√£o (Mealy)&lt;/h3&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/asm_exemplo2.png' width="30%" align="left" style="padding-right:5%" /&gt;
Esta m√°quina √© similar a de Exemplo 1. H√° uma √∫nica diferen√ßa, na gera√ß√£o da sa√≠da, que √© dependente da entrada, caracterizando a m√°quina como Mealy.&lt;/p&gt;
&lt;p&gt;At√© o estado &lt;code&gt;S100&lt;/code&gt; a m√°quina tem comportamento id√™ntico √† m√°quina do Exemplo 1. Neste estado, caso a entrada &lt;code&gt;e=0&lt;/code&gt;, transicionamos para a esquerda (indo para o estado &lt;code&gt;ini&lt;/code&gt; pois detectou-se a sequencia errada &lt;code&gt;1000&lt;/code&gt; na entrada). Mas caso &lt;code&gt;e=1&lt;/code&gt;, o caminho ativado ser√° o da direita. Como neste caminho temos uma sa√≠da condicional, a sa√≠da &lt;code&gt;z&lt;/code&gt; estar√° ativa enquanto este caminho estiver ativo, ou seja, enquanto a m√°quina estiver no estado &lt;code&gt;S100&lt;/code&gt; e a entrada for &lt;code&gt;e=1&lt;/code&gt;. A sa√≠da condicional tamb√©m √© um elemento combinat√≥rio, portanto a sa√≠da &lt;code&gt;z&lt;/code&gt; ser√° &lt;code&gt;1&lt;/code&gt; assim que a entrada mudar para &lt;code&gt;1&lt;/code&gt; (e os atrasos de propaga√ß√£o forem atendidos). Se durante o estado &lt;code&gt;S100&lt;/code&gt;(entre a borda de subida do &lt;em&gt;clock&lt;/em&gt; onde este estado foi ativado e antes da pr√≥xima borda de subida) mudarmos o valor da entrada, tamb√©m mudaremos o valor da sa√≠da! Esta √© uma caracter√≠stica das m√°quinas Mealy, onde a sa√≠da depende n√£o somente do estado mas tamb√©m das entradas.&lt;/p&gt;
&lt;p&gt;Mas √© poss√≠vel escrever uma sa√≠da tamb√©m na lista dos estados. Por exemplo: suponha que queiramos uma sa√≠da secund√°ria &lt;code&gt;y&lt;/code&gt;, que √© alta quando a m√°quina detectar &lt;code&gt;10&lt;/code&gt; durante a detec√ß√£o da sequencia principal. Bastaria para isso escrever &lt;code&gt;y&lt;/code&gt; dentro do estado &lt;code&gt;S10&lt;/code&gt;. Ao atingir este estado, a m√°quina ativa a sa√≠da &lt;code&gt;y&lt;/code&gt;. Isto est√° correto, mas n√£o misturamos uma sa√≠da Moore com uma sa√≠da Mealy? H√° autores que defendem que em ASM pode-se fazer m√°quinas mistas, ou seja, com sa√≠das dependentes somente do estado e sa√≠das dependentes do estado e da entrada, na mesma m√°quina. N√£o se engane: isto √© uma fal√°cia pois uma m√°quina deste tipo √© uma m√°quina Mealy. Se h√° uma sa√≠da qualquer na m√°quina que dependa de uma entrada, a m√°quina deve ser classificada como Mealy. Em ASM √© poss√≠vel que uma mesma sa√≠da seja escrita em um estado e em uma sa√≠da condicional, portanto esta sa√≠da ser√° ativa quando atingir-se aquele estado e quando ativar-se aquele caminho. Este poder de express√£o n√£o existe em um diagrama de transi√ß√£o de estados e costuma confundir quem est√° aprendendo, mas n√£o implica em m√°quina mista e sim numa m√°quina de Mealy.&lt;/p&gt;
&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;

&lt;!--
### S√≠ntese de ASM

### Erros comuns
erros na montagem do fluxo
pseudo-c√≥digo na asm, Confus√£o com fluxograma

 --&gt;

&lt;hr&gt;
&lt;h2&gt;Quando devo usar ASM?&lt;/h2&gt;
&lt;p&gt;O diagrama ASM foi criado na d√©cada de 70 e esquecido desde ent√£o pois na maioria das vezes a s√≠ntese de uma ASM √© feita usando &lt;em&gt;one-hot-encoding&lt;/em&gt;. Naquela √©poca, este tipo de s√≠ntese era inaceit√°vel pois um &lt;em&gt;flip-flop&lt;/em&gt; era caro para se desperdi√ßar em um √∫nico estado, ent√£o os projetistas digitais preferiam sintetizar a m√°quina com a melhor otimiza√ß√£o poss√≠vel em rela√ß√£o ao n√∫mero de &lt;em&gt;flip-flops&lt;/em&gt;, n√£o raramente feita manualmente. No entanto, com o advento dos sintetizadores modernos, voc√™ pode expressar-se usando uma ASM e o sintetizador ir√° gerar um hardware t√£o otimizado ou at√© mais otimizado que o feito manualmente. Al√©m disso, se voc√™ estiver usando FPGA para prototipar seu hardware, o sintetizador provavelmente ir√° usar &lt;em&gt;one-hot-encoding&lt;/em&gt; de qualquer forma devido a organiza√ß√£o interna destes dispositivos.&lt;/p&gt;
&lt;p&gt;A vantagem de se utilizar ASM √© que o diagrama √© muito pr√≥ximo de um pseudo-algoritmo. √â muito comum come√ßar um projeto digital com uma prova de conceito em software que resolva o problema. Neste sentido, partir para uma ASM, especialmente quando utiliza-se metodologias de divis√£o e conquista (e.g. fluxo de dados e unidade de controle), facilita o trabalho do projetista evitando erros e aumentando a legibilidade, sem prejudicar a qualidade do hardware gerado. Por estas raz√µes, a utiliza√ß√£o de ASM vem crescendo e √© comum v√™-las em projetos digitais. VHDL e Verilog, as duas linguagens de descri√ß√£o de hardware mais comuns, contam com padr√µes onde √© poss√≠vel expressar uma ASM facilmente. H√° diversas ferramentas que suportam ASM (inclusive graficamente) e h√° at√© mesmo uma linguagem totalmente dedicada √† express√£o de diagramas ASM (&lt;a href="http://www.epyme.uva.es/asm++"&gt;ASM++&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;Se voc√™ tem um pseudo-c√≥digo ou um algoritmo que resolve o seu problema e precisa transform√°-lo em um &lt;em&gt;hardware&lt;/em&gt;, parta para uma ASM.&lt;/p&gt;
&lt;h3&gt;Contribui√ß√µes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;2/set/2020: Lucas Lopes de Paula Junior detectou um erro (j√° corrigido no texto) sobre a sa√≠da condicional.&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- Analogia com redes de petri

Diferen√ßa entre FSM , psudo-c√≥digo na asm--&gt;</content><category term="sistemas digitais"></category><category term="sistemas digitais"></category><category term="asm"></category></entry><entry><title>Testbenchs em VHDL</title><link href="https://balbertini.github.io/vhdl_testbench-pt_BR.html" rel="alternate"></link><published>2018-11-09T01:04:03-02:00</published><updated>2019-09-09T10:16:11-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2018-11-09:/vhdl_testbench-pt_BR.html</id><summary type="html">&lt;p&gt;Como fazer um testbench em VHDL.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Em HDLs, √© muito comum escrever-se um &lt;em&gt;testbench&lt;/em&gt; para cada m√≥dulo que for desenvolvido. Dessa forma, os m√≥dulos podem ser testados antes da integra√ß√£o. Tamb√©m √© aconselh√°vel escrever um &lt;em&gt;testbench&lt;/em&gt; para o arquivo &lt;em&gt;toplevel&lt;/em&gt;, ou seja, para o arquivo de integra√ß√£o, para garantir que esta foi realizada corretamente.&lt;/p&gt;
&lt;p&gt;A principal fun√ß√£o de um &lt;em&gt;testbench&lt;/em&gt; √© testar ou validar um m√≥dulo. Nesse sentido, um &lt;em&gt;testbench&lt;/em&gt; nada mais √© que um m√≥dulo VHDL que:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Instancia o(s) m√≥dulo(s) a serem testados;&lt;/li&gt;
&lt;li&gt;Injeta sinais de entrada no(s) m√≥dulo(s) em teste;&lt;/li&gt;
&lt;li&gt;Verifica se a sa√≠da do(s) m√≥dulo(s) s√£o as esperadas.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Normalmente o &lt;em&gt;testbench&lt;/em&gt; n√£o √© projetado para ser sintetiz√°vel, o que libera o projetista para utilizar primitivas funcionais n√£o sintetiz√°veis e n√£o requer uma interface (entidade vazia), pois o objetivo n√£o √© modelar um hardware. A maneira mais comum de se montar um &lt;em&gt;testbench&lt;/em&gt; √© usando o modelo &lt;strong&gt;DUT&lt;/strong&gt; (do ingl√™s &lt;em&gt;Device Under Test&lt;/em&gt;). Este modelo pode ser visto na figura abaixo:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Modelo DUT de textbench" src="https://balbertini.github.io/images/vhdl/testbench.png"&gt;&lt;/p&gt;
&lt;p&gt;A inst√¢ncia do(s) m√≥dulos(s) a serem testados √© realizada atrav√©s de um comando de inst√¢ncia de componente (palavra reservada &lt;code&gt;component&lt;/code&gt;), da mesma maneira como √© utilizada para implementar a modulariza√ß√£o em sistemas digitais, quando um m√≥dulo utiliza v√°rios outros m√≥dulos menores como componentes para formar um m√≥dulo maior. Um exemplo cl√°ssico √© um contador, que utiliza v√°rios &lt;em&gt;flip-flops&lt;/em&gt; para formar uma estrutura contadora (nesse caso h√° um m√≥dulo &lt;em&gt;flip-flop&lt;/em&gt; instanciado v√°rias vezes e organizado na forma de um contador).&lt;/p&gt;
&lt;h3&gt;Assert&lt;/h3&gt;
&lt;p&gt;Para verificar os resultados, usa-se a palavra reservada &lt;code&gt;assert&lt;/code&gt;, que tem o seguinte formato:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;condicao&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="n"&gt;mensagem_string&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;nivel_de_gravidade&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;A &lt;code&gt;condicao&lt;/code&gt; pode ser qualquer uma que retorne um valor &lt;code&gt;boolean&lt;/code&gt;, a &lt;code&gt;mensagem_string&lt;/code&gt; √© qualquer uma do tipo &lt;code&gt;string&lt;/code&gt; e o &lt;code&gt;nivel_de_severidade&lt;/code&gt; √© uma das op√ß√µes &lt;code&gt;note&lt;/code&gt;, &lt;code&gt;warning&lt;/code&gt;, &lt;code&gt;error&lt;/code&gt; ou &lt;code&gt;failure&lt;/code&gt;. √â usual que a condi√ß√£o seja uma compara√ß√£o. As duas √∫ltimas (mensagem e n√≠vel de severidade) podem ser omitidas, caso em que uma mensagem padr√£o ser√° mostrada e a gravidade ser√° &lt;code&gt;error&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;A mensagem ser√° impressa caso a condi√ß√£o falhe, portanto deve ser algo que tenha sentido para o projetista. √â poss√≠vel mostrar o valor de sinais ou vari√°veis usando a propriedade &lt;code&gt;image&lt;/code&gt; do tipo de dado que se quer mostrar. Essa propriedade √© definida pelo pr√≥prio tipo de dado e retorna uma &lt;em&gt;string&lt;/em&gt; leg√≠vel que representa o valor (e.g. &lt;code&gt;integer'image(123)&lt;/code&gt; retorna a string "123").&lt;/p&gt;
&lt;p&gt;Quanto √† severidade do erro, √© uma dica para o simulador sobre a a√ß√£o que ele deve tomar caso a condi√ß√£o falhe. O n√≠vel &lt;code&gt;note&lt;/code&gt; n√£o faz nada e s√≥ mostra a mensagem. O &lt;code&gt;warning&lt;/code&gt; mostra a mensagem com destaque, mas n√£o p√°ra a simula√ß√£o, portanto deve ser utilizada para mostrar erros n√£o cr√≠ticos. O &lt;code&gt;error&lt;/code&gt; mostra a mensagem com um destaque maior e deve ser utilizado para erros que possam ocasionar mais erros na simula√ß√£o ou erros cr√≠ticos recuper√°veis (o circuito n√£o se comportou como o esperado mas pode voltar a se comportar). Este n√≠vel normalmente n√£o p√°ra a simula√ß√£o, mas dependendo da implementa√ß√£o do simulador pode ocasionar problemas ou at√© mesmo a parada da simula√ß√£o. J√° o n√≠vel &lt;code&gt;failure&lt;/code&gt; sempre p√°ra a simula√ß√£o e deve ser usado para erros cr√≠ticos n√£o recuper√°veis.&lt;/p&gt;
&lt;p&gt;A origem dos dados de entrada e sa√≠da, que ser√£o usados respectivamente para injetar os sinais de entrada do m√≥dulo e para verificar se a sa√≠da √© a esperada, pode ser feita de v√°rias formas. As mais usuais e recomendadas s√£o:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href="#programatico"&gt;Geradas programaticamente no pr√≥prio &lt;em&gt;testbench&lt;/em&gt; em VHDL;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#vetor"&gt;Atrav√©s de um vetor de testes embutido no &lt;em&gt;testbench&lt;/em&gt;;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#arquivoexterno"&gt;Geradas externamente e lidas pelo &lt;em&gt;testbench&lt;/em&gt; em VHDL.&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Cobriremos cada um destes m√©todos neste post.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;a name="programatico"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Exemplo: escrevendo o testbench programaticamente&lt;/h2&gt;
&lt;p&gt;Considere o m√≥dulo em VHDL de um contador universal, cuja entidade tem a seguinte declara√ß√£o:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;contador&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;generic&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;modulo&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;integer&lt;/span&gt; &lt;span class="k"&gt;range&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="kt"&gt;integer&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;right&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;port&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;clk&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;clear_n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;up&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;en&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;qi&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt;  &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;integer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ceil&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;log2&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;real&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;modulo&lt;/span&gt;&lt;span class="p"&gt;))))&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;qo&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;integer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ceil&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;log2&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;real&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;modulo&lt;/span&gt;&lt;span class="p"&gt;))))&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="nc"&gt;contador&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Este contador √© gen√©rico, cujo m√≥dulo √© calculado atrav√©s do par√¢metro chamado &lt;code&gt;modulo&lt;/code&gt;, na ocasi√£o da instancia√ß√£o. √© sens√≠vel √† borda de subida, possui &lt;em&gt;clear&lt;/em&gt; ativo baixo ass√≠ncrono, carga paralela s√≠ncrona, determina√ß√£o do sentido de contagem (&lt;code&gt;up=1&lt;/code&gt; contagem crescente), e um &lt;em&gt;enable&lt;/em&gt; que desabilita a contagem.&lt;/p&gt;
&lt;p&gt;O &lt;em&gt;testbench&lt;/em&gt; para este m√≥dulo come√ßa declarando-se as bibliotecas que utilizaremos e a entidade vazia:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;library&lt;/span&gt; &lt;span class="nn"&gt;ieee&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;use&lt;/span&gt; &lt;span class="nn"&gt;ieee.numeric_bit.&lt;/span&gt;&lt;span class="k"&gt;all&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;use&lt;/span&gt; &lt;span class="nn"&gt;ieee.math_real.&lt;/span&gt;&lt;span class="k"&gt;all&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;contador_tb&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="k"&gt;end&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;-- Entidade vazia, so serve para TB&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Ap√≥s a declara√ß√£o da entidade, declaramos a arquitetura normalmente, como em um m√≥dulo VHDL qualquer. A delcara√ß√£o completa pode ser vista abaixo, e a dissecaremos no decorrer deste post:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;dut&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="nc"&gt;contador_tb&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;constant&lt;/span&gt; &lt;span class="n"&gt;modulo&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;integer&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;256&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;component&lt;/span&gt; &lt;span class="nc"&gt;contador&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
    &lt;span class="k"&gt;generic&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
      &lt;span class="n"&gt;modulo&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;integer&lt;/span&gt; &lt;span class="k"&gt;range&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="kt"&gt;integer&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;right&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;port&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
      &lt;span class="n"&gt;clk&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;clear_n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;up&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;en&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="n"&gt;qi&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt;  &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;integer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ceil&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;log2&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;real&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;modulo&lt;/span&gt;&lt;span class="p"&gt;))))&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;qo&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;integer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ceil&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;log2&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;real&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;modulo&lt;/span&gt;&lt;span class="p"&gt;))))&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;component&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;clk&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;up&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;en&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;saida&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;integer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ceil&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;log2&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;real&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;modulo&lt;/span&gt;&lt;span class="p"&gt;))))&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;saidai&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;integer&lt;/span&gt; &lt;span class="k"&gt;range&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="n"&gt;modulo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;constant&lt;/span&gt; &lt;span class="n"&gt;periodoClock&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;time&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
  &lt;span class="n"&gt;clk&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt; &lt;span class="n"&gt;clk&lt;/span&gt; &lt;span class="k"&gt;after&lt;/span&gt; &lt;span class="n"&gt;periodoClock&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;saidai&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;to_integer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;unsigned&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;saida&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;

  &lt;span class="n"&gt;dut&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;contador&lt;/span&gt;
    &lt;span class="k"&gt;generic&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;modulo&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clk&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;up&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;en&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;saida&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="nc"&gt;st&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;begin&lt;/span&gt;
    &lt;span class="c1"&gt;--! Imprime mensagem de inicio de teste&lt;/span&gt;
    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;false&lt;/span&gt; &lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;BOT&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;note&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="c1"&gt;--! Testa se o clear est√° OK&lt;/span&gt;
    &lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;up&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;en&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;until&lt;/span&gt; &lt;span class="n"&gt;rising_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clk&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;until&lt;/span&gt; &lt;span class="n"&gt;falling_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clk&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;saidai&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Teste de clear falhou.&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
      &lt;span class="s"&gt;&amp;quot; Obtido: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="kt"&gt;integer&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;image&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;saidai&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;failure&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="c1"&gt;--! Testa se a contagem crescente est√° OK&lt;/span&gt;
    &lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;up&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;en&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="n"&gt;modulo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;loop&lt;/span&gt;
      &lt;span class="c1"&gt;--! Verifica a contagem&lt;/span&gt;
      &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;saidai&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="n"&gt;report&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;Contagem falhou. Esperado: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="kt"&gt;integer&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;image&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot; Obtido: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="kt"&gt;integer&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;image&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;saidai&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;failure&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;until&lt;/span&gt; &lt;span class="n"&gt;falling_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clk&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;loop&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;saidai&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Teste de overflow falhou.&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;failure&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;up&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;en&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;until&lt;/span&gt; &lt;span class="n"&gt;falling_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clk&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;saidai&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;modulo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Teste de underflow falhou.&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;failure&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="c1"&gt;--! Testa se a contagem decrescente est√° OK&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="n"&gt;modulo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="k"&gt;loop&lt;/span&gt;
      &lt;span class="c1"&gt;--! Verifica a contagem&lt;/span&gt;
      &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;saidai&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="n"&gt;report&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;Contagem falhou. Esperado: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="kt"&gt;integer&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;image&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot; Obtido: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="kt"&gt;integer&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;image&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;saidai&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;failure&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;until&lt;/span&gt; &lt;span class="n"&gt;falling_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clk&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;loop&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;up&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;en&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;entrada&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;others&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;until&lt;/span&gt; &lt;span class="n"&gt;falling_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clk&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;saidai&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;modulo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Teste de load max falhou.&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;failure&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;entrada&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;others&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;until&lt;/span&gt; &lt;span class="n"&gt;falling_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clk&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;saidai&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Teste de load min falhou.&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;failure&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;up&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;en&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="k"&gt;loop&lt;/span&gt;
      &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;until&lt;/span&gt; &lt;span class="n"&gt;falling_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clk&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="c1"&gt;--! Verifica a contagem&lt;/span&gt;
      &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;saidai&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="n"&gt;report&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;Teste de enable falhou no &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="kt"&gt;integer&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;image&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot; ciclo.&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;failure&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;loop&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;false&lt;/span&gt; &lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;EOT&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;note&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;wait&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="nc"&gt;dut&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;No pre√¢mbulo da arquitetura, declarou-se o componente e os sinais necess√°rios para lig√°-lo. Ainda declarou-se duas constantes, que ser√£o usadas posteriormente.&lt;/p&gt;
&lt;p&gt;O primeiro bloco do &lt;em&gt;testbench&lt;/em&gt; gera o sinal de &lt;em&gt;clock&lt;/em&gt; necess√°rio para alimentar o contador (contadores s√£o circuitos sequenciais) e um sinal de suporte cujo √∫nico prop√≥sito √© copiar o pr√≥prio sinal de sa√≠da do contador (&lt;code&gt;saida&lt;/code&gt;), mas convertido para inteiro (&lt;code&gt;saida&lt;/code&gt; √© um &lt;code&gt;bit_vector&lt;/code&gt; e &lt;code&gt;saidai&lt;/code&gt; √© um &lt;code&gt;integer&lt;/code&gt;). Este sinal de suporte facilita a montagem do &lt;em&gt;testbench&lt;/em&gt; pois podemos us√°-lo para as compara√ß√µes posteriormente sem precisar chamar as fun√ß√µes de convers√£o &lt;code&gt;to_integer&lt;/code&gt; e &lt;code&gt;unsigned&lt;/code&gt; toda vez que formos fazer uma compara√ß√£o. Para gera√ß√£o do &lt;em&gt;clock&lt;/em&gt;, usou-se uma atribui√ß√£o com cl√°usula &lt;code&gt;after&lt;/code&gt;, ou seja, a cada &lt;code&gt;periodoClock/2&lt;/code&gt; o sinal ser√° invertido, gerando um clock de &lt;code&gt;periodoClock&lt;/code&gt; (uma constante que vale 1ns e foi declarada no pre√¢mbulo da arquitetura) e &lt;em&gt;duty-cycle&lt;/em&gt; de 50%. Note que este tipo de declara√ß√£o (&lt;code&gt;after&lt;/code&gt;) n√£o √© sintetiz√°vel e serve somente para fins de temporiza√ß√£o em simula√ß√£o.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;  &lt;span class="n"&gt;clk&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt; &lt;span class="n"&gt;clk&lt;/span&gt; &lt;span class="k"&gt;after&lt;/span&gt; &lt;span class="n"&gt;periodoClock&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;saidai&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;to_integer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;unsigned&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;saida&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;O segundo bloco do &lt;em&gt;testbench&lt;/em&gt; efetivamente instancia o DUT, que nesse caso √© o contador. Note que o contador est√° ligado aos sinais criados no pre√¢mbulo da arquitetura, incluindo o &lt;code&gt;modulo&lt;/code&gt; (nesse caso uma constante que vale 256). A fun√ß√£o deste bloco √© somente esta: instanciar e ligar o DUT no &lt;em&gt;testbench&lt;/em&gt;.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;  &lt;span class="n"&gt;dut&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;contador&lt;/span&gt;
    &lt;span class="k"&gt;generic&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;modulo&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clk&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;up&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;en&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;entrada&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;saida&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;O terceiro e √∫ltimo bloco √© o gerador de est√≠mulos para o DUT (por isso o nome &lt;code&gt;st&lt;/code&gt;). √â composto por apenas um &lt;code&gt;process&lt;/code&gt; que injeta e verifica os sinais de entrada e sa√≠da, respectivamente. Vamos dissec√°-lo em blocos novamente.&lt;/p&gt;
&lt;p&gt;Esta parte declara o &lt;code&gt;process&lt;/code&gt; e imprime uma mensagem incondicionalmente (normalmente as mensagens aparecer√£o na tela do simulador, no terminal ou no arquivo de sa√≠da da simula√ß√£o). Note que o &lt;code&gt;assert&lt;/code&gt; est√° verificando um valor constante &lt;code&gt;false&lt;/code&gt;, portanto este &lt;code&gt;assert&lt;/code&gt; sempre ir√° falhar, causando a impress√£o da mensagem "BOT" com severidade baixa (sem parar a simula√ß√£o). BOT √© um acr√¥nimo para &lt;em&gt;Begin Of Test&lt;/em&gt;, para indicar que o teste come√ßou.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;  &lt;span class="nc"&gt;st&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;begin&lt;/span&gt;
    &lt;span class="c1"&gt;--! Imprime mensagem de inicio de teste&lt;/span&gt;
    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;false&lt;/span&gt; &lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;BOT&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;note&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Agora sim come√ßamos a testar o contador. Nesta parte, colocamos o &lt;em&gt;clear&lt;/em&gt; em zero, portanto o contador deve manter as sa√≠das zeradas independentemente das demais entradas. Este teste n√£o √© √≥timo, pois seria necess√°rio testar todas as combina√ß√µes de entradas mantendo-se o &lt;em&gt;clear&lt;/em&gt; baixo para garantir uma cobertura total. Mas, √© suficiente para os prop√≥sitos que desejamos testar, que √© a sa√≠da em zero mesmo com borda do &lt;em&gt;clock&lt;/em&gt;. Os &lt;code&gt;wait&lt;/code&gt; esperam a borda de subida (&lt;code&gt;rising_edge&lt;/code&gt;) e de descida (&lt;code&gt;falling_edge&lt;/code&gt;) do &lt;em&gt;clock&lt;/em&gt; antes de fazer a verifica√ß√£o, portanto garantimos que o contador recebeu uma de cada uma das bordas com a as condi√ß√µes do teste (nesse caso as entradas &lt;code&gt;clr=0&lt;/code&gt;, &lt;code&gt;load=0&lt;/code&gt;, &lt;code&gt;up=1&lt;/code&gt; e &lt;code&gt;en=1&lt;/code&gt;). Se a sa√≠da n√£o for zero, o &lt;code&gt;assert&lt;/code&gt; ir√° mostrar a mensagem de falha com o valor da sa√≠da, e tamb√©m ir√° parar a simula√ß√£o (severidade &lt;code&gt;failure&lt;/code&gt;).&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    &lt;span class="c1"&gt;--! Testa se o clear est√° OK&lt;/span&gt;
    &lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;up&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;en&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;until&lt;/span&gt; &lt;span class="n"&gt;rising_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clk&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;until&lt;/span&gt; &lt;span class="n"&gt;falling_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clk&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;saidai&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Teste de clear falhou.&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
      &lt;span class="s"&gt;&amp;quot; Obtido: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="kt"&gt;integer&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;image&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;saidai&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;failure&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;O teste anterior √© simples pois s√≥ testa se a sa√≠da se mant√©m em zero. No teste seguinte, mostrado abaixo, mudamos os valores atribu√≠dos √†s entradas para configurar a contagem crescente do contador, simulando uma opera√ß√£o normal em contagem crescente. Para cada valor do &lt;code&gt;loop&lt;/code&gt;, verificamos se a sa√≠da condiz com o valor esperado (note que a sa√≠da inicial √© zero pois passamos no teste anterior) e aguardamos uma borda de descida do &lt;em&gt;clock&lt;/em&gt;, garantindo que o contador avan√ßou para o pr√≥ximo valor esperado, que ser√° verificado na pr√≥xima itera√ß√£o do &lt;code&gt;loop&lt;/code&gt;.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    &lt;span class="c1"&gt;--! Testa se a contagem crescente est√° OK&lt;/span&gt;
    &lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;up&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;en&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="n"&gt;modulo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;loop&lt;/span&gt;
      &lt;span class="c1"&gt;--! Verifica a contagem&lt;/span&gt;
      &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;saidai&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="n"&gt;report&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;Contagem falhou. Esperado: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="kt"&gt;integer&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;image&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot; Obtido: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="kt"&gt;integer&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;image&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;saidai&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;failure&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;until&lt;/span&gt; &lt;span class="n"&gt;falling_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clk&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;loop&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Ao final do teste anterior, o valor da contagem √© o m√°ximo poss√≠vel +1 (√∫ltima itera√ß√£o do teste anterior). Aproveitamos para testar o &lt;em&gt;overflow&lt;/em&gt;, ou seja, a sa√≠da deve ser zero novamente. Tamb√©m aproveitou-se para inverter o sentido de contagem e verificar o &lt;em&gt;underflow&lt;/em&gt;, ou seja, a partir do valor m√°ximo +1, se contarmos decrescente o valor deve ser o m√°ximo. Os nomes &lt;em&gt;overflow&lt;/em&gt; e &lt;em&gt;underflow&lt;/em&gt; foram usados pelo projetista mas tem significados distintos do utilizado neste contexto (i.e. quando lidando com n√∫meros inteiros ou ponto flutuante esta nomenclatura n√£o √© usada para indicar esta transi√ß√£o).&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;saidai&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Teste de overflow falhou.&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;failure&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;up&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;en&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;until&lt;/span&gt; &lt;span class="n"&gt;falling_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clk&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;saidai&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;modulo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Teste de underflow falhou.&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;failure&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Este pr√≥ximo bloco de testes √© id√™ntico ao bloco onde testou-se a contagem, mas dessa vez decrescente pois a √∫ltima configura√ß√£o das entradas (para o teste de &lt;em&gt;underflow&lt;/em&gt;) deixou o contador configurado desta maneira. Novamente aproveita-se o √∫ltimo teste sabendo que o contador parte do valor m√°ximo poss√≠vel.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    &lt;span class="c1"&gt;--! Testa se a contagem decrescente est√° OK&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="n"&gt;modulo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="k"&gt;loop&lt;/span&gt;
      &lt;span class="c1"&gt;--! Verifica a contagem&lt;/span&gt;
      &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;saidai&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="n"&gt;report&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;Contagem falhou. Esperado: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="kt"&gt;integer&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;image&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot; Obtido: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="kt"&gt;integer&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;image&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;saidai&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;failure&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;until&lt;/span&gt; &lt;span class="n"&gt;falling_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clk&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;loop&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Ainda falta testar a carga paralela. Neste bloco, o projetista resolveu testar a carga m√°xima (entrada toda em 1) e m√≠nima (entrada toda em 0). Obviamente este teste n√£o garante uma boa cobertura, mas √© suficiente para os prop√≥sitos deste exemplo.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    &lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;up&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;en&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;entrada&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;others&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;until&lt;/span&gt; &lt;span class="n"&gt;falling_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clk&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;saidai&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;modulo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Teste de load max falhou.&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;failure&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;entrada&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;others&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;until&lt;/span&gt; &lt;span class="n"&gt;falling_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clk&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;saidai&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Teste de load min falhou.&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;failure&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Por √∫ltimo, testou-se a contagem por tr√™s ciclos de &lt;em&gt;clock&lt;/em&gt;, com o &lt;em&gt;enable&lt;/em&gt; desativado. O contador terminou o √∫ltimo teste com uma carga de zero, portanto este valor deve-se manter na sa√≠da durante todos os tr√™s ciclos de &lt;em&gt;clock&lt;/em&gt;.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    &lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;up&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;en&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="k"&gt;loop&lt;/span&gt;
      &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;until&lt;/span&gt; &lt;span class="n"&gt;falling_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clk&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="c1"&gt;--! Verifica a contagem&lt;/span&gt;
      &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;saidai&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="n"&gt;report&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;Teste de enable falhou no &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="kt"&gt;integer&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;image&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot; ciclo.&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;failure&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;loop&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Este √∫ltimo peda√ßo n√£o √© um teste em si mas tem duas fun√ß√µes. A primeira √© mostrar uma mensagem de fim de teste (&lt;em&gt;End Of Test&lt;/em&gt;) e a segunda √© terminar o processo de gera√ß√£o e verifica√ß√£o de est√≠mulos. Isso √© feito atrav√©s do &lt;code&gt;wait&lt;/code&gt; incondicional, que suspende indefinidamente o &lt;code&gt;process&lt;/code&gt; do ponto de vista do simulador, indicando que este &lt;code&gt;process&lt;/code&gt; j√° realizou o trabalho que deveria.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;false&lt;/span&gt; &lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;EOT&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;note&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;wait&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="nc"&gt;dut&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;&lt;a name="vetor"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Exemplo: vetor de testes no c√≥digo&lt;/h2&gt;
&lt;p&gt;Este exemplo testa um comparador de 12 bits cuja entidade √©:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;comp12bit&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;XD&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;YD&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="kt"&gt;std_logic_vector&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;XLTY&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;XEQY&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;XGTY&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;std_logic&lt;/span&gt;
    &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;comp12bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Os procedimentos para instanciar e ligar o DUT ao &lt;em&gt;testbench&lt;/em&gt; s√£o os mesmos, portanto os omitiremos. A principal diferen√ßa est√° no processo gerador de est√≠mulos. No exemplo anterior, os est√≠mulos eram gerados programaticamente, um a um. Neste caso, o &lt;code&gt;process&lt;/code&gt; apenas percorre uma estrutura contendo os vetores de teste, injetando as entradas e comparando as sa√≠das com as do vetor. Os valores no vetor de testes devem ser previamente gerados (e.g. atrav√©s de software, simula√ß√£o ou manualmente).&lt;/p&gt;
&lt;p&gt;No pre√¢mbulo do &lt;code&gt;process&lt;/code&gt;, declara-se um novo tipo (&lt;code&gt;pattern_type&lt;/code&gt;) baseado no registro (&lt;code&gt;record&lt;/code&gt;), que ir√° conter os valores do vetor de testes. Este registro representa um teste auto-contido, portanto deve conter as entradas e todas as sa√≠das esperadas para estas entradas. Logo ap√≥s a declara√ß√£o do tipo do vetor de testes, declara-se o tipo do vetor em si (&lt;code&gt;pattern_array&lt;/code&gt;), seguido do vetor (&lt;code&gt;patterns&lt;/code&gt;) propriamente dito. O vetor foi declarado como contante pois ele n√£o deve ser modificado durante os testes.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;-- Exemplo cortesia do Prof. Edson S. Gomi (PCS)&lt;/span&gt;
&lt;span class="nc"&gt;st&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;type&lt;/span&gt; &lt;span class="n"&gt;pattern_type&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="k"&gt;record&lt;/span&gt;
    &lt;span class="c1"&gt;--  Entradas&lt;/span&gt;
    &lt;span class="n"&gt;xd&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;std_logic_vector&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;yd&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;std_logic_vector&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="c1"&gt;--  Saidas&lt;/span&gt;
    &lt;span class="n"&gt;xlty&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;std_logic&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;xeqy&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;std_logic&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;xgty&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;std_logic&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;record&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;type&lt;/span&gt; &lt;span class="n"&gt;pattern_array&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="k"&gt;array&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;natural&lt;/span&gt; &lt;span class="k"&gt;range&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="n"&gt;pattern_type&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;constant&lt;/span&gt; &lt;span class="n"&gt;patterns&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;pattern_array&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt;
    &lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;100000000000&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;010000000000&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
     &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;000000000001&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;000100000000&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
     &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;010000100000&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;000000000100&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
     &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;011111111111&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;100000000000&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
     &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;000100000000&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;000010000100&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
     &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;000011111000&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;100000000001&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
     &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;000000000000&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;000000000000&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Note que o vetor √© composto por 7 testes distintos, cada um com duas entradas e as tr√™s sa√≠das poss√≠veis.&lt;/p&gt;
&lt;p&gt;Com o vetor de testes declarado e preenchido, o teste √© simples: iterar sobre o vetor injetando as entradas e verificando as sa√≠das para cada um dos testes, at√© exauri-los. O restante do &lt;code&gt;process&lt;/code&gt; que faz isso pode ser visto abaixo.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;begin&lt;/span&gt;
  &lt;span class="c1"&gt;--  Para cada padrao de teste no vetor&lt;/span&gt;
  &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="n"&gt;patterns&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;range&lt;/span&gt; &lt;span class="k"&gt;loop&lt;/span&gt;
    &lt;span class="c1"&gt;--  Injeta as entradas&lt;/span&gt;
    &lt;span class="n"&gt;xd&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;patterns&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;xd&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;yd&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;patterns&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;yd&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="c1"&gt;--  Aguarda que o modulo produza a saida&lt;/span&gt;
    &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="c1"&gt;--  Verifica as saidas&lt;/span&gt;
    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;xlty&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;patterns&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;xlty&lt;/span&gt;
      &lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;bad check xlty&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;xeqy&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;patterns&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;xeqy&lt;/span&gt;
      &lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;back check xeqy&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;xgty&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;patterns&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;xgty&lt;/span&gt;
      &lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;bad check xgty&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;loop&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;false&lt;/span&gt; &lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;end of test&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;note&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="k"&gt;wait&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;hr&gt;
&lt;p&gt;&lt;a name="arquivoexterno"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Exemplo: lendo os casos de teste de um arquivo externo&lt;/h2&gt;
&lt;p&gt;Neste exemplo, vamos mostrar como ler os casos de teste de um arquivo externo. A primeira coisa a se fazer √© gerar os dados de teste. A entidade que testaremos √© uma ALU (&lt;em&gt;Arithmetic and Logic Unit&lt;/em&gt;, ou ULA, Unidade L√≥gica e Aritm√©tica), cuja declara√ß√£o da entidade pode ser vista abaixo.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;-- @brief ALU is signed and uses 2-complement&lt;/span&gt;
&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;alu&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt;  &lt;span class="kt"&gt;signed&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;63&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;-- inputs&lt;/span&gt;
    &lt;span class="n"&gt;F&lt;/span&gt;    &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;signed&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;63&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;-- output&lt;/span&gt;
    &lt;span class="n"&gt;S&lt;/span&gt;    &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt;  &lt;span class="kt"&gt;bit_vector&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;-- op selection&lt;/span&gt;
    &lt;span class="n"&gt;Z&lt;/span&gt;    &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;out&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt; &lt;span class="c1"&gt;-- zero flag&lt;/span&gt;
    &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;alu&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;A fun√ß√£o realizada √© definida pela entrada &lt;code&gt;S&lt;/code&gt;, sendo 0000 AND, 0001 OR, 0010 soma A+B, 0110 subtra√ß√£o A-B, 0111 sa√≠da alta se A&amp;lt;B e baixa caso contr√°rio, e 1100 NOR. Para gerar os casos de teste, escrevi um script em Python que gera alguns casos considerados importantes e depois 100 entradas aleat√≥rias &lt;code&gt;A&lt;/code&gt; e &lt;code&gt;B&lt;/code&gt;, calculando a sa√≠da esperada para cada uma das seis opera√ß√µes que a ALU pode realizar. O script pode ser visto abaixo.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;#-------------------------------------------------------------------------------&lt;/span&gt;
&lt;span class="c1"&gt;# @file alu_tb.py&lt;/span&gt;
&lt;span class="c1"&gt;# @brief Generate test cases for64-bit ALU&lt;/span&gt;
&lt;span class="c1"&gt;# @author Bruno Albertini (balbertini@usp.br)&lt;/span&gt;
&lt;span class="c1"&gt;# @date 20180807&lt;/span&gt;
&lt;span class="c1"&gt;#-------------------------------------------------------------------------------&lt;/span&gt;

&lt;span class="c1"&gt;# Given two long integers, print all test cases&lt;/span&gt;
&lt;span class="c1"&gt;# Format of this file is A B A&amp;amp;B A|B A+B A-B A&amp;lt;B?1:0 ~(A|B)&lt;/span&gt;
&lt;span class="c1"&gt;# Space is the separator between bit words&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;print_cases&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;out&lt;/span&gt;  &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;{0:064b}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot; &amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;out&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;{0:064b}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot; &amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;out&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;{0:064b}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot; &amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;out&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;{0:064b}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot; &amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;out&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;{0:064b}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot; &amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;out&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;{0:064b}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot; &amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;ai&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;63&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;bi&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;63&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;out&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;{0:064b}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;ai&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;bi&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot; &amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;out&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;{0:064b}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;out&lt;/span&gt;

&lt;span class="c1"&gt;# Corner cases&lt;/span&gt;
&lt;span class="n"&gt;print_cases&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# all zeroes&lt;/span&gt;
&lt;span class="n"&gt;print_cases&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# all ones&lt;/span&gt;
&lt;span class="n"&gt;print_cases&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# A zeroed, B all ones&lt;/span&gt;
&lt;span class="n"&gt;print_cases&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# A all ones, B zeroed&lt;/span&gt;

&lt;span class="c1"&gt;# Random cases&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;uuid&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;uuid&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;uuid4&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;int&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
    &lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;uuid&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;uuid4&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;int&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
    &lt;span class="n"&gt;print_cases&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Com este script, gerei um arquivo contendo oito valores bin√°rios de 64 bits em cada linha, sendo &lt;code&gt;A&lt;/code&gt;, &lt;code&gt;B&lt;/code&gt; e os seis resultados esperados, em ordem e separados por espa√ßo. Para gerar, basta executar o script com atrav√©s de um interpretador Python (testado com a vers√£o 2.7).&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="go"&gt;python alu_tb.py &amp;gt; alu_tb.dat&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Um exemplo de uma linha deste arquivo √© (note que √© UMA linha):&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;1001101010001010110011010000011110011001110000111010011111110111 1001001101000100001110011110100110000101010111011110110011100000 1001001000000000000010010000000110000001010000011010010011100000 1001101111001110111111011110111110011101110111111110111111110111 0010110111001111000001101111000100011111001000011001010011010111 0000011101000110100100110001111000010100011001011011101100010111 0000000000000000000000000000000000000000000000000000000000000000 0110010000110001000000100001000001100010001000000001000000001000&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Agora que temos o arquivo com os vetores de teste, podemos usar o vetor dentro do &lt;em&gt;testbench&lt;/em&gt;. Os procedimentos para instanciar a ALU como &lt;em&gt;DUT&lt;/em&gt; s√£o id√™nticos ao exemplo anterior, portanto pularei este passo.&lt;/p&gt;
&lt;p&gt;A primeira mudan√ßa necess√°ria √© incluir a declara√ß√£o de uso da biblioteca &lt;code&gt;textio&lt;/code&gt;, que √© utilizada justamente para ler arquivos. Esta declara√ß√£o deve ser colocada no pre√¢mbulo do arquivo VHDL que descreve o &lt;em&gt;testbench&lt;/em&gt;. √â importante notar que esta biblioteca n√£o √© sintetiz√°vel, portanto se o seu c√≥digo usar a &lt;code&gt;textio&lt;/code&gt; h√° grandes chances de ele n√£o ser sintetizado (h√° uma exce√ß√£o para a carga do conte√∫do inicial de mem√≥rias, que explorarei em outro artigo). De modo geral, utilize esta biblioteca somente em &lt;em&gt;testbench&lt;/em&gt;.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;library&lt;/span&gt; &lt;span class="nn"&gt;ieee&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;use&lt;/span&gt; &lt;span class="nn"&gt;std.textio.&lt;/span&gt;&lt;span class="k"&gt;all&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Com a declara√ß√£o de uso da biblioteca, podemos utilizar as fun√ß√µes de acesso a arquivos. Isso √© feito no pre√¢mbulo do processo que gera os est√≠mulos (que nesse caso n√£o gerar√° propriamente, mas sim ler√° os casos de um arquivo gerado previamente).&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nc"&gt;stim&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;file&lt;/span&gt; &lt;span class="n"&gt;tb_file&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;text&lt;/span&gt; &lt;span class="k"&gt;open&lt;/span&gt; &lt;span class="n"&gt;read_mode&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;alu_tb.dat&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;variable&lt;/span&gt; &lt;span class="n"&gt;tb_line&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;variable&lt;/span&gt; &lt;span class="n"&gt;space&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;character&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;variable&lt;/span&gt; &lt;span class="n"&gt;Av&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Bv&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;63&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;A declara√ß√£o &lt;code&gt;tb_file&lt;/code&gt; √© a principal, que efetivamente instancia o arquivo especificado como um objeto dentro do ambiente de simula√ß√£o. Neste caso, o arquivo foi aberto somente para leitura, mas √© poss√≠vel tamb√©m escrever em um arquivo (n√£o explorarei esta caracter√≠stica neste exemplo, mas ela pode ser √∫til para gravar os resultados em um arquivo externo). As vari√°veis &lt;code&gt;tb_line&lt;/code&gt; e &lt;code&gt;space&lt;/code&gt; s√£o usadas para ler o arquivo linha a linha, e tamb√©m para ler o caracter que separa os oito valores em uma linha (poderia ser qualquer caractere, basta que seja apenas um).&lt;/p&gt;
&lt;p&gt;O centro de uma verifica√ß√£o baseada em arquivo √© um la√ßo que percorre todo o arquivo lendo-o linha por linha. A cada linha, deve-se ler os valores das entradas e injet√°-las no DUT:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt; &lt;span class="n"&gt;endfile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tb_file&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;loop&lt;/span&gt;
  &lt;span class="c1"&gt;-- read inputs&lt;/span&gt;
  &lt;span class="n"&gt;readline&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tb_file&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tb_line&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tb_line&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Av&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="kt"&gt;signed&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Av&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tb_line&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;space&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tb_line&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Bv&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="kt"&gt;signed&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Bv&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Note que h√° a leitura da linha (&lt;code&gt;readline&lt;/code&gt;), seguida pela leitura de um &lt;code&gt;bit_vector&lt;/code&gt; de 64 bits (pois o sinal &lt;code&gt;Av&lt;/code&gt; foi declarado como tal), e a inje√ß√£o deste vetor no sinal &lt;code&gt;A&lt;/code&gt; ligado ao DUT. Repete-se o mesmo para o sinal &lt;code&gt;B&lt;/code&gt;, por√©m ao inv√©s de lermos outra linha, lemos um caractere (o espa√ßo), e outro vetor de 64 bits e, &lt;code&gt;Bv&lt;/code&gt; para injetarmos em &lt;code&gt;B&lt;/code&gt;. As leituras do &lt;code&gt;read&lt;/code&gt; s√£o posicionais, ou seja, ele sempre ler√° a quantidade de caracteres necess√°ria para preencher o receptor da leitura. Note que o caractere lido poderia ser qualquer coisa, o nome &lt;strong&gt;space&lt;/strong&gt; √© apenas um identificador. Note tamb√©m que n√£o usamos o valor lido neste sinal para nada, ele foi declarado com o √∫nico prop√≥sito de ler um caractere entre os vetores.&lt;/p&gt;
&lt;p&gt;Com os valores das entradas injetados, devemos verificar a sa√≠da para cada opera√ß√£o. Sabemos que os pr√≥ximos valores na linha s√£o vetores de 64 bits correspondentes √†s sa√≠das para todas as opera√ß√µes da ULA. A primeira opera√ß√£o √© o AND, portanto devemos configurar a ULA para isso (&lt;code&gt;S=0000&lt;/code&gt;) e comparar a sua sa√≠da com o valor lido do vetor de testes:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;-- AND test&lt;/span&gt;
&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tb_line&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;space&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tb_line&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;S&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;0000&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;equalSignedBitvector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
 &lt;span class="n"&gt;report&lt;/span&gt;
  &lt;span class="s"&gt;&amp;quot;AND checked failed.&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;LF&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
  &lt;span class="s"&gt;&amp;quot;  A=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;to_bstring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;LF&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
  &lt;span class="s"&gt;&amp;quot;  B=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;to_bstring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;LF&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
  &lt;span class="s"&gt;&amp;quot;res=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;to_bstring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;LF&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
  &lt;span class="s"&gt;&amp;quot;exp=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;to_bstring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
  &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Em ordem, fizemos neste √∫ltimo teste: leitura do caractere separador dos vetores, leitura do valor esperado (armazenado em &lt;code&gt;res&lt;/code&gt;), configura√ß√£o do DUT para fazer a opera√ß√£o esperada (&lt;code&gt;S=0000&lt;/code&gt;), espera para o DUT produzir a sa√≠da e finalmente a asser√ß√£o de que o valor correto foi produzido. A fun√ß√£o &lt;code&gt;equalSignedBitvector&lt;/code&gt; retorna verdadeiro se &lt;code&gt;F=res&lt;/code&gt; e foi usada pois &lt;code&gt;F&lt;/code&gt; √© do tipo &lt;code&gt;signed&lt;/code&gt; e &lt;code&gt;res&lt;/code&gt; do tipo &lt;code&gt;bit_vector&lt;/code&gt;, uma compara√ß√£o n√£o padr√£o. A fun√ß√£o pode ser vista no final desta se√ß√£o.&lt;/p&gt;
&lt;p&gt;Este padr√£o repete-se para todas as fun√ß√µes do DUT. O restante do arquivo de testes pode ser visto abaixo:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;  &lt;span class="c1"&gt;-- OR test&lt;/span&gt;
  &lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tb_line&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;space&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tb_line&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;S&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;0001&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;equalSignedBitvector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;report&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;OR checked failed.&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;LF&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;  A=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;to_bstring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;LF&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;  B=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;to_bstring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;LF&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;res=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;to_bstring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;LF&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;exp=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;to_bstring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="c1"&gt;-- ADD test&lt;/span&gt;
  &lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tb_line&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;space&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tb_line&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;S&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;0010&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;equalSignedBitvector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;report&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;ADD checked failed.&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;LF&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;  A=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;to_bstring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;LF&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;  B=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;to_bstring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;LF&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;res=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;to_bstring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;LF&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;exp=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;to_bstring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="c1"&gt;-- SUB test&lt;/span&gt;
  &lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tb_line&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;space&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tb_line&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;S&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;0110&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;equalSignedBitvector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;report&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;SUB checked failed.&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;LF&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;  A=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;to_bstring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;LF&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;  B=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;to_bstring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;LF&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;res=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;to_bstring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;LF&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;exp=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;to_bstring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="c1"&gt;-- SLT test&lt;/span&gt;
  &lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tb_line&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;space&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tb_line&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;S&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;0111&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;equalSignedBitvector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;report&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;SLT checked failed.&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;LF&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;  A=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;to_bstring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;LF&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;  B=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;to_bstring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;LF&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;res=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;to_bstring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;LF&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;exp=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;to_bstring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="c1"&gt;-- NOR test&lt;/span&gt;
  &lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tb_line&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;space&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tb_line&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;S&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;1100&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;equalSignedBitvector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;report&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;NOR checked failed.&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;LF&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;  A=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;to_bstring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;LF&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;  B=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;to_bstring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;LF&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;res=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;to_bstring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;LF&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;exp=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;to_bstring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;loop&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;O la√ßo ser√° repetido at√© que o arquivo acabe, ou seja, n√£o h√° mais linhas para serem lidas. Para cada linha, o DUT √© testado v√°rias vezes, para cada fun√ß√£o.&lt;/p&gt;
&lt;p&gt;No geral, este m√©todo √© √∫til quando n√£o se pode testar todas as entradas poss√≠veis para um determinado m√≥dulo, ou quando testamos a id√©ia do hardware modelando-a atrav√©s de uma prova de conceito em software. No primeiro caso, quando √© invi√°vel testar todas as entradas poss√≠veis, gera-se valores aleat√≥rios de forma a garantir uma cobertura m√≠nima dos testes. Um exemplo comum do segundo caso, quando modela-se em software primeiro, √© a criptografia. Come√ßa-se testando a id√©ia matematicamente, depois faz-se uma implementa√ß√£o em software onde pode-se testar o desempenho e a seguran√ßa do algoritmo (e da implementa√ß√£o), e s√≥ depois implementa-se um hardware (e nem sempre todo o algoritmo √© vantajoso em hardware). Neste caso, o motivo principal √© que temos uma implementa√ß√£o de refer√™ncia em software que confiamos estar correta (chamada de &lt;em&gt;golden model&lt;/em&gt; ou &lt;em&gt;reference model&lt;/em&gt;). Os valores para testar o hardware descrito podem ser facilmente retirados do software instrumentando-o de maneira que as entradas e sa√≠das das partes desejadas (e.g. fun√ß√µes) sejam gravadas em um arquivo. Este arquivo pode ent√£o ser lido pelo &lt;em&gt;testbench&lt;/em&gt; e usado como verifica√ß√£o.&lt;/p&gt;
&lt;p&gt;Fun√ß√£o de compara√ß√£o usada no exemplo:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;-- Funcao de comparacao de igualdade bit a bit entre signed e bit_vector&lt;/span&gt;
&lt;span class="k"&gt;function&lt;/span&gt; &lt;span class="n"&gt;equalSignedBitvector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;signed&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;length&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;length&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;idx&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;length&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;loop&lt;/span&gt;
      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;/=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;loop&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;else&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;function&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;hr&gt;
&lt;h1&gt;Parando uma simula√ß√£o baseada em eventos&lt;/h1&gt;
&lt;p&gt;Em ambos os exemplos, a parada da simula√ß√£o √© efetivada pelo &lt;code&gt;wait&lt;/code&gt; incondicional no final do &lt;em&gt;process&lt;/em&gt;, que suspende-o definitivamente dentro do escalonador de eventos do simulador. Quando todos os &lt;em&gt;process&lt;/em&gt; estiverem suspensos indefinidamente, a simula√ß√£o termina ap√≥s a estabiliza√ß√£o dos sinais combinat√≥rios pois n√£o h√° mais como nenhum sinal mudar de valor, portanto n√£o h√° mais o que simular.&lt;/p&gt;
&lt;p&gt;Contudo, h√° um problema: ainda estamos gerando o sinal de &lt;em&gt;clock&lt;/em&gt;. Em quase todos os simuladores baseados em eventos, o simples fato de existir um sinal peri√≥dico sendo gerado faz com que a simula√ß√£o seja executada indefinidamente. Para resolver o problema, podemos criar um sinal que habilita ou n√£o o &lt;em&gt;clock&lt;/em&gt;, substituindo a linha de gera√ß√£o por uma vers√£o contendo um sinal controlador, como abaixo:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;clk&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;simulando&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;not&lt;/span&gt; &lt;span class="n"&gt;clk&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="k"&gt;after&lt;/span&gt; &lt;span class="n"&gt;periodoClock&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;O sinal &lt;code&gt;simulando&lt;/code&gt; serve para controlar a gera√ß√£o do &lt;code&gt;clock&lt;/code&gt;. Se ele for alto, o &lt;code&gt;clock&lt;/code&gt; √© gerado normalmente, caso contr√°rio ele permanecer√° baixo devido ao AND inserido. O sinal deve ser declarado no pre√¢mbulo da arquitetura como um sinal de um bit. No come√ßo do &lt;code&gt;process&lt;/code&gt; (em qualquer lugar, i.e. ap√≥s o &lt;code&gt;begin&lt;/code&gt;), adicionamos a seguinte linha:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;simulando&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;E ao final do &lt;code&gt;process&lt;/code&gt; (antes do &lt;code&gt;wait&lt;/code&gt; incondicional), a seguinte:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;simulando&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Isso ir√° parar a gera√ß√£o do &lt;em&gt;clock&lt;/em&gt;, permitindo que o &lt;code&gt;wait&lt;/code&gt; incondicional pare o simulador. Este procedimento n√£o √© necess√°rio em todos os simuladores, mas √© necess√°rio em todos os que utilizamos nas aulas de gradua√ß√£o, portanto utilize-o.&lt;/p&gt;</content><category term="vhdl"></category><category term="vhdl"></category><category term="testbench"></category></entry><entry><title>Exerc√≠cio: Associa√ß√£o de Contadores</title><link href="https://balbertini.github.io/er0002-pt_BR.html" rel="alternate"></link><published>2018-10-12T12:29:36-03:00</published><updated>2019-02-26T17:24:30-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2018-10-12:/er0002-pt_BR.html</id><summary type="html">&lt;p&gt;Exerc√≠cio resolvido de sistemas digitais: associa√ß√£o de contadores.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Assunto: Associa√ß√£o de contadores&lt;/p&gt;
&lt;h2&gt;Enunciado&lt;/h2&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/er/20181012_associacaoContadores.png' align="left" width="50%" style="padding-right:5%" /&gt;&lt;/p&gt;
&lt;p&gt;Mostra-se no circuito ao lado uma associa√ß√£o de contadores. Sabe-se que o &lt;em&gt;load&lt;/em&gt; √© s√≠ncrono e o &lt;em&gt;reset&lt;/em&gt; ass√≠ncrono.&lt;br&gt;
Pede-se: (i) o m√≥dulo da contagem e (ii) as formas de onda nos pontos A e B.&lt;/p&gt;
&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;

&lt;h2&gt;Solu√ß√£o&lt;/h2&gt;
&lt;p&gt;Os contadores s√£o de m√≥dulo 16, ou seja, tem capacidade de contar de 0000 (0) a 1111 (15). O contador A est√° em um arranjo onde ele se auto-carrega de 0101 (5) quando seu valor atingir 1001 (9), formando um contador de 5 a 9, ou seja, m√≥dulo 5. O contador B est√° em um arranjo onde ele se auto-reseta quando sua contagem for 0011 (3). Contudo, como o &lt;em&gt;reset&lt;/em&gt; √© ass√≠ncrono, assim que este valor √© atingido o contador reseta-se de imediato, portanto os valores de contagem s√£o de 0000 (0) a 0010 (2), ou seja, m√≥dulo 3.&lt;/p&gt;
&lt;p&gt;Os contadores ainda est√£o em cascata, onde o valor de carga do contador A (1001) √© usado como &lt;em&gt;enable&lt;/em&gt; para o contador B. Nesse arranjo em cascata, mesmo que o &lt;em&gt;clock&lt;/em&gt; seja comum a ambos, podemos dizer que o contador B conta uma vez para cada ciclo completo de contagem do contador A.&lt;/p&gt;
&lt;p&gt;O m√≥dulo da contagem total √© 15. O ciclo de contagem em regime ser√°: 0101 0000, 0110 0000, 0111 0000, 1000 0000, 1001 0000, 0101 0001, 0110 0001, 0111 0001, 1000 0001, 1001 0001, 0101 0010, 0110 0010, 0111 0010, 1000 0010, 1001 0010. As formas de onda em A e em B podem ser descritas como:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A: √© alto quando o contador A estiver na contagem m√°xima, ou seja, a cada 4 pulsos de &lt;em&gt;clock&lt;/em&gt;, com dura√ß√£o de 1 pulso de &lt;em&gt;clock&lt;/em&gt;. Per√≠odo do sinal: 5 pulsos de &lt;em&gt;clock&lt;/em&gt;, &lt;em&gt;Duty-cycle&lt;/em&gt;: 20%.&lt;/li&gt;
&lt;li&gt;B: √© alto quando o contador B estiver na contagem m√°xima, ou seja, a cada 10 pulsos de &lt;em&gt;clock&lt;/em&gt;, com dura√ß√£o de 5 pulsos de &lt;em&gt;clock&lt;/em&gt;. Per√≠odo do sinal: 15 pulsos de &lt;em&gt;clock&lt;/em&gt;. &lt;em&gt;Duty-cycle&lt;/em&gt;: 33%&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A figura abaixo mostra os dois sinais, e tamb√©m as sa√≠das dos contadores. Repare que o primeiro ciclo √© diferente pois o contador A come√ßa em zero e n√£o com o valor de carga.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Forma de onda do Exerc√≠cio" src="/images/sd/er/er0002_onda.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://balbertini.github.io/extra/sd/er/er0002.zip"&gt;Download da descri√ß√£o em VHDL&lt;/a&gt;&lt;br&gt;
&lt;a href="https://balbertini.github.io/extra/sd/er/20181012_associacaoContadores.circ"&gt;Download do circuito no LogiSim&lt;/a&gt;&lt;/p&gt;
&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;</content><category term="sistemas digitais"></category><category term="sistemas digitais"></category><category term="exerc√≠cios resolvidos"></category><category term="associa√ß√£o de contadores"></category></entry><entry><title>Exerc√≠cio: An√°lise de Circuitos Realimentados</title><link href="https://balbertini.github.io/er0001-pt_BR.html" rel="alternate"></link><published>2018-10-09T23:38:44-03:00</published><updated>2019-02-26T17:24:30-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2018-10-09:/er0001-pt_BR.html</id><summary type="html">&lt;p&gt;Exerc√≠cio resolvido de sistemas digitais: an√°lise de circuitos realimentados.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Assunto: An√°lise de circuitos realimentados&lt;/p&gt;
&lt;h2&gt;Enunciado&lt;/h2&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/er/20180810_projFfTnoReset.png' align="left" width="35%" style="padding-right:5%" /&gt;&lt;/p&gt;
&lt;p&gt;O circuito ao lado √© um circuito digital sequencial realimentado, com entradas T e C, e sa√≠da Q. Analise-o por completo, apresentando:  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;As equa√ß√µes de excita√ß√£o e sa√≠da;&lt;/li&gt;
&lt;li&gt;A tabela de transi√ß√£o de estados e sa√≠da;&lt;/li&gt;
&lt;li&gt;An√°lise de corridas (e classifica√ß√£o se houve);&lt;/li&gt;
&lt;li&gt;A tabela de fluxo e sa√≠da;&lt;/li&gt;
&lt;li&gt;O diagrama de transi√ß√£o de estados da m√°quina.&lt;/li&gt;
&lt;/ul&gt;
&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;

&lt;h2&gt;Solu√ß√£o&lt;/h2&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/er/20180810_projFfTvBuffers.png' align="right" width="35%" style="padding-left:5%" /&gt;&lt;/p&gt;
&lt;p&gt;Vamos come√ßar colocando os buffers virtuais, como na figura ao lado. J√° aproveitei e nomeei todas as conex√µes existentes para facilitar o pr√≥ximo passo: a extra√ß√£o das equa√ß√µes.&lt;/p&gt;
&lt;div class="math"&gt;$$
I=\overline{T.C.Y_2}\\
J=\overline{\overline{T}.\overline{C}.\overline{Y_2}}\\
K=\overline{\overline{T}.\overline{C}.Y_2}\\
L=\overline{T.C.\overline{Y_2}}\\
M=\overline{Y_1.K.L}\\
N=\overline{T.\overline{C}.\overline{Y_1}}\\
O=\overline{T.\overline{C}.Y_1}\\
P=\overline{Y_2.O}
$$&lt;/div&gt;
&lt;p&gt;Resolvendo &lt;span class="math"&gt;\(M\)&lt;/span&gt; e &lt;span class="math"&gt;\(P\)&lt;/span&gt;:&lt;/p&gt;
&lt;div class="math"&gt;$$
M=\overline{Y_1.K.L}=\overline{Y_1.\overline{\overline{T}.\overline{C}.Y_2}.\overline{T.C.\overline{Y_2}}}=\overline{Y_1.(T+C+\overline{Y_2}).(\overline{T}+\overline{C}+Y_2)}\\
 =\overline{T.\overline{C}.Y_1+T.Y_1.Y_2+\overline{T}.C.Y_1+C.Y_1.Y_2+\overline{T}.Y_1.\overline{Y_2}+\overline{C}.Y_1.\overline{Y_2}}\\
P=\overline{Y_2.O}=\overline{Y_2.\overline{T.\overline{C}.Y_1}}=\overline{Y_2.(\overline{T}+C+\overline{Y_1})}=\overline{\overline{T}.Y_2+C.Y_2+\overline{Y_1}.Y_2}
$$&lt;/div&gt;
&lt;p&gt;E finalmente resolvendo &lt;span class="math"&gt;\(Y_1^*\)&lt;/span&gt; e &lt;span class="math"&gt;\(Y_2^*\)&lt;/span&gt;:&lt;/p&gt;
&lt;div class="math"&gt;$$
Y_1^*=\overline{I.J.M}\\
=\overline{\overline{T.C.Y_2}.\overline{\overline{T}.\overline{C}.\overline{Y_2}}.\overline{T.\overline{C}.Y_1+T.Y_1.Y_2+\overline{T}.C.Y_1+C.Y_1.Y_2+\overline{T}.Y_1.\overline{Y_2}+\overline{C}.Y_1.\overline{Y_2}}}\\
=T.C.Y_2+\overline{T}.\overline{C}.\overline{Y_2}+T.\overline{C}.Y_1+T.Y_1.Y_2+\overline{T}.C.Y_1+C.Y_1.Y_2+\overline{T}.Y_1.\overline{Y_2}+\overline{C}.Y_1.\overline{Y_2}\\
Y_2^*=\overline{N.P}=\overline{\overline{T.\overline{C}.\overline{Y_1}}.\overline{\overline{T}.Y_2+C.Y_2+\overline{Y_1}.Y_2}}\\
=T.\overline{C}.\overline{Y_1}+\overline{T}.Y_2+C.Y_2+\overline{Y_1}.Y_2\\
$$&lt;/div&gt;
&lt;p&gt;O pr√≥ximo passo √© preencher a tabela de transi√ß√£o de estados e sa√≠da. A tabela preenchida pode ser vista abaixo, para &lt;span class="math"&gt;\(Y_1^*Y_2^*\)&lt;/span&gt;. Os estados contornados s√£o estados est√°veis, ou seja, n√£o h√° mudan√ßa de estado para aquela entrada. Tamb√©m podemos ver a tabela de fluxo, com as sa√≠das.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Tabelas de transi√ß√£o de estados e de fluxo, com sa√≠das" src="https://balbertini.github.io/images/sd/er/er0001_tranTable.png"&gt;&lt;/p&gt;
&lt;p&gt;Na tabela de transi√ß√£o de estados, podemos fazer a an√°lise de corridas. Uma corrida acontece quando &lt;strong&gt;uma √∫nica mudan√ßa na entrada causa uma mudan√ßa em mais de uma vari√°vel de estado&lt;/strong&gt;. No nosso caso, uma √∫nica mudan√ßa em &lt;span class="math"&gt;\(T\)&lt;/span&gt; ou &lt;span class="math"&gt;\(C\)&lt;/span&gt; (tanto de zero para um quanto de um para zero, em qualquer uma das entradas), deve provocar uma mudan√ßa das vari√°veis de estado &lt;span class="math"&gt;\(Y_1Y_2\)&lt;/span&gt; de mais de um bit, ou seja, de 00 para 11 ou de 10 para 01 (ou vice-versa). Na tabela, podemos verificar que n√£o h√° corridas. Exemplo: na primeira linha estamos com as vari√°veis de estado &lt;span class="math"&gt;\(Y_1Y_2\)&lt;/span&gt; em 00. Nenhuma transi√ß√£o desta linha indica uma transi√ß√£o para 11, as transi√ß√µes poss√≠veis s√£o para 10, 00, 00 e 01, de acordo com as entradas 00, 01, 11 ou 10 respectivamente. Isso significa que, se estivermos no estado 00, uma mudan√ßa de um bit n√£o ocasionar√° uma mudan√ßa de mais de um bit nas vari√°veis de estado. Ainda precisamos analisar as colunas. Se estivermos no mesmo estado (00) e a entrada estiver em 00, as vari√°veis de estado indicam que o pr√≥ximo estado √© 10, que √© est√°vel, portanto esta mudan√ßa ir√° acontecer. Do estado 00 para 10 s√≥ h√° uma mudan√ßa nas vari√°veis de estado, ent√£o n√£o h√° corrida. Se estivermos no estado 00 e a entrada for 01 ou 11, o estado j√° √© est√°vel, ent√£o n√£o h√° mudan√ßa alguma nas vari√°veis de estado. No caso da entrada 10, o novo estado ser√° 01, que √© est√°vel e s√≥ muda um bit da vari√°vel de estado. Prossegue-se com a an√°lise para o restante da tabela e conclui-se que n√£o h√° corrida alguma. Ap√≥s a an√°lise de corridas, pode-se montar a tabela de fluxo (com sa√≠das), mostrada do lado direito da figura. Para facilitar, adotou-se a codifica√ß√£o de estados como &lt;span class="math"&gt;\(S_i\)&lt;/span&gt;, onde &lt;span class="math"&gt;\(i\)&lt;/span&gt; √© o n√∫mero decimal que representa as vari√°veis de estado &lt;span class="math"&gt;\(Y_1Y_2\)&lt;/span&gt;. √â prefer√≠vel fazer a an√°lise de corrida na tabela de transi√ß√£o em bin√°rio, pois √© mais f√°cil perceber as mudan√ßas.&lt;/p&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/er/er0001_diagrama.png' align="right" width="35%" style="padding-left:5%" /&gt;
Por √∫ltimo, montamos o diagrama de transi√ß√£o de estados, que fica conforme a figura ao lado.&lt;/p&gt;
&lt;p&gt;A an√°lise de comportamento √© opcional, mas √© relativamente f√°cil perceber que se trata de um &lt;em&gt;flip-flop&lt;/em&gt; tipo T sens√≠vel a borda de descida. A an√°lise pode ser feita da seguinte forma: come√ßa-se no estado &lt;span class="math"&gt;\(S_0\)&lt;/span&gt; (pode ser qualquer estado) e analisa-se o comportamento das entradas. Percebe-se que, a √∫nica maneira de sair desse estado √© se a entrada &lt;span class="math"&gt;\(C\)&lt;/span&gt; for zero, de onde conclui-se que o circuito √© algo que espera esta entrada virar zero. Nota-se ainda que, quando isso acontece, a sa√≠da muda caso a entrada &lt;span class="math"&gt;\(T\)&lt;/span&gt; seja um, caso contr√°rio n√£o muda. Todos os estados "seguram" a borda da entrada &lt;span class="math"&gt;\(C\)&lt;/span&gt;, ou seja, independentemente se formos para &lt;span class="math"&gt;\(S_1\)&lt;/span&gt; ou &lt;span class="math"&gt;\(S_2\)&lt;/span&gt; a partir do &lt;span class="math"&gt;\(S_0\)&lt;/span&gt;, a entrada &lt;span class="math"&gt;\(C\)&lt;/span&gt; n√£o altera mais o comportamento da m√°quina exceto se for para um e depois para zero novamente. Poder√≠amos dizer que os estados tem estas fun√ß√µes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span class="math"&gt;\(S_0\)&lt;/span&gt;: sa√≠da zero, aguarda &lt;span class="math"&gt;\(C=0\)&lt;/span&gt; e inverte a sa√≠da se &lt;span class="math"&gt;\(T=1\)&lt;/span&gt;;&lt;/li&gt;
&lt;li&gt;&lt;span class="math"&gt;\(S_1\)&lt;/span&gt;: sa√≠da um, n√£o deve-se inverter a sa√≠da, aguarda que &lt;span class="math"&gt;\(C=1\)&lt;/span&gt;;&lt;/li&gt;
&lt;li&gt;&lt;span class="math"&gt;\(S_2\)&lt;/span&gt;: sa√≠da zero, n√£o deve-se inverter a sa√≠da, aguarda que &lt;span class="math"&gt;\(C=1\)&lt;/span&gt;;&lt;/li&gt;
&lt;li&gt;&lt;span class="math"&gt;\(S_3\)&lt;/span&gt;: sa√≠da um, aguarda &lt;span class="math"&gt;\(C=0\)&lt;/span&gt; e inverte a sa√≠da se &lt;span class="math"&gt;\(T=1\)&lt;/span&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Repare que o efeito &lt;em&gt;toggle&lt;/em&gt; s√≥ acontece nas arestas horizontais, de &lt;span class="math"&gt;\(S_0\)&lt;/span&gt; para &lt;span class="math"&gt;\(S_1\)&lt;/span&gt; e de &lt;span class="math"&gt;\(S_3\)&lt;/span&gt; para &lt;span class="math"&gt;\(S_2\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://balbertini.github.io/extra/sd/er/20181009_projFfT.circ"&gt;Download do circuito no LogiSim&lt;/a&gt;&lt;/p&gt;
&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;

&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width &lt; 768) ? "left" : align;
        indent = (screen.width &lt; 768) ? "0em" : indent;
        linebreak = (screen.width &lt; 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="sistemas digitais"></category><category term="sistemas digitais"></category><category term="exerc√≠cios resolvidos"></category><category term="an√°lise"></category><category term="circuitos realimentados"></category></entry><entry><title>Arquitetura</title><link href="https://balbertini.github.io/vhdl_architecture-pt_BR.html" rel="alternate"></link><published>2018-10-04T20:45:55-03:00</published><updated>2020-09-23T08:41:56-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2018-10-04:/vhdl_architecture-pt_BR.html</id><summary type="html">&lt;p&gt;Arquiteturas em VHDL.&lt;/p&gt;</summary><content type="html">&lt;p&gt;As descri√ß√µes em VHDL sempre possuem uma &lt;a href="https://balbertini.github.io/vhdl_entity-pt_BR.html"&gt;entidade&lt;/a&gt;, que define as interfaces do m√≥dulo descrito. Por√©m, a entidade n√£o descreve a funcionalidade, que √© descrita na arquitetura.&lt;/p&gt;
&lt;p&gt;Assim como a entidade √© a &lt;em&gt;cara&lt;/em&gt; do m√≥dulo que est√° descrevendo, a arquitetura, declarada pela palavra reservada &lt;code&gt;architecture&lt;/code&gt;, √© o &lt;em&gt;corpo&lt;/em&gt; da sua descri√ß√£o. Na arquitetura √© onde descrevemos a funcionalidade do componente, ou seja, onde as coisas realmente acontecem. No diagrama esquem√°tico, seria o equivalente de mostrar o que tem dentro do s√≠mbolo do seu componente.&lt;/p&gt;
&lt;p&gt;Faz sentido descrever um componente com entradas e sa√≠das mas sem nada dentro? Claro que n√£o, por isso toda entidade deve ter ao menos uma arquitetura pois, sem ela, o componente n√£o tem fun√ß√£o. √â poss√≠vel que uma entidade tenha varias arquiteturas, cada uma realizando a tarefa que seu componente se prop√µe a fazer de uma maneira diferente. Contudo, uma arquitetura s√≥ pode pertencer a uma entidade. De fato, todas as arquiteturas pertencentes a uma entidade devem estar no mesmo arquivo que ela, depois da declara√ß√£o da entidade.&lt;/p&gt;
&lt;p&gt;A sintaxe de uma arquitetura em VHDL √©:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;nome_da_arquitetura&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="nc"&gt;nome_da_entidade&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
    &lt;span class="n"&gt;declaracoes&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
    &lt;span class="n"&gt;declaracoes_combinatorias&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="nc"&gt;nome_da_arquitetura&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Onde &lt;code&gt;declaracoes&lt;/code&gt; √© a lista de elementos que ser√£o utilizados na sua arquitetura, como sinais e componentes. As &lt;code&gt;declaracoes_combinatorias&lt;/code&gt; s√£o todas as declara√ß√µes concorrentes desta descri√ß√£o, como uma atribui√ß√£o (condicional ou n√£o), uma inst√¢ncia de componente ou um &lt;code&gt;process&lt;/code&gt;. O &lt;code&gt;nome_da_arquitetura&lt;/code&gt; pode ser qualquer nome v√°lido em VHDL, e o &lt;code&gt;nome_da_entidade&lt;/code&gt; deve ser o nome da entidade que esta arquitetura descreve.&lt;/p&gt;
&lt;p&gt;Como uma entidade pode ter mais de uma arquitetura, √© comum termos um arquivo VHDL com v√°rias arquiteturas pertencentes a mesma entidade. Isso √© √∫til pois podemos ter o mesmo componente descrito de maneiras diferentes (e.g. otimizado para velocidade, consumo de energia ou √°rea, descrito especificamente para uma tecnologia (ASIC, FPGA, etc.), ou at√© mesmo com estilos de descri√ß√£o diferentes). N√£o h√° uma conven√ß√£o, mas se n√£o for utilizado nenhum mecanismo expl√≠cito para escolher uma das arquiteturas dispon√≠veis, a maioria dos softwares de s√≠ntese utiliza a √∫ltima arquitetura encontrada no arquivo.&lt;/p&gt;
&lt;h2&gt;Escolha expl√≠cita da arquitetura&lt;/h2&gt;
&lt;p&gt;A entidade, exceto se for uma entidade &lt;em&gt;toplevel&lt;/em&gt; (entidade m√°xima, que representa o circuito como um todo), sempre ser√° usada como componente por uma arquitetura pertencente a outra entidade. Na pr√°tica, isso significa que h√° uma entidade raiz, que representa o circuito todo e possui ao menos uma arquitetura. Nesta  arquitetura, outras entidades filhas podem usadas como componentes para formar o circuito. Cada entidade filha usada pode usar outras como componente e assim por diante, criando uma √°rvore.&lt;/p&gt;
&lt;p&gt;Considerando que o componente j√° foi declarado corretamente, h√° duas possibilidades de inst√¢ncia. Sem escolher qual arquitetura, a inst√¢ncia segue a seguinte sintaxe:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;nome_da_instancia&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
  &lt;span class="n"&gt;nome_da_entidade&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nome_da_arquitetura&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;generic&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;atribuicao_de_parametros&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;atribuicao_de_portas&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Isto far√° com que o sintetizador escolha a √∫ltima arquitetura descrita (ou a que for configurada no sintetizador). Contudo, esta sintaxe existe pois, na maioria das vezes, as entidades s√≥ possuem uma arquitetura. Voc√™ pode fazer uma escolha expl√≠cita da arquitetura, pr√°tica recomendada caso a entidade possua mais de uma. Para isso, basta modificar a declara√ß√£o da inst√¢ncia para a sintaxe completa, como abaixo:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;nome_da_intancia&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
  &lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;work&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;nome_da_entidade&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nome_da_arquitetura&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;generic&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;atribuicao_de_parametros&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;atribuicao_de_portas&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;A palavra reservada &lt;code&gt;work&lt;/code&gt; faz refer√™ncia ao pacote de trabalho local, onde se encontram todas as entidades que foram desenvolvidas por voc√™ e n√£o foram colocadas em um pacote. Caso voc√™ tenha colocado sua entidade em um pacote ou esteja usando uma entidade que voc√™ n√£o fez e que est√° em um pacote, deve substituir &lt;code&gt;work&lt;/code&gt; pelo pacote onde a entidade se encontra. Algumas ferramentas de s√≠ntese exigem que voc√™ declare a utiliza√ß√£o da bilbioteca &lt;code&gt;work&lt;/code&gt; explicitamente colocando &lt;code&gt;use work.nome_da_entidade&lt;/code&gt; ou &lt;code&gt;use work.all&lt;/code&gt; no pre√¢mbulo do seu arquivo.&lt;/p&gt;
&lt;h3&gt;Exemplo&lt;/h3&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/vhdl/mux2to1_arquitetura.png' width="39%" align="right" style="padding-left:5%" /&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;mux2to1&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
    &lt;span class="k"&gt;port&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;    &lt;span class="k"&gt;in&lt;/span&gt;  &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt;    &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;    &lt;span class="k"&gt;out&lt;/span&gt;   &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="nc"&gt;mux2to1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;whenelse&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="nc"&gt;mux2to1&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
    &lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="nc"&gt;whenelse&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;struct&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="nc"&gt;mux2to1&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
    &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="k"&gt;or&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="k"&gt;or&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="nc"&gt;struct&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Acima, vemos um componente com duas arquiteturas, representadas tanto na descri√ß√£o VHDL quanto na representa√ß√£o gr√°fica. Note que o componente possui uma entidade externa camada &lt;code&gt;mux2to1&lt;/code&gt;, que define as interfaces de entrada e sa√≠da. Por dentro, tem duas arquiteturas, que definem o comportamento do componente de duas maneiras distintas. Por padr√£o, se n√£o especificarmos explicitamente, o software de s√≠ntese ir√° considerar a √∫ltima arquitetura descrita como sendo a que ele deve utilizar, por isso ligamos as interfaces do desenho na arquitetura padr√£o.&lt;/p&gt;
&lt;p&gt;A arquitetura padr√£o nesse caso √© a √∫ltima descrita, chamada &lt;code&gt;struct&lt;/code&gt;, e descreve estruturalmente o multiplexador usando portas l√≥gicas. Note que o nome &lt;code&gt;struct&lt;/code&gt; n√£o √© uma palavra reservada e sim um identificador v√°lido em VHDL, portanto poderia ser qualquer outro. √â recomendado que o nome da arquitetura reflita o que foi feito, nesse caso uma descri√ß√£o estrutural. Podemos escolher a outra arquitetura se desejarmos, que √© chamada de &lt;code&gt;whenelse&lt;/code&gt;. Note que ambas fazem a mesma coisa, mas de maneiras diferentes.&lt;/p&gt;
&lt;p&gt;No exemplo abaixo, temos a descri√ß√£o de uma arquitetura pertencente a uma &lt;code&gt;entidade_mae&lt;/code&gt; que utiliza o multiplexador como componente tr√™s vezes. Na inst√¢ncia &lt;code&gt;mux1&lt;/code&gt; (linha 12), a arquitetura √© deixada a escolha do sintetizador, portanto ser√° a arquitetura &lt;code&gt;struct&lt;/code&gt;. Na inst√¢ncia &lt;code&gt;mux2&lt;/code&gt; (linha 13), a arquitetura utilizada ainda √© a struct, mas dessa vez instru√≠mos explicitamente o sintetizador a utiliz√°-la. Por √∫ltimo, na inst√¢ncia &lt;code&gt;mux3&lt;/code&gt; (linha 14) o projetista escolheu explicitamente a arquitetura &lt;code&gt;whenelse&lt;/code&gt;.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;architecture&lt;/span&gt; &lt;span class="nc"&gt;muxes&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="nc"&gt;entidade_mae&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;component&lt;/span&gt; &lt;span class="nc"&gt;mux2to1&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
    &lt;span class="k"&gt;port&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;    &lt;span class="k"&gt;in&lt;/span&gt;  &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt;    &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;    &lt;span class="k"&gt;out&lt;/span&gt;   &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;component&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;o1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;o2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;o3&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
  &lt;span class="n"&gt;mux1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;mux2to1&lt;/span&gt; &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;o1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;mux2&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;work&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mux2to1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;struct&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;o2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;mux3&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;work&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mux2to1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;whenelse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;o3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="nc"&gt;muxes&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Lembre-se que esta √© a descri√ß√£o de um hardware, portanto as tr√™s inst√¢ncias s√£o tr√™s circuitos &lt;strong&gt;diferentes&lt;/strong&gt;, cada um com seu pr√≥prio arranjo de portas l√≥gicas. A diferen√ßa √© que o &lt;code&gt;mux1&lt;/code&gt; e o &lt;code&gt;mux2&lt;/code&gt; s√£o id√™nticos, ou seja, se voc√™ observar o circuito gerado, s√£o duas c√≥pias do mesmo circuito. O &lt;code&gt;mux3&lt;/code&gt;, apesar de ter mesma funcionalidade, √© diferente. Se voc√™ sintetizar o circuito acima para um circuito real em sil√≠cio, poder√° ver em um microsc√≥pio duas √°reas id√™nticas e uma diferente, todas recebendo as mesmas entradas e cada uma com sua pr√≥pria sa√≠da. &lt;strong&gt;Nota:&lt;/strong&gt; este par√°grafo √© uma simplifica√ß√£o did√°tica, se tiver conhecimento de s√≠ntese de ASICs e quiser saber mais detalhes do que acontece durante a s√≠ntese, me escreva.&lt;/p&gt;
&lt;p&gt;Quando a entidade possui diversas arquiteturas, se uma determinada arquitetura n√£o for escolhida por nenhuma inst√¢ncia, o sintetizador n√£o a considerar√°. Isso significa que n√£o ser√° gerado nenhum circuito para aquela arquitetura, portanto ter v√°rias arquiteturas n√£o significa que o circuito gerado ir√° gastar mais energia ou ocupar mais √°rea, pois s√≥ as arquiteturas utilizadas ser√£o de fato sintetizadas.&lt;/p&gt;</content><category term="vhdl"></category><category term="vhdl"></category><category term="basic"></category></entry><entry><title>M√°quinas de Estados Finitas</title><link href="https://balbertini.github.io/fsmbasics-pt_BR.html" rel="alternate"></link><published>2018-09-25T17:13:05-03:00</published><updated>2019-08-30T16:26:09-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2018-09-25:/fsmbasics-pt_BR.html</id><summary type="html">&lt;p&gt;Introdu√ß√£o a m√°quinas de estados finitas em sistemas digitais.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Uma m√°quina de estados √© uma representa√ß√£o matem√°tica de um sistema dependente de tempo. √â composta por estados e transi√ß√µes. Cada estado representa o sistema em um determinado momento no tempo e n√£o √© poss√≠vel uma m√°quina de estados estar em dois estados ao mesmo tempo. Quando uma m√°quina est√° em um estado, ela aguarda que as condi√ß√µes para uma transi√ß√£o sejam atingidas e, assim que forem, muda para o estado indicado por esta transi√ß√£o, repetindo o ciclo o ciclo. Cada m√°quina possui um estado inicial, onde a m√°quina come√ßa, e pode ter um ou mais estados finais (ou de aceita√ß√£o), indicando que a m√°quina terminou a tarefa computacional. √â um modelo de computa√ß√£o bastante utilizado para modelar circuitos sequenciais.&lt;/p&gt;
&lt;p&gt;Tecnicamente, a m√°quina de estados finita que estudamos em sistemas digitais √© um &lt;strong&gt;transdutor de estados finitos&lt;/strong&gt;. A diferen√ßa prim√°ria entre uma m√°quina de estados e o transdutor √© que este √∫ltimo n√£o tem um estado de aceita√ß√£o.&lt;/p&gt;
&lt;p&gt;Uma m√°quina de estados finita pode ser especificada por uma s√™xtupla do tipo:
&lt;/p&gt;
&lt;div class="math"&gt;$$
M=(S, S_0, \Sigma, \Lambda, T, G)
$$&lt;/div&gt;
&lt;p&gt;
Onde &lt;span class="math"&gt;\(S\)&lt;/span&gt; √© o conjunto de estados poss√≠veis e &lt;span class="math"&gt;\(S_0\)&lt;/span&gt; √© o estado inicial, &lt;span class="math"&gt;\(\Sigma\)&lt;/span&gt; e &lt;span class="math"&gt;\(\Lambda\)&lt;/span&gt; denotam os alfabetos da m√°quina, respectivamente de entrada e de sa√≠da, &lt;span class="math"&gt;\(T\)&lt;/span&gt; √© a fun√ß√£o de transi√ß√£o de estados e &lt;span class="math"&gt;\(G\)&lt;/span&gt; a fun√ß√£o de sa√≠da.&lt;/p&gt;
&lt;p&gt;As fun√ß√µes de transi√ß√£o de estados e de sa√≠da s√£o dadas por &lt;span class="math"&gt;\(T:S\times\Sigma\rightarrow S\)&lt;/span&gt; e &lt;span class="math"&gt;\(G:S\rightarrow\Lambda\)&lt;/span&gt; (Moore) ou &lt;span class="math"&gt;\(G:S\times\Sigma\rightarrow\Lambda\)&lt;/span&gt; (Mealy).&lt;/p&gt;
&lt;p&gt;√â importante notar que o alfabeto de entrada e sa√≠da em sistemas digitais √© sempre &lt;span class="math"&gt;\(\{0,1\}\)&lt;/span&gt; pois, quando o circuito for realizado, todos os sinais da m√°quina ser√£o bin√°rios. Isso significa que &lt;span class="math"&gt;\(\Sigma=\Lambda\)&lt;/span&gt;, ent√£o alguns autores simplificam a m√°quina de estados para uma qu√≠ntupla:
&lt;/p&gt;
&lt;div class="math"&gt;$$
M=(S, S_0, \Sigma, T, G)
$$&lt;/div&gt;
&lt;p&gt;Outra diferen√ßa not√°vel das m√°quinas de estado finitas em sistemas digitais em rela√ß√£o ao conceito matem√°tico √© o determinismo. Em sistemas digitais, as m√°quinas podem ter transi√ß√µes aceitando &lt;span class="math"&gt;\(\epsilon\)&lt;/span&gt;, ou seja, transi√ß√µes que acontecem independentemente da entrada, mas n√£o podem ter mais de uma transi√ß√£o para a mesma entrada. Isso significa que as implementa√ß√µes de m√°quinas de estados finitas em sistemas digitais s√£o sempre determin√≠sticas.&lt;/p&gt;
&lt;h2&gt;Conceito de m√°quina de estados finita em sistemas digitais&lt;/h2&gt;
&lt;p&gt;J√° afirmamos que a m√°quina de estados em sistemas digitais n√£o tem um estado de aceita√ß√£o. Isso significa que a m√°quina √© infinita, ou seja, executa para sempre. O modelo de estado de aceita√ß√£o pode ser facilmente implementado colocando uma transi√ß√£o para o pr√≥prio estado (la√ßo) e fazendo com que este estado produza uma sa√≠da pertinente √† tarefa cuja m√°quina deveria realizar.&lt;/p&gt;
&lt;p&gt;Em sistemas digitais, a m√°quina de estados representa um circuito sequencial. Quando s√≠ncrono, h√° uma transi√ß√£o de estados em cada borda de &lt;em&gt;clock&lt;/em&gt; (normalmente especifica-se somente uma das bordas, e.g. borda de subida). A transi√ß√£o pode ser para o mesmo estado (la√ßo) ou vazia (incondicional), mas sempre ocorre na borda do &lt;em&gt;clock&lt;/em&gt;. Quando ass√≠ncrona, a transi√ß√£o ocorre assim que uma das condi√ß√µes para transi√ß√£o √© satisfeita, portanto n√£o √© aconselh√°vel especificar transi√ß√µes vazias neste tipo de m√°quina.&lt;/p&gt;
&lt;p&gt;Como a m√°quina √© determin√≠stica, em cada estado deve haver transi√ß√µes contemplando cada combina√ß√£o poss√≠vel de entrada.&lt;/p&gt;
&lt;p&gt;Revisitando a qu√≠ntupla &lt;span class="math"&gt;\(M=(S, S_0, \Sigma, T, G)\)&lt;/span&gt;, podemos fazer algumas considera√ß√µes sobre sua aplica√ß√£o em sistemas digitais. &lt;span class="math"&gt;\(S_0\)&lt;/span&gt; √© o estado que a m√°quina deve assumir inicialmente, portanto deve ser o estado da m√°quina ap√≥s um &lt;em&gt;reset&lt;/em&gt;. Normalmente o &lt;em&gt;reset&lt;/em&gt; das m√°quinas de estados √© ass√≠ncrono e ativo baixo por motivos hist√≥ricos ligados a implementa√ß√£o, mas n√£o h√° impedimentos para adotar-se outras abordagens, desde que possa-se colocar a m√°quina explicitamente no estado inicial de alguma forma. O alfabeto &lt;span class="math"&gt;\(\Sigma\)&lt;/span&gt; j√° foi dito que √© sempre o bin√°rio &lt;span class="math"&gt;\({0,1}\)&lt;/span&gt;, mas √© poss√≠vel existir entradas e sa√≠das com mais de um bit. O &lt;span class="math"&gt;\(S\)&lt;/span&gt; representa o conjunto de estados poss√≠veis e na implementa√ß√£o em sistemas digitais, sempre √© um elemento de mem√≥ria. As fun√ß√µes &lt;span class="math"&gt;\(T\)&lt;/span&gt; (fun√ß√£o de excita√ß√£o ou de pr√≥ximo estado) e &lt;span class="math"&gt;\(S\)&lt;/span&gt; (fun√ß√£o de sa√≠da) s√£o circuitos combinat√≥rios. A figura abaixo ilustra o modelo.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Modelo de FSM" src="https://balbertini.github.io/images/sd/fsmmodel.png"&gt;&lt;/p&gt;
&lt;p&gt;A linha pontilhada √© opcional e, quando presente, indica que a m√°quina √© uma m√°quia de Mealy.&lt;/p&gt;
&lt;h2&gt;Representa√ß√£o Gr√°fica&lt;/h2&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/fsmexemplo2.png' width="15%" align="right" style="padding-left:5%" /&gt;
A representa√ß√£o gr√°fica de uma m√°quina de estados finita em sistemas digitais √© o diagrama de transi√ß√£o de estados. Cada estado √© representado por um c√≠rculo e as transi√ß√µes s√£o representadas por setas. Na figura ao lado podemos ver uma m√°quina de estados com dois estados (&lt;em&gt;A&lt;/em&gt; e &lt;em&gt;B&lt;/em&gt;) e quatro transi√ß√µes. Nas transi√ß√µes est√£o especificadas que entradas levam a tomada daquela transi√ß√£o.&lt;/p&gt;
&lt;p&gt;No caso ao lado, a m√°quina √© de Mealy, ent√£o a transi√ß√£o especifica um par &lt;em&gt;e/s&lt;/em&gt; onde &lt;em&gt;e&lt;/em&gt; √© a entrada e &lt;em&gt;s&lt;/em&gt; √© a sa√≠da. Exemplo: se estivermos no estado &lt;em&gt;B&lt;/em&gt; e a entrada for &lt;em&gt;0&lt;/em&gt;, continuaremos no estado &lt;em&gt;B&lt;/em&gt; e produziremos sa√≠da &lt;em&gt;1&lt;/em&gt;; j√° se estivermos no mesmo estado mas a entrada for &lt;em&gt;1&lt;/em&gt;, iremos para o estado &lt;em&gt;A&lt;/em&gt; e produziremos sa√≠da &lt;em&gt;0&lt;/em&gt;. A especifica√ß√£o formal desta m√°quina √©:&lt;/p&gt;
&lt;div class="math"&gt;$$M=(S, S_0, \Sigma, T, G)\\
S=\{A,B\}\quad S_0=A\quad \Sigma=\{1,0\}\\
T=\{(A,0)\rightarrow A,(A,1)\rightarrow B,(B,0)\rightarrow B,(B,1)\rightarrow A\}\\
G=\{(A,0)\rightarrow 0,(A,1)\rightarrow 1,(B,0)\rightarrow 1,(B,1)\rightarrow 0\}$$&lt;/div&gt;
&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/fsmexemplo1.png' width="15%" align="right" style="padding-left:5%" /&gt;
Uma m√°quina de Moore pode √© representada da mesma forma, por√©m o c√≠rculo representando o estado √© cortado ao meio e a sa√≠da √© especificada na parte inferior, como na figura ao lado. As transi√ß√µes, representadas pelas arestas, possuem somente a entrada &lt;em&gt;e&lt;/em&gt; especificada, pois nesta m√°quina a sa√≠da n√£o depende da entrada e sim somente do estado.&lt;/p&gt;
&lt;p&gt;A especifica√ß√£o formal √© similar, por√©m a fun√ß√£o de de sa√≠da (&lt;span class="math"&gt;\(G\)&lt;/span&gt;) n√£o possui a entrada:&lt;/p&gt;
&lt;div class="math"&gt;$$M=(S, S_0, \Sigma, T, G)\\
S=\{A,B\}\quad S_0=A\quad \Sigma=\{1,0\}\\
T=\{(A,0)\rightarrow A,(A,1)\rightarrow B,(B,0)\rightarrow B,(B,1)\rightarrow A\}\\
G=\{A\rightarrow 0,B\rightarrow 1\}$$&lt;/div&gt;
&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;

&lt;h2&gt;S√≠ntese&lt;/h2&gt;
&lt;p&gt;Dado que &lt;span class="math"&gt;\(S\)&lt;/span&gt; √© um elemento de mem√≥ria, podemos usar qualquer um dos elementos de mem√≥ria dispon√≠veis para implement√°-lo. √â comum a utiliza√ß√£o de &lt;em&gt;flip-flops&lt;/em&gt;, mas at√© mesmo mem√≥rias capacitivas podem ser utilizadas.
J√° as fun√ß√µes de transi√ß√£o de estados (tamb√©m chamada de fun√ß√£o de pr√≥ximo estado ou de excita√ß√£o) e de sa√≠da, por serem circuitos combinat√≥rios, s√£o sintetizadas como tal. Pode-se usar qualquer t√©cnica de s√≠ntese de circuitos combinat√≥rios para ajudar, desde √°lgebra booleana at√© mapas de Karnaugh. O mais comum √© montar uma tabela verdade com os estados e depois sintetizar usando-se minimiza√ß√£o por Karnaugh e desenho direto das equa√ß√µes em forma de diagrama esquem√°tico.&lt;/p&gt;
&lt;p&gt;Os passos para a s√≠ntese de uma m√°quina de estados finita em sistemas digitais s√£o:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Entender o problema (enunciado, texto, vari√°veis de entrada e sa√≠da, temporiza√ß√£o, etc.);&lt;/li&gt;
&lt;li&gt;Elaborar uma descri√ß√£o funcional da m√°quina;  &lt;ul&gt;
&lt;li&gt;Elaborar um diagrama de transi√ß√£o de estados;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Obter a tabela de estados e a tabela de sa√≠das;&lt;ul&gt;
&lt;li&gt;Reduzir as tabelas;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Designa√ß√£o de estados;&lt;/li&gt;
&lt;li&gt;Tabela de excita√ß√£o;&lt;/li&gt;
&lt;li&gt;Projeto dos circuitos combinat√≥rios (fun√ß√µes &lt;span class="math"&gt;\(T\)&lt;/span&gt; e &lt;span class="math"&gt;\(G\)&lt;/span&gt;);&lt;/li&gt;
&lt;li&gt;Montagem do diagrama l√≥gico (esquem√°tico).&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;O passo 1 consiste em entender o comportamento do sistema sequencial sendo modelado. Em muitos casos o diagrama esquem√°tico est√° dispon√≠vel, simplificando este passo. Em outras palavras, √© poss√≠vel sintetizar uma m√°quina de estados sem o conhecimento da aplica√ß√£o, desde que o passo 1 ou o passo 2 estejam dispon√≠veis. Neste passo, voc√™ deve identificar todas as entradas e sa√≠das da m√°quina de estados, assim como o momento exato onde cada sa√≠da deve ser gerada. Se for necess√°rio, fa√ßa uma carta de tempos do funcionamento da m√°quina. Neste passo tamb√©m devemos escolher se usaremos o modelo de Melay ou de Moore.&lt;/p&gt;
&lt;p&gt;No passo 2 devemos identificar o n√∫mero de estados necess√°rios e anotar os momentos em que as sa√≠das ser√£o produzidas. A forma mais comum √© expressar a sa√≠da deste passo com um diagrama de transi√ß√£o de estados. Pode ser √∫til nomear os estados no final do desenho do diagrama, pois este tende a mudar conforme se exercita a m√°quina. O teste de mesa (exercitar a m√°quina com entradas), √© crucial para termos certeza que o diagrama atende a solu√ß√£o do problema. Tamb√©m n√£o precisamos nos preocupar com estados excessivos ou redundantes pois a m√°quina ser√° minimizada posteriormente.&lt;/p&gt;
&lt;p&gt;A tabela de estados e a tabela de sa√≠da costumam ser montadas juntas, no passo 3. Esta tabela tem as mesmas informa√ß√µes que o passo 2, por√©m em forma de tabela. Opcionalmente podemos minimizar as tabelas usando um &lt;a href="https://balbertini.github.io/fsmstatereduction-pt_BR.html"&gt;m√©todo de minimiza√ß√£o de m√°quinas de estado&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Com as tabelas minimizadas, o passo 4 visa qualificar e quantificar o elemento de mem√≥ria a ser usado (&lt;span class="math"&gt;\(S\)&lt;/span&gt;). Normalmente usamos &lt;span class="math"&gt;\(n\)&lt;/span&gt; &lt;em&gt;flip-flops&lt;/em&gt; tipo D, sendo &lt;span class="math"&gt;\(n=\lceil log_2s\rceil\)&lt;/span&gt;, onde &lt;span class="math"&gt;\(s\)&lt;/span&gt; √© o n√∫mero de estados. Caso o n√∫mero de estados n√£o seja uma pot√™ncia de 2, deve-se decidir neste passo o que fazer com os estados que sobrarem. As op√ß√µes poss√≠veis s√£o: (i) nada, assim aumentamos as possibilidades de minimiza√ß√£o das fun√ß√µes combinat√≥rias mas caso a m√°quina alcance um destes estados, a sa√≠da pode n√£o ser neutra; (ii) for√ßar a sa√≠da para um valor neutro, diminuindo as possibilidades de minimiza√ß√£o da fun√ß√£o de sa√≠da; ou (iii) idem ao (ii) mas tamb√©m for√ßamos a m√°quina para o estado inicial no pr√≥ximo ciclo. A op√ß√£o (i) √© a que oferece a maior possibilidade de minimiza√ß√£o e a op√ß√£o (iii) √© a mais segura. Com as escolhas feitas, deve-se determinar as vari√°veis de estado e designar o c√≥digo de cada estado. Uma boa designa√ß√£o de estados pode implicar em melhor minimiza√ß√£o, mas n√£o h√° uma regra espec√≠fica. Um truque comum √© designarmos os estados usando c√≥digo de Gray, assim os mapas de Karnaugh podem ser facilmente montados (assumindo que voc√™ utilizar√° esta t√©cnica).&lt;/p&gt;
&lt;p&gt;Caso n√£o tenha escolhido o tipo de &lt;em&gt;flip-flop&lt;/em&gt; no passo 4, voc√™ deve escolher antes de come√ßar o passo 5. Neste passo, devemos montar a tabela de excita√ß√£o levando em considera√ß√£o as caracter√≠sticas do elemento de mem√≥ria escolhido. O nome desta tabela (tabela de excita√ß√£o) remete √†s informa√ß√µes da tabela, pois esta n√£o traz o pr√≥ximo estado e sim o que deve ser colocado nas entradas dos elementos de mem√≥ria para que suas sa√≠das sejam o pr√≥ximo estado no momento adequado (i.e. pr√≥xima borda do &lt;em&gt;clock&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;Temos a tabela de excita√ß√£o (passo 5) e a tabela de sa√≠da (passo 3), com a designa√ß√£o de estados e as vari√°veis de estado (passo 4). No passo 6 devemos encontrar as fun√ß√µes de chaveamento. A t√©cnica usual √© montar os mapas de Karnaugh para a fun√ß√£o de excita√ß√£o (&lt;span class="math"&gt;\(T\)&lt;/span&gt;) e para a fun√ß√£o de sa√≠da (&lt;span class="math"&gt;\(G\)&lt;/span&gt;), obtendo as equa√ß√µes como produto da aplica√ß√£o do mapa. No entanto, qualquer t√©cnica de s√≠ntese de circuitos combinat√≥rios pode ser utilizada.&lt;/p&gt;
&lt;p&gt;Com as equa√ß√µes prontas, basta desenhar os blocos combinat√≥rios (&lt;span class="math"&gt;\(T\)&lt;/span&gt; e &lt;span class="math"&gt;\(G\)&lt;/span&gt;), posteriormente ligando-os aos elementos de mem√≥ria e obtendo-se o circuito final, o que √© feito no passo 7.&lt;/p&gt;
&lt;h2&gt;An√°lise&lt;/h2&gt;
&lt;p&gt;A an√°lise de uma m√°quina de estados finita em sistemas digitais √© exatamente o contr√°rio da s√≠ntese.&lt;/p&gt;
&lt;p&gt;Parte-se de um diagrama l√≥gico (passo 7 reverso), onde deve-se identificar o elemento de mem√≥ria (&lt;span class="math"&gt;\(S\)&lt;/span&gt;). √â comum o elemento de mem√≥ria ser composto por um ou mais &lt;em&gt;flip-flops&lt;/em&gt;, ent√£o n√£o √© dif√≠cil encontr√°-los no circuito.&lt;/p&gt;
&lt;p&gt;Identificado o elemento de mem√≥ria, segue-se a identifica√ß√£o das fun√ß√µes de excita√ß√£o e de sa√≠da (passo 6 reverso). Isso pode ser feito usando uma t√©cnica de an√°lise de circuitos combinat√≥rios, partindo da sa√≠da do elemento de mem√≥ria em dire√ß√£o ao que se pretende identificar (e.g. se voc√™ est√° identificando a fun√ß√£o de sa√≠da, aplique uma t√©cnica de an√°lise da sa√≠da do elemento de mem√≥ria em dire√ß√£o a sa√≠da da m√°quina de estados). √â √∫til ter em mente o modelo cl√°ssico de m√°quinas de estado pois, identificado o elemento de mem√≥ria, o que sobrou deve ser combinat√≥rio e faz parte de uma das fun√ß√µes de excita√ß√£o ou sa√≠da. √â muito comum usar cores, circular ou marcar as portas l√≥gicas para separ√°-las de acordo com a fun√ß√£o conforme se faz a an√°lise. Neste ponto da an√°lise j√° √© poss√≠vel identificar se a m√°quina segue o modelo de Moore ou de Mealy. Neste passo deve-se tamb√©m inferir as vari√°veis de estado (no caso dos &lt;em&gt;flip-flops&lt;/em&gt; as vari√°veis de estado coincidem com a sa√≠da dos mesmos).&lt;/p&gt;
&lt;p&gt;Obtidas as equa√ß√µes &lt;span class="math"&gt;\(T\)&lt;/span&gt; e &lt;span class="math"&gt;\(G\)&lt;/span&gt;, parte-se para as tabelas. A tabela de excita√ß√£o pode ser obtida exercitando todas as combina√ß√µes poss√≠veis das vari√°veis de estado e das entradas (passo 5 reverso). Para cada valor, exercita-se a fun√ß√£o de excita√ß√£o (&lt;span class="math"&gt;\(T\)&lt;/span&gt;) e obt√©m-se o valor que ser√° aplicado √†s entradas do elemento de mem√≥ria (&lt;span class="math"&gt;\(S\)&lt;/span&gt;).&lt;/p&gt;
&lt;p&gt;Com a tabela de excita√ß√£o e conhecendo-se as caracter√≠sticas do elemento de mem√≥ria, pode-se atribuir nomes aos estados e construir a tabela de transi√ß√£o de estados (passo 4 reverso). √â dif√≠cil atribuir nomes significativos para o estado neste momento, ent√£o muitos projetistas optam por atribuir nomes alfanum√©ricos (e.g. A, B, C1, C2, etc).&lt;/p&gt;
&lt;p&gt;N√£o faz sentido reverter as minimiza√ß√µes, tanto para os m√©todos de s√≠ntese combinat√≥ria quanto para as tabelas, portanto das equa√ß√µes montamos diretamente as tabelas, e delas extrairemos diretamente o restante.&lt;/p&gt;
&lt;p&gt;Para completar as tabelas (passo 3 reverso), obtemos a tabela de sa√≠da a partir da fun√ß√£o de sa√≠da (encontrada no passo 6 reverso) da mesma maneira que encontramos a fun√ß√£o de excita√ß√£o: exercitando todos os valores poss√≠veis para as vari√°veis de estado e para a entrada (a entrada s√≥ faz parte da fun√ß√£o de sa√≠da se a m√°quina seguir o modelo de Mealy).&lt;/p&gt;
&lt;p&gt;Com as tabelas, √© poss√≠vel montar um diagrama de transi√ß√£o de estados. O diagrama pode ser inferido diretamente das tabelas (passo 2 reverso).&lt;/p&gt;
&lt;p&gt;O passo 1 √© o √∫nico cr√≠ptico na an√°lise de m√°quinas de estado finitas. A raz√£o disso √© que o diagrama pode ser considerado a express√£o de uma solu√ß√£o para um problema. Extrair o problema de uma solu√ß√£o √© uma tarefa subjetiva. Informa√ß√µes extras sobre a aplica√ß√£o da m√°quina, o local onde ela funciona, interfaces e at√© mesmo observar os sistemas ao redor da m√°quina de estados podem ajudar, por√©m n√£o h√° uma t√©cnica para este passo. Em alguns casos pode-se tentar mapear a m√°quina de estados para uma estrutura formal (e.g. express√µes regulares), mas isso pouco ajuda quando n√£o se conhece nem mesmo a natureza do problema que a m√°quina resolve.&lt;/p&gt;
&lt;h1&gt;Exemplo&lt;/h1&gt;
&lt;p&gt;Este √© um exemplo cl√°ssico de uma m√°quina de estados simples, mas que todos reconhecem: o sem√°foro. Projete o circuito para uma m√°quina de estados que opere um sem√°foro de tr√™s fases: verde, amarela e vermelha. A entrada √© &lt;span class="math"&gt;\(m\)&lt;/span&gt;, proveniente de um temporizador, que caso alta na fase verde causa uma mudan√ßa para a fase a amarela e caso alta na fase vermelha causa uma mudan√ßa para a fase verde. A mudan√ßa da fase amarela para a vermelha √© independente da entrada. A sa√≠da da m√°quina de estados √© dada por dois bits, &lt;span class="math"&gt;\(c_1c_0\)&lt;/span&gt;, que indicam qual cor est√° acesa: 10 verde, 11 amarelo e 01 vermelho.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Passo 1:&lt;/strong&gt; Vari√°veis de entrada: somente &lt;span class="math"&gt;\(m\)&lt;/span&gt; de 1 bit. Vari√°veis de sa√≠da: &lt;span class="math"&gt;\(c_1c_0\)&lt;/span&gt; de 2 bits, 10 verde, 11 amarelo e 01 vermelho (n√£o foi especificado o que acontece em 00). O sem√°foro trabalha de forma circular acendendo as cores vermelho, amarelo e verde, em sequ√™ncia repetitiva. O tempo que a m√°quina permanece na cor amarela √© dado pelo per√≠odo do &lt;em&gt;clock&lt;/em&gt;, pois n√£o h√° condi√ß√£o para a transi√ß√£o. J√° o tempo que a m√°quina permanece no vermelho e no verde √© indicado pelo sinal do temporizador, representado pela entrada &lt;span class="math"&gt;\(m\)&lt;/span&gt;. Quando a entrada for alta (&lt;span class="math"&gt;\(m=1\)&lt;/span&gt;), deve-se trocar de estado na pr√≥xima borda do &lt;em&gt;clock&lt;/em&gt;. Convencionaremos o &lt;em&gt;reset&lt;/em&gt; ass√≠ncrono ativo baixo e o elemento de mem√≥ria sens√≠vel a borda de subida do &lt;em&gt;clock&lt;/em&gt;. Escolheremos um modelo de Moore, sem nenhuma vantagem ou desvantagem expl√≠cita.&lt;/p&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/semaforo.png' width="35%" align="right" style="padding-left:5%" /&gt;
&lt;strong&gt;Passo 2:&lt;/strong&gt; A descri√ß√£o funcional foi feita durante a an√°lise do problema no passo 1. O diagrama de transi√ß√£o de estados pode ser visto na figura ao lado. Note que j√° demos os nomes para os estados de acordo com a cor: VM vermelha, VD verde e AM amarela. A entrada de 1 bit foi especificada nas transi√ß√µes e a sa√≠da de 2 bits na parte inferior do estado, de acordo com o identificado no passo 1.
&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Passo 3:&lt;/strong&gt; J√° temos o diagrama de transi√ß√£o de estados, ent√£o podemos montar as tabelas.&lt;/p&gt;
&lt;style type="text/css"&gt;
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:black;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:black;}
.tg .tg-88nc{font-weight:bold;border-color:inherit;text-align:center}
.tg .tg-kiyi{font-weight:bold;border-color:inherit;text-align:left}
.tg .tg-c3ow{border-color:inherit;text-align:center;vertical-align:top}
&lt;/style&gt;

&lt;table class="tg"&gt;
  &lt;tr&gt;
    &lt;th class="tg-88nc" rowspan="2"&gt;Estado Atual&lt;/th&gt;
    &lt;th class="tg-88nc" colspan="2"&gt;Pr√≥ximo Estado&lt;/th&gt;
    &lt;th class="tg-kiyi" rowspan="2"&gt;Sa√≠da&lt;/th&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-88nc"&gt;m=0&lt;/td&gt;
    &lt;td class="tg-88nc"&gt;m=1&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-c3ow"&gt;VM&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;VM&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;VD&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;01&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-c3ow"&gt;AM&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;VM&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;VM&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;11&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-c3ow"&gt;VD&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;VD&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;AM&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;10&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;p&gt;Note que as tabelas de pr√≥ximo estado e de sa√≠da est√£o juntas na mesma tabela. A coluna &lt;strong&gt;Estado Atual&lt;/strong&gt; mostra o estado em que a m√°quina se encontra, e a coluna &lt;strong&gt;Sa√≠da&lt;/strong&gt; mostra a sa√≠da para aquele estado. A coluna &lt;strong&gt;Pr√≥ximo Estado&lt;/strong&gt; cont√©m as transi√ß√µes, ou seja, para qual estado a m√°quina ir√° no pr√≥ximo ciclo de &lt;em&gt;clock&lt;/em&gt; caso a entrada &lt;span class="math"&gt;\(m\)&lt;/span&gt; seja 0 ou 1. Esta tabela √© pequena, portanto basta uma r√°pida an√°lise para perceber que n√£o h√° redu√ß√µes poss√≠veis.&lt;/p&gt;
&lt;p&gt;Dica: √© muito comum representar as duas tabelas em uma s√≥ para economizar espa√ßo, pois a coluna de estado atual √© id√™ntica nas duas. Note tamb√©m que a ordem dos estados j√° foi colocada de forma a facilitar a utiliza√ß√£o do m√©todo de minimiza√ß√£o gr√°fica por mapa de Karnaugh.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Passo 4:&lt;/strong&gt; Para nossa implementa√ß√£o, usaremos &lt;em&gt;flip-flops&lt;/em&gt; tipo D sens√≠veis a borda de subida do &lt;em&gt;clock&lt;/em&gt;. Temos 3 estados, portanto usaremos &lt;span class="math"&gt;\(\lceil log_23\rceil =2\)&lt;/span&gt; &lt;em&gt;flip-flops&lt;/em&gt;. Com dois &lt;em&gt;flip-flops&lt;/em&gt;, podemos representar at√© &lt;span class="math"&gt;\(2^2=4\)&lt;/span&gt; estados poss√≠veis, portanto h√° um estado sobrando. A aplica√ß√£o √© cr√≠tica pois caso a m√°quina atinja o estado AM ou VD erroneamente, poder√° causar um acidente. Neste sentido, optamos por for√ßar o estado extra para produzir uma sa√≠da vermelha (10) e ir para o estado VM no pr√≥ximo ciclo, independente da entrada. A designa√ß√£o de estados ser√°: 00 para o estado extra, que chamaremos de EX; 01 para o estado VM, 11 para o estado AM, e 10 para o estado VD. Note que esta designa√ß√£o condiz com a sa√≠da para os estados v√°lidos, o que foi proposital para minimizar as fun√ß√µes de sa√≠da.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Passo 5:&lt;/strong&gt; A tabela de excita√ß√£o √© exatamente a tabela de pr√≥ximo estado, por√©m com os estados substitu√≠dos pela sua designa√ß√£o pois usamos &lt;em&gt;flip-flops&lt;/em&gt; tipo D, que copiam a entrada para a sa√≠da. Caso o elemento de mem√≥ria fosse diferente, nesta tabela dever√≠amos colocar as entradas do elemento de mem√≥ria adequadas para que o pr√≥ximo estado seja o ta tabela de transi√ß√£o de estados. Tamb√©m copiamos a tabela de sa√≠da para incluir a sa√≠da no caso do estado extra.&lt;/p&gt;
&lt;table class="tg"&gt;
  &lt;tr&gt;
    &lt;th class="tg-88nc" rowspan="2"&gt;Estado Atual&lt;/th&gt;
    &lt;th class="tg-88nc" colspan="2"&gt;Pr√≥ximo Estado&lt;/th&gt;
    &lt;th class="tg-kiyi" rowspan="2"&gt;Sa√≠da&lt;/th&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-88nc"&gt;m=0&lt;/td&gt;
    &lt;td class="tg-88nc"&gt;m=1&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-c3ow"&gt;EX(00)&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;VM(01)&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;VM(01)&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;01&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-c3ow"&gt;VM(01)&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;VM(01)&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;VD(10)&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;01&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-c3ow"&gt;AM(11)&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;VD(01)&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;VD(01)&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;11&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-c3ow"&gt;VD(10)&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;VD(10)&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;AM(11)&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;10&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;p&gt;Mantivemos os nomes dos estados e colocamos a designa√ß√£o entre par√™nteses para facilitar a leitura (esta pr√°tica √© comum quando utiliza-se &lt;em&gt;flip-flop&lt;/em&gt; tipo D). Os n√∫meros entre par√™nteses representam as vari√°veis de estado, que chamaremos de &lt;span class="math"&gt;\(q_1q_0\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Passo 6:&lt;/strong&gt; Neste passo, devemos encontrar as fun√ß√µes de excita√ß√£o e de sa√≠da. A constru√ß√£o e solu√ß√£o do mapa de Karnaugh foi omitida pois n√£o √© assunto deste artigo, por√©m ambas as equa√ß√µes foram encontradas usando este m√©todo. Note que, como usamos &lt;em&gt;flip-flops&lt;/em&gt; tipo D, &lt;span class="math"&gt;\(d_1=q_1^{t+1}\)&lt;/span&gt; e &lt;span class="math"&gt;\(d_0=q_0^{t+1}\)&lt;/span&gt;.&lt;/p&gt;
&lt;div class="math"&gt;$$
q_1^{t+1}=q_1.\overline{q_0}+\overline{q_1}.q_0.m\\
q_0^{t+1}=\overline{q_1}.\overline{q_0}+q_0.\overline{m}+q_1.m\\
\quad\\
c_1=q_1\\
c_0=\overline{q_1}+q_0
$$&lt;/div&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/fsmSemaforo.png' width="35%" align="right" style="padding-left:5%" /&gt;
&lt;strong&gt;Passo 7:&lt;/strong&gt; Com as equa√ß√µes em m√£os, basta montar o circuito correspondente. Come√ßamos colocando os elementos de mem√≥ria na parte central (dois &lt;em&gt;flip-flops&lt;/em&gt;) tipo D e nomeamos como &lt;em&gt;q1&lt;/em&gt; e &lt;em&gt;q0&lt;/em&gt;. As sa√≠das dos &lt;em&gt;flip-flops&lt;/em&gt; correspondem √†s vari√°veis de estado hom√¥nimas, e as entradas devem ser as sa√≠das das fun√ß√µes de pr√≥ximo estado. Ap√≥s colocarmos os elementos de mem√≥ria, continuamos seguindo as conven√ß√µes e colocamos a esquerda o circuito combinat√≥rio correspondente √† fun√ß√£o de transi√ß√£o de estados e a direita o correspondente a de sa√≠da.
Ainda no circuito vemos a entrada de &lt;em&gt;clock&lt;/em&gt; e de &lt;em&gt;reset&lt;/em&gt;, um bot√£o que emula o sinal vindo do temporizador e uma sa√≠da RGB que corresponde ao sem√°foro.&lt;/p&gt;
&lt;p&gt;Para baixar este circuito no formato do LogiSim &lt;a href="https://balbertini.github.io/extra/sd/fsmSemaforo.circ"&gt;clique aqui&lt;/a&gt;.&lt;/p&gt;
&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;

&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width &lt; 768) ? "left" : align;
        indent = (screen.width &lt; 768) ? "0em" : indent;
        linebreak = (screen.width &lt; 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="sistemas digitais"></category><category term="sistemas digitais"></category><category term="fsm"></category><category term="simplifica√ß√£o"></category></entry><entry><title>Simplifica√ß√£o de FSM</title><link href="https://balbertini.github.io/fsmstatereduction-pt_BR.html" rel="alternate"></link><published>2018-09-25T17:13:05-03:00</published><updated>2019-02-26T17:24:30-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2018-09-25:/fsmstatereduction-pt_BR.html</id><summary type="html">&lt;p&gt;Como fazer simplifica√ß√£o de estados em m√°quinas de estados finitas.&lt;/p&gt;</summary><content type="html">&lt;p&gt;A m√°quina de estados finita em sistemas digitais, quando realizada na forma de um circuito digital, utiliza recursos computacionais (e.g. &lt;em&gt;flip-flops&lt;/em&gt;, mem√≥rias, portas l√≥gicas, etc.) que s√£o caros do ponto de vista de √°rea e consumo de energia, principalmente se a m√°quina possuir muitos estados. Por este motivo, √© importante minimizar o n√∫mero de estados da m√°quina para que, na implementa√ß√£o, utilizemos somente os recursos m√≠nimos necess√°rios para aquela m√°quina. Al√©m disso, quando estamos projetando uma m√°quina de estados para resolver um problema, √© mais confort√°vel n√£o pensar em otimiza√ß√µes mas sim na funcionalidade da m√°quina, para s√≥ depois pensar na otimiza√ß√£o. De fato, a maioria dos projetistas comerciais n√£o pensa na otimiza√ß√£o quando est√£o modelando o problema pois isso nem sempre √© poss√≠vel (i.e. o projetista n√£o tem vis√£o da m√°quina toda mas sim da parte cab√≠vel a ele, a m√°quina √© muito grande tornando imposs√≠vel pensar em tudo, a m√°quina √© particionada, etc).&lt;/p&gt;
&lt;p&gt;Na pr√°tica, com os sintetizadores modernos, voc√™ pode especificar sua m√°quina usando a linguagem de descri√ß√£o de hardware de sua prefer√™ncia e deixar o sintetizador otimiz√°-la para voc√™. Os resultados da otimiza√ß√£o autom√°tica s√£o bons quando comparados aos m√©todos manuais [1,2]. Contudo, √© necess√°rio conhecer o m√≠nimo do funcionamento dos algoritmos de minimiza√ß√£o pois, quando for descrever sua m√°quina, voc√™ conhecer√° ao menos o b√°sico do que acontecer√° quando sintetiz√°-la. Neste artigo, explicarei os m√©todos de minimiza√ß√£o por identifica√ß√£o direta na tabela de transi√ß√£o de estados e por tabela de implica√ß√£o. Em ambos os casos, o objetivo principal √© encontrar estados equivalentes, ou seja, que &lt;strong&gt;para a mesma entrada, produzem a mesma sa√≠da e transicionam para os mesmos estados.&lt;/strong&gt;&lt;/p&gt;
&lt;h2&gt;Minimiza√ß√£o atrav√©s da tabela de transi√ß√£o&lt;/h2&gt;
&lt;p&gt;Em muitos casos, √© f√°cil identificar os estados equivalentes na tabela de transi√ß√£o de estados, por isso este m√©todo tamb√©m √© chamado de &lt;strong&gt;observa√ß√£o direta&lt;/strong&gt; ou &lt;strong&gt;casamento de linhas&lt;/strong&gt;. O algoritmo √© simples:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Elimine todos os estados inalcan√ß√°veis (estados onde n√£o chega nenhuma aresta partindo de outro estado alcan√ß√°vel).&lt;/li&gt;
&lt;li&gt;Identifique dois estados A e B que, para a mesma entrada, produzam exatamente a mesma sa√≠da e realizem a mesma transi√ß√£o (transicionem para o mesmo estado).&lt;/li&gt;
&lt;li&gt;Elimine um dos estados (e.g. B) apagando a linha correspondente a este estado e substitua todas as ocorr√™ncias de B por A (i.e. todos as transi√ß√µes para B agora devem apontar para A).&lt;/li&gt;
&lt;li&gt;Repita at√© que nenhum par de estados atenda (2).&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;Exemplo&lt;/h3&gt;
&lt;p&gt;Uma forma muito comum de projetar m√°quinas de estados √© modelando-a como √°rvore, onde cada ramifica√ß√£o √© uma tomada de decis√£o. Tomemos a m√°quina abstrata a seguir que foi montada partindo de uma √°rvore bin√°ria can√¥nica e modificada para reconhecer as sequencias 0011 e 1001:&lt;/p&gt;
&lt;p&gt;&lt;img alt="FSM em forma de √°rvore" src="https://balbertini.github.io/images/sd/sdfsmopt2.png"&gt;&lt;/p&gt;
&lt;p&gt;Em vermelho est√° destacado o caminho que esta m√°quina ir√° seguir para reconhecer as duas sequencias. Note que esta √© uma m√°quina de Mealy e n√£o leva em considera√ß√£o nenhuma sobreposi√ß√£o entre as sequencias detectadas, ou seja, ela s√≥ funciona para entradas de 4 bits agrupados a partir do &lt;em&gt;reset&lt;/em&gt; (e.g. detecta duas vezes se a entrada for 0011 1001 mas n√£o detecta a segunda vez se a entrada for 0011 001).&lt;/p&gt;
&lt;p&gt;A tabela de transi√ß√£o de estados fica como na Tabela 1 a seguir.&lt;/p&gt;
&lt;style type="text/css"&gt;
.tg  {border-collapse:collapse;border-spacing:0px;margin-right:10px;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:black;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:black;}
.tg .tg-zlqz{font-weight:bold;background-color:#c0c0c0;border-color:inherit;text-align:center;vertical-align:top}
.tg .tg-baqh{text-align:center;vertical-align:top}
.tg .tg-3r9o{font-weight:bold;background-color:#c0c0c0;border-color:inherit;text-align:center}
.tg .tg-c3ow{border-color:inherit;text-align:center;vertical-align:top}
.tg .tg-4m7p{background-color:#9aff99;border-color:inherit;text-align:center;vertical-align:top}
.tg .tg-uuae{background-color:#67fd9a;border-color:inherit;text-align:center;vertical-align:top}
.tg .tg-vswx{background-color:#fd6864;border-color:inherit;text-align:center;vertical-align:top}
.tg .tg-fcno{background-color:#fcff2f;border-color:inherit;text-align:center;vertical-align:top}
.tg .tg-bolj{background-color:#ffccc9;border-color:inherit;text-align:center;vertical-align:top}
.tg .tg-mfhl{background-color:#ffffc7;border-color:inherit;text-align:center;vertical-align:top}
&lt;/style&gt;

&lt;!-- ------------------------------------------------------- --&gt;

&lt;table class="tg" align="left"&gt;
  &lt;tr&gt;
    &lt;th class="tg-baqh" colspan="3"&gt;Tabela 1&lt;/th&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-zlqz" rowspan="2"&gt;E.A.&lt;/td&gt;
    &lt;td class="tg-zlqz" colspan="2"&gt;P.E.&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-zlqz"&gt;0&lt;/td&gt;
    &lt;td class="tg-zlqz"&gt;1&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;S0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S1/0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S2/0&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;S1&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S3/0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S4/0&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;S2&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S5/0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S6/0&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;S3&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S7/0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S8/0&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;S4&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S9/0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S10/0&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;S5&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S11/0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S12/0&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;S6&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S13/0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S14/0&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;S7&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S0/0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S0/0&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;S8&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S0/0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S0/1&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;S9&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S0/0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S0/0&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;S10&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S0/0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S0/0&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;S11&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S0/0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S0/1&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;S12&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S0/0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S0/0&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;S13&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S0/0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S0/0&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;S14&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S0/0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S0/0&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;!-- ------------------------------------------------------- --&gt;

&lt;table class="tg" align="left"&gt;
  &lt;tr&gt;
    &lt;th class="tg-c3ow" colspan="3"&gt;Tabela 2&lt;/th&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-3r9o" rowspan="2"&gt;E.A.&lt;/td&gt;
    &lt;td class="tg-zlqz" colspan="2"&gt;P.E.&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-zlqz"&gt;0&lt;/td&gt;
    &lt;td class="tg-zlqz"&gt;1&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-c3ow"&gt;S0&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;S1/0&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;S2/0&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-c3ow"&gt;S1&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;S3/0&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;S4/0&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-c3ow"&gt;S2&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;S5/0&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;S6/0&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-c3ow"&gt;S3&lt;/td&gt;
    &lt;td class="tg-4m7p"&gt;Sa/0&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;S8/0&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-c3ow"&gt;S4&lt;/td&gt;
    &lt;td class="tg-4m7p"&gt;Sa/0&lt;/td&gt;
    &lt;td class="tg-4m7p"&gt;Sa/0&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-c3ow"&gt;S5&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;S11/0&lt;/td&gt;
    &lt;td class="tg-4m7p"&gt;Sa/0&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-c3ow"&gt;S6&lt;/td&gt;
    &lt;td class="tg-4m7p"&gt;Sa/0&lt;/td&gt;
    &lt;td class="tg-4m7p"&gt;Sa/0&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-c3ow"&gt;S8&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;S0/0&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;S0/1&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-c3ow"&gt;S11&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;S0/0&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;S0/1&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-uuae"&gt;Sa&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;S0/0&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;S0/0&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;!-- ------------------------------------------------------- --&gt;

&lt;table class="tg" align="left"&gt;
  &lt;tr&gt;
    &lt;th class="tg-c3ow" colspan="3"&gt;Tabela 3&lt;/th&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-3r9o" rowspan="2"&gt;E.A.&lt;/td&gt;
    &lt;td class="tg-zlqz" colspan="2"&gt;P.E.&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-zlqz"&gt;0&lt;/td&gt;
    &lt;td class="tg-zlqz"&gt;1&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-c3ow"&gt;S0&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;S1/0&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;S2/0&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-c3ow"&gt;S1&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;S3/0&lt;/td&gt;
    &lt;td class="tg-bolj"&gt;Sb/0&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-c3ow"&gt;S2&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;S5/0&lt;/td&gt;
    &lt;td class="tg-bolj"&gt;Sb/0&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-c3ow"&gt;S3&lt;/td&gt;
    &lt;td class="tg-4m7p"&gt;Sa/0&lt;/td&gt;
    &lt;td class="tg-mfhl"&gt;Sc/0&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-c3ow"&gt;S5&lt;/td&gt;
    &lt;td class="tg-mfhl"&gt;Sc/0&lt;/td&gt;
    &lt;td class="tg-4m7p"&gt;Sa/0&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-vswx"&gt;Sb&lt;/td&gt;
    &lt;td class="tg-4m7p"&gt;Sa/0&lt;/td&gt;
    &lt;td class="tg-4m7p"&gt;Sa/0&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-fcno"&gt;Sc&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;S0/0&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;S0/1&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-uuae"&gt;Sa&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;S0/0&lt;/td&gt;
    &lt;td class="tg-c3ow"&gt;S0/0&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;p&gt;A coluna &lt;strong&gt;E.A.&lt;/strong&gt; mostra o estado atual, e a coluna &lt;strong&gt;P.E.&lt;/strong&gt; o pr√≥ximo estado. Esta √∫ltima √© bipartida para as entradas igual a &lt;strong&gt;0&lt;/strong&gt; e igual a &lt;strong&gt;1&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;A Tabela 1 possui todas as transi√ß√µes da √°rvore como vista na figura. Esta m√°quina n√£o tem nenhum estado inalcan√ß√°vel, ent√£o n√£o h√° o que eliminar no passo 1.&lt;/p&gt;
&lt;p&gt;No passo 2, devemos procurar as equival√™ncias. √â f√°cil perceber que h√° estados que produzem exatamente o mesmo resultado (transi√ß√£o e sa√≠da) para determinada entrada. Tomemos por exemplo os estados S7, S9, S10, S12, S13 e S14: todos transicionam para S0 e produzem sa√≠da 0 para qualquer entrada, portanto s√£o equivalentes. Podemos reduzir a tabela substituindo todos estes estados por um estado Sa, o que podemos ver na Tabela 2, destacado em verde.&lt;/p&gt;
&lt;p&gt;Se fizermos a busca novamente, os estados S4 e S6 agora s√£o equivalentes pois ambos transicionam para Sa e produzem sa√≠da 0, independententemente da entrada. Criamos o estado Sb, em vermelho, para substituir estes estados. Similarmente os estados S8 e S11 s√£o equivalentes, mas note que eles tem sa√≠das diferentes para entradas diferentes. Para este conjunto de estados, criamos Sc, em amarelo. N√£o h√° mais estados equivalentes e o resultado final pode ser visto na Tabela 3.&lt;/p&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/sdfsmopt3.png' width="35%" align="right" style="padding-left:5%" /&gt;
&lt;br/&gt;
O diagrama de transi√ß√£o de estados minimizado pode ser visto na figura ao lado. Os estados S7, S9, S10, S12, S13 e S14 s√£o representados pelo Sa, S4 e S6 pelo Sb e S8 e S11 pelo Sc.&lt;/p&gt;
&lt;p&gt;O m√©todo de an√°lise da tabela de transi√ß√£o de estados se baseia na busca exaustiva por estados equivalentes. √â f√°cil perceber que, conforme a tabela cresce, ficar√° mais dif√≠cil visualizar os estados equivalentes. Al√©m disso, o m√©todo n√£o garante a menor quantidade de estados poss√≠vel pois √© baseado em estados e n√£o em grupos de estados (veja o primeiro exemplo da pr√≥xima se√ß√£o).&lt;/p&gt;
&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;

&lt;h2&gt;O m√©todo de minimiza√ß√£o por tabela de implica√ß√£o&lt;/h2&gt;
&lt;p&gt;Nem sempre √© t√£o f√°cil perceber a equival√™ncia de estados atrav√©s da tabela de transi√ß√£o de estados, especialmente para m√°quinas grandes ou com muitas entradas. No entanto, os projetistas desenvolveram um m√©todo chamado de tabela de implica√ß√£o. Este m√©todo √© equivalente √† an√°lise atrav√©s da tabela de transi√ß√£o de estados, por√©m √© algor√≠tmico e est√° organizado em forma de uma matriz, o que minimiza erros por parte do projetista. Al√©m disso, apesar de ambos os m√©todos serem exaustivos, h√° uma diferen√ßa primordial: enquanto o m√©todo de an√°lise da tabela de transi√ß√£o de estados procura exaustivamente estados equivalentes, o m√©todo da tabela de implica√ß√£o procura exaustivamente os estados que &lt;strong&gt;n√£o s√£o equivalentes&lt;/strong&gt;. Parte-se da premissa de que todos os estados s√£o equivalentes entre si e, a cada itera√ß√£o, elimina-se os estados que n√£o podem ser equivalentes. Os estados que sobrarem s√£o equivalentes.&lt;/p&gt;
&lt;p&gt;H√° dois momentos no m√©todo da tabela de implica√ß√£o: a constru√ß√£o da tabela e a an√°lise.&lt;/p&gt;
&lt;h3&gt;Constru√ß√£o da matriz (tabela)&lt;/h3&gt;
&lt;p&gt;A matriz pode ser constru√≠da como uma matriz &lt;span class="math"&gt;\(n\)&lt;/span&gt; por &lt;span class="math"&gt;\(n\)&lt;/span&gt;, onde &lt;span class="math"&gt;\(n\)&lt;/span&gt; √© o n√∫mero de estados (se voc√™ come√ßar no &lt;span class="math"&gt;\(S_0\)&lt;/span&gt;, o √∫ltimo estado ser√° &lt;span class="math"&gt;\(S_{n-1}\)&lt;/span&gt;). Cada linha &lt;span class="math"&gt;\(i\)&lt;/span&gt; da matriz representa um estado e cada coluna &lt;span class="math"&gt;\(j\)&lt;/span&gt; tamb√©m.&lt;/p&gt;
&lt;p&gt;N√£o faz sentido analisar a equival√™ncia de um estado com ele mesmo, pois um estado sempre √© equivalente a ele mesmo. Por este motivo, eliminamos a diagonal da matriz, onde &lt;span class="math"&gt;\(i=j\)&lt;/span&gt;. As metades diagonais superiores e inferiores significam a mesma coisa pois se uma c√©lula &lt;span class="math"&gt;\(X_{ij}\)&lt;/span&gt; mostra equival√™ncia entre o estado &lt;span class="math"&gt;\(S_i\)&lt;/span&gt; e o estado &lt;span class="math"&gt;\(S_j\)&lt;/span&gt;, a c√©lula &lt;span class="math"&gt;\(X_{ji}\)&lt;/span&gt; tamb√©m deve mostrar a mesma equival√™ncia. Por este motivo, eliminamos tamb√©m uma das metades diagonais. Por conven√ß√£o, elimina-se a diagonal superior, mas o resultado √© o mesmo se voc√™ eliminar a metade diagonal inferior.&lt;/p&gt;
&lt;p&gt;Quando estiver confort√°vel com a constru√ß√£o da matriz, voc√™ poder√° desenh√°-la j√° sem a diagonal e sem a metade diagonal superior. A esse desenho contendo somente a metade diagonal inferior da tabela, chamamos de &lt;strong&gt;tabela de implica√ß√£o&lt;/strong&gt;. Na figura abaixo mostramos a matriz inteira, a matriz destacando a linha diagonal (vermelha) e a metade diagonal superior (laranja), e finalmente a tabela de implica√ß√£o.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Constru√ß√£o da tabela de implica√ß√£o." src="https://balbertini.github.io/images/sd/sdfsmoptconsttab.png"&gt;&lt;/p&gt;
&lt;p&gt;Ap√≥s obter a tabela de implica√ß√£o, devemos preencher as c√©lulas. Cada c√©lula ter√° &lt;span class="math"&gt;\(2^b\)&lt;/span&gt; linhas, onde &lt;span class="math"&gt;\(b\)&lt;/span&gt; √© o n√∫mero de bits da entrada. E.g. se a entrada for de 1 bit, cada c√©lula tem 2 linhas; se a entrada for de 2 bits, cada c√©lula tem 4 linhas. Cada linha da entrada corresponde √†s transi√ß√µes daqueles estados para aquela entrada.&lt;/p&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/sdfsmoptconstcel.png' width="45%" align="right" style="padding-left:5%" /&gt;
Na figura podemos ver o exemplo do preenchimento para duas c√©lulas, ambas na linha do S3 e coluna do S4. Para simplificar o preenchimento, usamos somente o n√∫mero do estado, mas voc√™ pode escrever o nome completo do estado (especialmente √∫til se os nomes dos estados n√£o forem numerados).&lt;/p&gt;
&lt;p&gt;Na c√©lula na esquerda na figura, a entrada tem 1 bit, portanto temos duas linhas, uma para a entrada 0 e outra para a entrada 1. Nesta c√©lula, a m√°quina √© de Mealy com sa√≠da de 1 bit, que pode ser vista representada nas transi√ß√µes.&lt;/p&gt;
&lt;p&gt;J√° na c√©lula a direita na figura, a entrada tem 2 bits, portanto temos 4 linhas para as entradas 00, 01, 10 e 11. A m√°quina representada √© de Moore e tamb√©m tem um bit s√≥ de sa√≠da, que nesse caso √© representado no estado e n√£o na transi√ß√£o.&lt;/p&gt;
&lt;p&gt;Os n√∫meros em cada linha correspondem a transi√ß√£o que o estado far√° para cada entrada (e √† sa√≠da referente √†quela transi√ß√£o no caso de uma m√°quina de Mealy). No exemplo a esquerda na figura, podemos assumir que, para uma determinada entrada e estando em S3 ou em S4, a m√°quina transicionar√° para o estado S0/0 ou S1/0 (note que em ambas as transi√ß√µes a sa√≠da √© 0). Na mesma situa√ß√£o mas para a outra entrada, a m√°quina transicionar√° para o estado S2/0 ou S3/1. Mas como eu sei qual entrada? N√£o √© preciso saber para qual entrada, apenas que as transi√ß√µes da mesma linha, separadas por &lt;code&gt;-&lt;/code&gt;, s√£o para a mesma entrada. De fato, alguns projetistas preferem ordenar as transi√ß√µes em ordem crescente para facilitar a busca por estados equivalentes. E.g. (linha superior / linha inferior) 3-2/1-2 √© o mesmo que 1-2/2-3, mas ordenado. Fica a seu crit√©rio decidir a melhor forma de organizar sua tabela de implica√ß√£o, mas lembre-se que cada linha corresponde a exatamente dois estados separados por &lt;code&gt;-&lt;/code&gt;, para os quais a m√°quina de estados transicionar√° quando houver a mesma entrada.&lt;/p&gt;
&lt;p&gt;√â de praxe tamb√©m assinalar os estados que produzem sa√≠das diferentes, pois eles n√£o podem ser equivalentes. Neste caso, coloque uma &lt;code&gt;/&lt;/code&gt; no √≠ndice de coluna e linha (caso a m√°quina for de Moore) ou na transi√ß√£o dentro da c√©lula (caso a m√°quina for de Mealy). Isto ficar√° mais claro no exemplo.&lt;/p&gt;
&lt;h2&gt;Procurando estados equivalentes&lt;/h2&gt;
&lt;p&gt;Com a tabela de implica√ß√£o constru√≠da, devemos procurar os estados equivalentes. Isto √© feito de forma exaustiva, analisando todas as c√©lulas da tabela.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Risque todas as transi√ß√µes que v√£o para o mesmo estado e produzem a mesma sa√≠da (tipo s-s), pois elas s√£o naturalmente equivalentes. E.g. se voc√™ tem uma transi√ß√£o 0-0, risque-a pois n√£o √© preciso analis√°-la.&lt;/li&gt;
&lt;li&gt;Elimine as c√©lulas com estados (Moore) ou transi√ß√µes (Mealy) que produzem sa√≠das diferentes. Estes estados nunca poder√£o ser equivalentes.&lt;/li&gt;
&lt;li&gt;Analise uma c√©lula qualquer que n√£o tenha todas as transi√ß√µes riscadas e que n√£o tenha sido eliminada anteriormente. Esta c√©lula √© uma candidata a equival√™ncia.&lt;ul&gt;
&lt;li&gt;Olhe todas as linhas da c√©lula que n√£o foram riscadas no passo (1). Para cada uma, analise a c√©lula alvo. E.g. se a transi√ß√£o marca 1-2, voc√™ deve analisar a c√©lula correspondente aos estados S1 e S2.&lt;/li&gt;
&lt;li&gt;Se a c√©lula alvo estiver eliminada, voc√™ deve eliminar esta c√©lula tamb√©m.&lt;/li&gt;
&lt;li&gt;Se voc√™ analisou todas as linhas e n√£o eliminou a c√©lula, n√£o fa√ßa nada.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Repita o (3) at√© que todas as c√©lulas tenham sido analisadas.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Note que este processo √© exaustivo. Para n√£o correr o risco de analisar a mesma c√©lula v√°rias vezes, aconselho come√ßar pela c√©lula mais a direita inferior e depois passar para a segunda mais a direita inferior, e assim por diante. N√£o faz diferen√ßa a ordem em que voc√™ analisa as c√©lulas, mas voc√™ deve se organizar para n√£o repetir c√©lulas.&lt;/p&gt;
&lt;p&gt;Durante a an√°lise, pode acontecer de voc√™ eliminar uma linha inteira ou uma coluna inteira. Isso significa que o estado daquela linha ou coluna n√£o √© equivalente a nenhum outro estado, portanto voc√™ deve eliminar todas as c√©lulas que tem alguma linha referenciando aquele estado. E.g. se voc√™ eliminou a linha toda do S3, voc√™ deve eliminar todas as c√©lulas que possuam ao menos um 3 em alguma linha (x-3 ou 3-x).&lt;/p&gt;
&lt;p&gt;Voc√™ n√£o precisa analisar c√©lulas onde todas as linhas tenham sido riscadas no passo 1. Se voc√™ riscar todas as linhas de uma c√©lula, os estados desta c√©lula (linha-coluna) s√£o automaticamente equivalentes. Voc√™ n√£o precisa tomar nenhuma a√ß√£o em rela√ß√£o a isso, apenas pule a an√°lise da c√©lula.&lt;/p&gt;
&lt;p&gt;Quando voc√™ terminar este processo, as c√©lulas que voc√™ n√£o eliminou representam &lt;strong&gt;classes de equival√™ncia&lt;/strong&gt;. Uma classe de equival√™ncia √© um grupo de estados que s√£o equivalentes e, consequentemente, podem ser representados por um √∫nico estado. E.g. se a c√©lula da linha 3 coluna 4 n√£o foi eliminada, os estados S3 e S4 s√£o equivalentes.&lt;/p&gt;
&lt;h2&gt;Exemplo 1/3 - Moore simples&lt;/h2&gt;
&lt;p&gt;Este exemplo √© de uma m√°quina de Moore que detecta uma paridade √≠mpar considerando todas as entradas que j√° passaram pela m√°quina. O diagrama e a tabela de transi√ß√£o de estados podem ser vistos abaixo:&lt;/p&gt;
&lt;table class="tg" align="left"&gt;
  &lt;tr&gt;
    &lt;th class="tg-baqh" colspan="3"&gt;Tabela E1&lt;/th&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-zlqz" rowspan="2"&gt;E.A.&lt;/td&gt;
    &lt;td class="tg-zlqz" colspan="4"&gt;P.E.&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-zlqz"&gt;0&lt;/td&gt;
    &lt;td class="tg-zlqz"&gt;1&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;A/0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;A&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;B&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;B/1&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;B&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;C&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;C/0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;C&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;B&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/sdfsmoptex1diag.png' width="13%" align="left" style="padding-left:5%; padding-right:5%"/&gt;
Tente minimizar esta m√°quina usando o m√©todo de an√°lise da tabela de transi√ß√£o. √â poss√≠vel encontrar algum estado equivalente? Perceba que os estados A e C s√£o equivalentes, mas n√£o √© poss√≠vel perceber isto apenas com a tabela de transi√ß√£o de estados.&lt;/p&gt;
&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/sdfsmoptex1a.png' width="55%" align="right" style="padding-left:5%"/&gt;
Vamos construir a tabela de implica√ß√£o para verificar. Na figura ao lado, podemos ver: (esquerda) a tabela de implica√ß√£o constru√≠da e com os estados (note que √© uma m√°quina de Moore, ent√£o as sa√≠das s√£o representadas nos estados); (meio) a tabela de implica√ß√£o com as linhas de acordo com a tabela de transi√ß√£o de estados; e (direita) a vers√£o com a linha B-B j√° riscada, pois para esta entrada, a m√°quina transiciona para o mesmo estado independententemente de qual estado esteja. Isto equivale √† constru√ß√£o da tabela de implica√ß√£o e √† execu√ß√£o do primeiro passo do algoritmo.&lt;/p&gt;
&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/sdfsmoptex1b.png' width="45%" align="left" style="padding-right:5%"/&gt;
No segundo passo eliminamos os estados que produzem sa√≠da diferentes, pois nunca poder√£o ser equivalentes. Isto pode ser visto √† esquerda na figura ao lado (os estados eliminados foram destacados em cinza). Sobra a √∫nica c√©lula a ser verificada, correspondente aos estados C/0-A/0. Esta c√©lula tem uma linha riscada (que n√£o precisa ser analisada) e uma linha que referencia A-C. A refer√™ncia A-C aponta para a mesma c√©lula que estamos analisando, a c√©lula C/0-A/0. Como esta c√©lula ainda n√£o foi eliminada, nada resta a fazer e devemos continuar o algoritmo. Por√©m, n√£o h√° mais c√©lulas a serem analisadas, portanto o algoritmo terminou. Isso significa que a √∫nica c√©lula que n√£o foi eliminada ser√° a nossa classe de equival√™ncia, destacada em vermelho na tabela de implica√ß√£o da figura.&lt;/p&gt;
&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/sdfsmoptex1diagmin.png' width="13%" align="left" style="padding-right:5%"/&gt;
A c√©lula indica que a classe de equival√™ncia cont√©m somente dois estados, o C/0 e o A/0. Para finalizar, montamos um novo diagrama de transi√ß√£o de estados com um estado chamado AC/0, em vermelho, representando a classe de equival√™ncia encontrada. As transi√ß√µes s√£o transportadas dos estados da classe de equival√™ncia e, obviamente, s√£o esperadas que sejam as mesmas pois os estados s√£o equivalentes. Esta m√°quina tem a mesma funcionalidade que a anterior, por√©m tem um estado a menos. Este tipo de minimiza√ß√£o n√£o √© poss√≠vel usando a an√°lise da tabela de transi√ß√£o de estados.&lt;/p&gt;
&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;

&lt;h2&gt;Exemplo 2/3 - Moore com entrada de 2 bits&lt;/h2&gt;
&lt;p&gt;A Tabela E2 √© a tabela de transi√ß√£o de estados de uma m√°quina de Moore, com entrada de dois bits. Sua funcionalidade ou diagrama de transi√ß√£o de estados n√£o importam neste momento, mas o diagrama equivalente pode ser visto na figura.&lt;/p&gt;
&lt;table class="tg" align="left"&gt;
  &lt;tr&gt;
    &lt;th class="tg-baqh" colspan="5"&gt;Tabela E2&lt;/th&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-zlqz" rowspan="2"&gt;E.A.&lt;/td&gt;
    &lt;td class="tg-zlqz" colspan="4"&gt;P.E.&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-zlqz"&gt;00&lt;/td&gt;
    &lt;td class="tg-zlqz"&gt;01&lt;/td&gt;
    &lt;td class="tg-zlqz"&gt;10&lt;/td&gt;
    &lt;td class="tg-zlqz"&gt;11&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;S0/1&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S1&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S2&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S3&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;S1/0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S3&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S1&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S5&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;S2/1&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S1&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S3&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S2&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S4&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;S3/0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S1&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S4&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S5&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;S4/1&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S1&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S2&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S5&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;S5/0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S1&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S4&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S5&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/sdfsmoptex2diag.png' width="45%" align="right" style="padding-left:5%" /&gt;&lt;/p&gt;
&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;

&lt;p&gt;Nas tabelas abaixo podemos ver a tabela constru√≠da e com o passo 1 executado (esquerda) e ap√≥s o passo 2 executado (direita). Note que, para minimizar o esfor√ßo em preencher a tabela e evitar polu√≠-la, eu eliminei o "S" e utilizei somente os √≠ndices dos estados.&lt;/p&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/sdfsmoptex2a.png' width="50%" align="left" /&gt;
&lt;img src='https://balbertini.github.io/images/sd/sdfsmoptex2b.png' width="50%" align="right"/&gt;&lt;/p&gt;
&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;

&lt;p&gt;Nas tabelas abaixo, podemos ver a tabela de implica√ß√£o ap√≥s o passo 3 executado a exaust√£o (esquerda) e com as classes de equival√™ncia constru√≠das (direita). Na tabela da esquerda, as linhas que provocaram a exclus√£o da tabela foram real√ßadas com um cinza escuro.&lt;/p&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/sdfsmoptex2c.png' width="50%" align="left" /&gt;
&lt;img src='https://balbertini.github.io/images/sd/sdfsmoptex2d.png' width="50%" align="right"/&gt;&lt;/p&gt;
&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;

&lt;p&gt;Pela tabela, podemos inferir que os estados S4 e S0 (Sa) s√£o equivalentes entre si, assim como os estados S5 e S3 (Sb). A tabela de transi√ß√£o de estados minimizada e o diagrama de transi√ß√£o de estados minimizado podem ser vistos abaixo. A m√°quina original possu√≠a 6 estados, o que exige 3 &lt;em&gt;flip-flops&lt;/em&gt; para sua implementa√ß√£o, mas a minimizada tem 4 estados, o que exige 2 &lt;em&gt;flip-flops&lt;/em&gt;, portanto economizamos um &lt;em&gt;flip-flop&lt;/em&gt; apenas minimizando a m√°quina.&lt;/p&gt;
&lt;table class="tg" align="left"&gt;
  &lt;tr&gt;
    &lt;th class="tg-baqh" colspan="5"&gt;Tabela E2 min&lt;/th&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-zlqz" rowspan="2"&gt;E.A.&lt;/td&gt;
    &lt;td class="tg-zlqz" colspan="4"&gt;P.E.&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-zlqz"&gt;00&lt;/td&gt;
    &lt;td class="tg-zlqz"&gt;01&lt;/td&gt;
    &lt;td class="tg-zlqz"&gt;10&lt;/td&gt;
    &lt;td class="tg-zlqz"&gt;11&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-vswx"&gt;Sa/1&lt;/td&gt;
    &lt;td class="tg-bolj"&gt;Sa&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S1&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S2&lt;/td&gt;
    &lt;td class="tg-mfhl"&gt;Sb&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;S1/0&lt;/td&gt;
    &lt;td class="tg-bolj"&gt;Sa&lt;/td&gt;
    &lt;td class="tg-mfhl"&gt;Sb&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S1&lt;/td&gt;
    &lt;td class="tg-mfhl"&gt;Sb&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-baqh"&gt;S2/1&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S1&lt;/td&gt;
    &lt;td class="tg-mfhl"&gt;Sb&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S2&lt;/td&gt;
    &lt;td class="tg-bolj"&gt;Sa&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class="tg-fcno"&gt;Sb/0&lt;/td&gt;
    &lt;td class="tg-baqh"&gt;S1&lt;/td&gt;
    &lt;td class="tg-bolj"&gt;Sa&lt;/td&gt;
    &lt;td class="tg-bolj"&gt;Sa&lt;/td&gt;
    &lt;td class="tg-mfhl"&gt;Sb&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/sdfsmoptex2diagmin.png' width="45%" align="right" style="padding-left:5%" /&gt;&lt;/p&gt;
&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;

&lt;h2&gt;Exemplo 3/3 - Mealy com 15 estados&lt;/h2&gt;
&lt;p&gt;Suponha a mesma m√°quina de estados usada como exemplo no m√©todo de an√°lise da tabela de transi√ß√£o de estados, mostrada na figura. Trata-se de uma m√°quina de Mealy que reconhece 0011 ou 1001 sem sobreposi√ß√£o.&lt;/p&gt;
&lt;p&gt;&lt;img alt="FSM em forma de √°rvore" src="https://balbertini.github.io/images/sd/sdfsmopt2.png"&gt;&lt;/p&gt;
&lt;p&gt;A m√°quina tem 15 estados, portanto temos uma matriz 15x15. A tabela de implica√ß√£o, j√° com os valores das transi√ß√µes preenchidos e com as transi√ß√µes s-s riscadas, pode ser vista na figura abaixo. Note que esta √© uma m√°quina de Mealy, ent√£o coloquei a sa√≠da na transi√ß√£o (e.g. nos estados S8 e S11, que s√£o os que produzem sa√≠da, h√° transi√ß√µes na forma 0/1, indicando que esta transi√ß√£o produz sa√≠da 1). Isto corresponde √† constru√ß√£o da tabela de implica√ß√£o e √† execu√ß√£o do passo 1 do algoritmo.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Tabela exemplo 1 passo 1" src="https://balbertini.github.io/images/sd/sdfsmoptex3a.png"&gt;&lt;/p&gt;
&lt;p&gt;No passo 2, devemos eliminar as transi√ß√µes que produzem sa√≠das diferentes, ou seja, devemos eliminar todas as c√©lulas que cont√©m uma transi√ß√£o s-t onde a sa√≠da de s √© diferente da sa√≠da de t. Exemplo: a c√©lula S14-S11 possui a segunda linha como 0/1-0, o que significa que, apesar de irem para o mesmo estado, uma produz sa√≠da 1 (0/1) e outra produz sa√≠da 0 (0/0), portanto devemos eliminar esta c√©lula toda. Isto pode ser visto na figura abaixo, onde todas as c√©lulas eliminadas por este motivo foram identificadas com fundo cinza e a linha que foi o motivo da elimina√ß√£o com cinza escuro.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Tabela exemplo 1 passo 2" src="https://balbertini.github.io/images/sd/sdfsmoptex3b.png"&gt;&lt;/p&gt;
&lt;p&gt;O passo 2 eliminou os estados que trivialmente n√£o s√£o equivalentes. Podemos ent√£o come√ßar o passo 3 analisando cada c√©lula. Eu comecei pela c√©lula mais a direita inferior e continuei analisando para a esquerda. A c√©lula S14-S13 n√£o precisa ser analisada pois tem todas as transi√ß√µes riscadas. Idem para a c√©lula S14-S12. J√° a c√©lula S14-S11 foi eliminada anteriormente e tamb√©m n√£o precisa ser analisada.&lt;/p&gt;
&lt;p&gt;A primeira c√©lula que realmente precisa ser analisada √© a S14-S6. Nesta c√©lula, a transi√ß√£o 13-0 aponta para a a c√©lula S13-S0, e a transi√ß√£o 14-0 para a c√©lula S14-S0. Estas c√©lulas alvo ainda indicam equival√™ncia, ent√£o n√£o fiz nada na c√©lula em an√°lise (S14-S6). Idem para S14-S5 e S14-S4.&lt;/p&gt;
&lt;p&gt;J√° na c√©lula S14-S3, encontrei uma refer√™ncia √† S8-S0, que j√° foi eliminado em um passo anterior. Isso significa que eu devo eliminar esta c√©lula. Nesse ponto, percebi que a linha do S8 estava inteira eliminada, ent√£o eliminei  todas as c√©lulas que fazem refer√™ncia a S8, ou seja, que tem transi√ß√µes 8/x-x/x ou x/x-8/x. O resultado pode ser visto na figura abaixo.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Tabela exemplo 1 passo 3" src="https://balbertini.github.io/images/sd/sdfsmoptex3c.png"&gt;&lt;/p&gt;
&lt;p&gt;Se est√° lendo com cuidado, deve ter percebido que a elimina√ß√£o que acabei de fazer eliminou o estado S3 inteiro. Isto significa que podemos eliminar todas as c√©lulas que cont√©m transi√ß√µes que referenciam o S3, pois ele n√£o pode ser equivalente a nenhum outro estado. Se voc√™ continuar o algoritmo, terminar√° com a tabela de implica√ß√£o abaixo, onde as c√©lulas eliminadas est√£o em cinza.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Tabela exemplo 1 eliminadas" src="https://balbertini.github.io/images/sd/sdfsmoptex3d.png"&gt;&lt;/p&gt;
&lt;p&gt;A √∫nica c√©lula que ainda precisa de an√°lise √© a c√©lula S6-S4. Esta c√©lula referencia os estados S9-S13 na primeira linha e S10-S14 na segunda linha. Ambas as c√©lulas S9-S13 e S10-S14 n√£o foram eliminadas pois possuem todas as suas linhas riscadas, ent√£o n√£o devemos fazer nada nesta c√©lula. Como n√£o h√° mais c√©lulas a serem analisadas, o algoritmo terminou.&lt;/p&gt;
&lt;p&gt;Com o algoritmo finalizado, podemos inferir os estados equivalentes observando as c√©lulas que n√£o foram eliminadas. A c√©lula S6-S4 indica que estes dois estados s√£o equivalentes. Similarmente, a coluna S7 indica que os estados S7, S9, S10, S12, S13 e S14 s√£o todos equivalentes. Isso pode ser corroborado pelas colunas do S9, S10, S11, S12 e S13, que indicam tamb√©m esta equival√™ncia. Ainda, a c√©lula S11-S8 indica que estes dois estados s√£o equivalentes entre si (note que ambos produzem sa√≠da 1).&lt;/p&gt;
&lt;p&gt;Para facilitar a visualiza√ß√£o, a figura abaixo traz as classes de equival√™ncia coloridas. Para a mesma cor, os estados s√£o equivalentes.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Tabela exemplo 1 fim" src="https://balbertini.github.io/images/sd/sdfsmoptex3e.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/sd/sdfsmopt3.png' width="45%" align="right" style="padding-left:5%" /&gt;
Por √∫ltimo, devemos reconstruir o diagrama de transi√ß√£o de estados. Para cada classe de equival√™ncia, criamos um estado novo. As transi√ß√µes e as sa√≠das podem ser copiadas de qualquer um dos estados da classe, pois eles s√£o equivalentes (para as mesmas entradas, produzem a mesma sa√≠da e transicionam para o mesmo estado). Note que este m√©todo agrupa os estados em classes, ent√£o a transi√ß√£o do Sb (que √© composto por S4 e S6) que vai para o S9, por exemplo, deve ir para o estado Sa (que √© composto por S7, S9, S10, S12, S13 e S14) pois esta √© a classe de equival√™ncia que cont√©m o S9. O diagrama desta tabela √© id√™ntico ao obtido usando o m√©todo de an√°lise da tabela de transi√ß√£o de estados.&lt;/p&gt;
&lt;div style="border: 0px; overflow: auto;width: 100%;"&gt;&lt;/div&gt;

&lt;h1&gt;Refer√™ncias&lt;/h1&gt;
&lt;p&gt;&lt;p/&gt;
[1] DE VRIES, A. Finite automata: Behavior and synthesis. Elsevier, 2014.&lt;br&gt;
[2] KAM, Timothy et al. Synthesis of finite state machines: functional optimization. Springer Science &amp;amp;
Business Media, 2013.&lt;/p&gt;
&lt;p&gt;Algumas partes dos exemplos foram adaptados de apresenta√ß√µes do &lt;a href="http://www-inst.eecs.berkeley.edu/~cs150/sp00/classnotes/katz-ch9-mod.pdf"&gt;Prof. Randy H. Katz&lt;/a&gt; e da disciplina &lt;a href="https://courses.cs.washington.edu/courses/cse370/09wi/LectureSlides/22-Minimization.pdf"&gt;CSE370, Lecture 22&lt;/a&gt;.&lt;/p&gt;
&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width &lt; 768) ? "left" : align;
        indent = (screen.width &lt; 768) ? "0em" : indent;
        linebreak = (screen.width &lt; 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="sistemas digitais"></category><category term="sistemas digitais"></category><category term="fsm"></category><category term="simplifica√ß√£o"></category><category term="otimiza√ß√£o"></category></entry><entry><title>Entidade</title><link href="https://balbertini.github.io/vhdl_entity-pt_BR.html" rel="alternate"></link><published>2018-09-25T13:25:12-03:00</published><updated>2021-05-03T08:55:51-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2018-09-25:/vhdl_entity-pt_BR.html</id><summary type="html">&lt;p&gt;Entidades em VHDL.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Toda descri√ß√£o em VHDL segue um padr√£o base de uma entidade e uma arquitetura. Neste artigo, explicarei como funciona a entidade.&lt;/p&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/vhdl/vhdl_maqrefri.png' width="20%" align="left" style="padding-right:5%" /&gt;
A entidade, declarada pela palavra reservada &lt;code&gt;entity&lt;/code&gt;, √© a unidade b√°sica de descri√ß√£o de VHDL. O equivalente em um diagrama esquem√°tico √© o desenho que voc√™ faz para representar seu componente. Por exemplo, pense em uma m√°quina de vender refrigerantes em lata. Suponha que voc√™ (abstratamente), tenha que desenhar um s√≠mbolo para sua m√°quina. O meu s√≠mbolo seria como o da figura: entra dinheiro e sai latas.
&lt;br/&gt;&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;A sintaxe de uma entidade em VHDL √©:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;nome_da_entidade&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
   &lt;span class="k"&gt;generic&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lista_de_elementos_genericos&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
   &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lista_de_portas&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="nc"&gt;nome_da_entidade&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;&lt;img src='https://balbertini.github.io/images/vhdl/entidade.png' width="20%" align="right" style="padding-left:5%" /&gt;
No caso do VHDL, a entidade segue o mesmo princ√≠pio que voc√™ pensou para definir as entradas e sa√≠das da m√°quina de refrigerantes, mas obviamente estamos descrevendo um circuito digital, ent√£o as entradas e sa√≠das s√£o digitais. A palavra reservada &lt;code&gt;generic&lt;/code&gt; √© opcional e n√£o ser√° explicada neste artigo. Na entidade, quem declara os sinais que s√£o usados para modelar as suas entradas e sa√≠das √© a palavra reservada &lt;code&gt;port&lt;/code&gt;. O &lt;code&gt;port&lt;/code&gt; tem a seguinte sintaxe: &lt;code&gt;port(lista_de_portas);&lt;/code&gt;, onde a &lt;code&gt;lista_de_portas&lt;/code&gt; deve ser as portas separadas por &lt;code&gt;;&lt;/code&gt;, como em &lt;code&gt;port(porta1; porta2; porta3);&lt;/code&gt;. Pode-se colocar quantas portas desejar na sua descri√ß√£o, separadas por ponto e v√≠rgula &lt;code&gt;;&lt;/code&gt;. Note que a √∫ltima porta declarada n√£o tem &lt;code&gt;;&lt;/code&gt; pois o par√™nteses &lt;code&gt;)&lt;/code&gt; fecha a declara√ß√£o. O √∫ltimo &lt;code&gt;;&lt;/code&gt; pertence √† declara√ß√£o do &lt;code&gt;port&lt;/code&gt; e n√£o √† uma porta espec√≠fica.&lt;/p&gt;
&lt;p&gt;Cada porta em VHDL deve ser descrita com o formato &lt;code&gt;nome: dire√ß√£o tipo&lt;/code&gt;. O nome pode ser o que voc√™ desejar, desde que seja um nome v√°lido em VHDL. O tipo da porta define qual tipo de dados ser√° utilizado para aquela porta e pode ser &lt;a href="https://balbertini.github.io/vhdl_datatypes-pt_BR.html"&gt;qualquer tipo suportado&lt;/a&gt;. Quanto a dire√ß√£o, h√° quatro dire√ß√µes poss√≠veis: &lt;code&gt;in&lt;/code&gt;, &lt;code&gt;out&lt;/code&gt;, &lt;code&gt;buffer&lt;/code&gt; ou &lt;code&gt;inout&lt;/code&gt;. O &lt;code&gt;in&lt;/code&gt; √© uma entrada e, como tal, s√≥ pode ser lida pelo seu componente. Analogamente, o &lt;code&gt;out&lt;/code&gt; indica uma sa√≠da, que s√≥ pode ser escrita pelo seu componente (note que &lt;strong&gt;n√£o&lt;/strong&gt; pode ser lida). As dire√ß√µes de sa√≠da &lt;code&gt;buffer&lt;/code&gt; e &lt;code&gt;inout&lt;/code&gt; devem ser evitados (o motivo est√° &lt;a href="#bufferEinout"&gt;no final do artigo&lt;/a&gt;).&lt;/p&gt;
&lt;h3&gt;Exemplo&lt;/h3&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/vhdl/mux2x1_entidade.png' width="70%"/&gt;&lt;/p&gt;
&lt;p&gt;Vamos descrever um multiplexador como o da figura. A entidade chama-se &lt;code&gt;mux2to1&lt;/code&gt; e, na figura, est√° a esquerda. O equivalente em um diagrama esquem√°tico est√° a direita na figura. √â uma conven√ß√£o desenhar entradas a esquerda do componente, sa√≠das a direita e sinais de controle embaixo ou em cima. O tamanho, quando n√£o especificado, √© assumido em 1 bit (nesse caso os tamanhos foram especificados).&lt;/p&gt;
&lt;p&gt;O c√≥digo VHDL para esta entidade √©:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;mux2to1&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
    &lt;span class="k"&gt;port&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;    &lt;span class="k"&gt;in&lt;/span&gt;  &lt;span class="kt"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;-- selection: 0=a, 1=b&lt;/span&gt;
        &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt;    &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;-- inputs&lt;/span&gt;
        &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;    &lt;span class="k"&gt;out&lt;/span&gt;   &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c1"&gt;-- output&lt;/span&gt;
    &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="nc"&gt;mux2to1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;h2&gt;Boas pr√°ticas ao definir a entidade&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;Use um nome de entidade que indique o que ela faz.&lt;/li&gt;
&lt;li&gt;O nome do arquivo deve ser &lt;code&gt;&amp;lt;nome_da_entidade&amp;gt;.vhd&lt;/code&gt; (e.g. &lt;code&gt;mux2to1.vhd&lt;/code&gt;). Isso n√£o se refere ao VHDL mas sim √† algumas ferramentas de s√≠ntese que exigem este tipo de padroniza√ß√£o para encontrar sua entidade.&lt;/li&gt;
&lt;li&gt;Descreva primeiro os sinais de controle, depois as entradas e depois as sa√≠das. N√£o h√° nenhuma restri√ß√£o quando a isso, mas ficar√° mais f√°cil de associar sua entidade como um componente depois.&lt;/li&gt;
&lt;li&gt;Sua entidade √© a "cara" do seu componente. Capriche nos nomes das entradas e sa√≠das e descreva-as como se estivesse desenhando-as em um diagrama esquem√°tico.&lt;/li&gt;
&lt;/ol&gt;
&lt;h1&gt;Uso do &lt;code&gt;begin&lt;/code&gt; e nome da entidade&lt;/h1&gt;
&lt;p&gt;√â poss√≠vel que uma entidade tenha um &lt;code&gt;begin&lt;/code&gt;. Dentro da entidade (ap√≥s o &lt;code&gt;begin&lt;/code&gt; e antes do &lt;code&gt;end&lt;/code&gt;) podemos colocar qualquer declara√ß√£o passiva, ou seja, que n√£o altera nenhum sinal (i.e. processos passivos, asser√ß√µes est√°ticas e chamadas de procedimentos passivas). A mais utilizada √© a asser√ß√£o, assim podemos fazer verifica√ß√µes est√°ticas sobre a utiliza√ß√£o da entidade.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;nome_da_entidade&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
   &lt;span class="k"&gt;generic&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lista_de_elementos_genericos&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
   &lt;span class="k"&gt;port&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lista_de_portas&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
  &lt;span class="n"&gt;verificacoes_estaticas&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="nc"&gt;nome_da_entidade&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;h3&gt;Exemplo&lt;/h3&gt;
&lt;p&gt;No exemplo a seguir colocamos uma asser√ß√£o na parte est√°tica da entidade para verificar se o registrador foi instanciado corretamente. Caso o registrador tenha um tamanho especificado menor que 2, a asser√ß√£o ir√° falhar e qualquer simula√ß√£o ou s√≠ntese ser√° interrompida com a mensagem especificada.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;reg_deslocamento&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
  &lt;span class="k"&gt;generic&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;tamanho&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;natural&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;port&lt;/span&gt;&lt;span class="p"&gt;(...);&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
  &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;tamanho&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
  &lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Este registrador precisa ter tamanho m√≠nimo 2.&amp;quot;&lt;/span&gt;
  &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;failure&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;entity&lt;/span&gt; &lt;span class="nc"&gt;reg_deslocamento&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;&lt;a name="bufferEinout"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1&gt;Sa√≠das com dire√ß√£o &lt;code&gt;buffer&lt;/code&gt; e &lt;code&gt;inout&lt;/code&gt;&lt;/h1&gt;
&lt;p&gt;Uma sa√≠da que pode ser lida √© especificada pelo tipo &lt;code&gt;buffer&lt;/code&gt;. Este tipo de porta √© considerada especial pois implica que o sintetizador vai colocar um elemento sequencial na sa√≠da (&lt;em&gt;latch&lt;/em&gt; ou &lt;em&gt;flip-flop&lt;/em&gt;), para fazer o papel de &lt;em&gt;buffer&lt;/em&gt;, registrando a sua sa√≠da para ela que possa ser lida. Se voc√™ utilizar o &lt;code&gt;buffer&lt;/code&gt;, seu circuito nunca ser√° combinat√≥rio. Quase todos os dispositivos de prototipa√ß√£o FPGA modernos suportam o &lt;code&gt;buffer&lt;/code&gt;, mas voc√™ pode aumentar um pouco a √°rea utilizada devido ao roteamento.&lt;/p&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/vhdl/entidade.png' width="30%" align="right" style="padding-left:5%" /&gt;
Note que usando o &lt;code&gt;buffer&lt;/code&gt; voc√™ n√£o pode ler um valor que foi colocado na sa√≠da por um elemento externo ao seu, voc√™ apenas pode ler os valores que o seu pr√≥prio componente colocou na sa√≠da. Para ler o valor que um componente externo colocou na sua sa√≠da, existe o &lt;code&gt;inout&lt;/code&gt;, um tipo de porta diferente pois √© bidirecional: pode ser usada como entrada, quando voc√™ l√™ um sinal escrito por algo externo para dentro do seu componente, e pode ser usada como sa√≠da, quando voc√™ escreve o sinal de dentro do seu componente para que algo de fora leia. O &lt;code&gt;inout&lt;/code&gt; indica para o sintetizador que ele deve colocar um &lt;em&gt;buffer&lt;/em&gt; que suporte &lt;em&gt;tri-state&lt;/em&gt; na sua sa√≠da. Neste caso, voc√™ deve garantir que os elementos em VHDL que possam escrever ou ler fa√ßam isso de forma mutuamente exclusiva, para que o sintetizador possa inferir corretamente os sinais de controle do &lt;em&gt;buffer tri-state&lt;/em&gt;. Os dispositivos de prototipa√ß√£o FPGA modernos costumam possuir este tipo de &lt;em&gt;bufer&lt;/em&gt; somente nos pinos de sa√≠da do FPGA, o que deve aumentar bastante seu roteamento e, consequentemente, a √°rea do seu circuito.&lt;/p&gt;
&lt;p&gt;Resumindo, n√£o utilize &lt;code&gt;buffer&lt;/code&gt; nem &lt;code&gt;inout&lt;/code&gt; nas suas descri√ß√µes exceto se voc√™ quer mesmo os componente que ser√£o inferidos na sua descri√ß√£o. Recomendo &lt;strong&gt;fortemente&lt;/strong&gt; que aprendizes n√£o os utilizem. A maneira de contornar a restri√ß√£o de leitura de uma porta &lt;code&gt;out&lt;/code&gt; √© criar um sinal tempor√°rio, fazer o que voc√™ tem que fazer sobre este sinal e, no final da arquitetura, atribuir o sinal tempor√°rio √† sa√≠da que ele representa.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Nota:&lt;/strong&gt; se voc√™ √© meu aluno, n√£o utilize &lt;code&gt;buffer&lt;/code&gt; ou &lt;code&gt;inout&lt;/code&gt; somente com a inten√ß√£o de ler o valor na sa√≠da em hip√≥tese alguma.&lt;/p&gt;
&lt;h3&gt;Contribui√ß√µes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;24/set/2020: Arthur Lopes corrigiu o tamanho da sa√≠da do MUX do exemplo.&lt;/li&gt;
&lt;/ul&gt;</content><category term="vhdl"></category><category term="vhdl"></category><category term="basic"></category></entry><entry><title>Tipos de Dados B√°sicos em VHDL</title><link href="https://balbertini.github.io/vhdl_datatypes-pt_BR.html" rel="alternate"></link><published>2018-09-15T13:01:58-03:00</published><updated>2021-05-03T08:55:51-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2018-09-15:/vhdl_datatypes-pt_BR.html</id><summary type="html">&lt;p&gt;Tipos de dados b√°sicos existentes em VHDL.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Um tipo de dado √© uma classifica√ß√£o do conjunto poss√≠vel de valores que determinado item pode assumir. VHDL √© uma linguagem fortemente tipada, o que significa que a escolha do tipo de dado para um sinal, vari√°vel ou constante √© de suma import√¢ncia pois, para converter de um tipo ao outro, devemos utilizar fun√ß√µes de convers√£o. Uma vantagem de se utilizar uma linguagem fortemente tipada √© que o sintetizador pode perceber a maioria dos erros cometidos pelos projetistas. Exemplos (todos erros que podem ser capturados em VHDL, mas dif√≠cil de detectar em outras linguagens): atribuir um grupo de sinais de 4 bits para um grupo de 8 bits; atribuir um grupo de bits sem representa√ß√£o num√©rica para um grupo de bits representando um inteiro.&lt;/p&gt;
&lt;p&gt;√â importante salientar que, apesar de usar um estilo program√°tico, a linguagem VHDL √© uma linguagem de descri√ß√£o de hardware, portanto no final da s√≠ntese todos os tipos assumem valores altos ou baixos. Os conceitos de tipos das linguagens de programa√ß√£o n√£o existem em nenhuma HDL e esse √© um dos erros mais comuns dos projetistas de hardware. Lembre-se: voc√™ n√£o est√° descrevendo um programa e sim um hardware.&lt;/p&gt;
&lt;p&gt;O tipo de dado implicitamente influencia na s√≠ntese do seu circuito. Neste artigo veremos os tipos de dados mais comuns em VHDL e como utiliz√°-los.&lt;/p&gt;
&lt;h1&gt;Tipos pr√©-definidos&lt;/h1&gt;
&lt;p&gt;Os tipos de VHDL s√£o definidos pelos padr√µes IEEE 1076 e IEEE 1164. S√£o divididos em escalares, vetores, enumerados e compostos. Todos os tipos pr√©-definidos est√£o na biblioteca &lt;code&gt;std.standard&lt;/code&gt;, que √© inclu√≠da implicitamente em todos os projetos de VHDL (n√£o √© necess√°rio inclu√≠-la).&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="right"&gt;Tipo&lt;/th&gt;
&lt;th align="center"&gt;Categoria&lt;/th&gt;
&lt;th align="center"&gt;Sintetiz√°vel?&lt;/th&gt;
&lt;th align="left"&gt;Valores&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;bit&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;enumerado&lt;/td&gt;
&lt;td align="center"&gt;Sim&lt;/td&gt;
&lt;td align="left"&gt;&lt;code&gt;0&lt;/code&gt; ou &lt;code&gt;1&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;boolean&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;enumerado&lt;/td&gt;
&lt;td align="center"&gt;Sim&lt;/td&gt;
&lt;td align="left"&gt;&lt;code&gt;FALSE&lt;/code&gt; ou &lt;code&gt;TRUE&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;real&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;escalar&lt;/td&gt;
&lt;td align="center"&gt;N√£o&lt;/td&gt;
&lt;td align="left"&gt;-1.0E38 a +1.0E38&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;character&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;enumerado&lt;/td&gt;
&lt;td align="center"&gt;N√£o&lt;/td&gt;
&lt;td align="left"&gt;ASCII&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;O tipo &lt;code&gt;bit&lt;/code&gt; √© o mais utilizado. O &lt;code&gt;boolean&lt;/code&gt; √© √∫til para tomadas de decis√£o, como por exemplo em condi√ß√µes para um &lt;code&gt;if-else&lt;/code&gt;. √â importante notar que h√° um mapeamento direto entre &lt;code&gt;FALSE&lt;/code&gt; e &lt;code&gt;0&lt;/code&gt;, e entre &lt;code&gt;TRUE&lt;/code&gt; e &lt;code&gt;1&lt;/code&gt;, portanto &lt;code&gt;FALSE&lt;/code&gt;&amp;lt;&lt;code&gt;TRUE&lt;/code&gt;.  O &lt;code&gt;real&lt;/code&gt; normalmente √© tratado como um n√∫mero de ponto flutuante de precis√£o dupla. O &lt;code&gt;character&lt;/code&gt; representa um grupo de 8 bits correspondentes aos 256 caracteres da tabela ASCII. Note que estes dois √∫ltimos &lt;strong&gt;n√£o s√£o sintetiz√°veis&lt;/strong&gt;, portanto n√£o devem ser utilizados como entradas ou sa√≠das dos m√≥dulos. Apesar de n√£o serem sintetiz√°veis, estes tipos s√£o √∫teis durante as simula√ß√µes.&lt;/p&gt;
&lt;p&gt;O tipo &lt;code&gt;integer&lt;/code&gt; tamb√©m √© bastante utilizado e possui dois subtipos padr√µes:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="right"&gt;Tipo&lt;/th&gt;
&lt;th align="center"&gt;Categoria&lt;/th&gt;
&lt;th align="center"&gt;Sintetiz√°vel?&lt;/th&gt;
&lt;th align="left"&gt;Valores&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;integer&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;escalar&lt;/td&gt;
&lt;td align="center"&gt;Sim&lt;/td&gt;
&lt;td align="left"&gt;-2147483647 a 2147483647&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;natural&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;escalar&lt;/td&gt;
&lt;td align="center"&gt;Sim&lt;/td&gt;
&lt;td align="left"&gt;0 a 2147483647&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;positive&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;escalar&lt;/td&gt;
&lt;td align="center"&gt;Sim&lt;/td&gt;
&lt;td align="left"&gt;1 a 2147483647&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;A especifica√ß√£o da linguagem demanda que no m√≠nimo os n√∫meros da tabela sejam aceitos, mas n√£o limita o n√∫mero de bits do inteiro. Grande parte das ferramentas implementam o inteiro como um mapeamento direto para o inteiro de 32 bits, presente na maioria das plataformas. A forma de interpreta√ß√£o tamb√©m n√£o √© definida, mas a maioria das ferramentas interpreta como uma representa√ß√£o em complemento de dois. Os tipos &lt;code&gt;natural&lt;/code&gt; e &lt;code&gt;positive&lt;/code&gt; s√£o apenas limita√ß√µes nos valores que um objeto deste tipo poder√° assumir. √â poss√≠vel declarar inteiros com uma limita√ß√£o personalizada:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;meusinal&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;integer&lt;/span&gt; &lt;span class="k"&gt;range&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;O trecho acima declara o &lt;code&gt;meusinal&lt;/code&gt; como um inteiro de 4 bits. Contudo, valores maiores que a implementa√ß√£o da ferramenta de s√≠ntese n√£o s√£o poss√≠veis, portanto se voc√™ precisar de um inteiro maior que 32 bits, verifique se sua ferramenta suporta inteiros grandes ou utilize vetores. A utiliza√ß√£o da limita√ß√£o do inteiro (com &lt;code&gt;range&lt;/code&gt; ou usando os subtipos &lt;code&gt;natural&lt;/code&gt; e &lt;code&gt;positive&lt;/code&gt;) ajuda na detec√ß√£o de erros pois, se em algum momento da simula√ß√£o for feita a tentativa de atribuir um valor fora da faixa permitida, o simulador ir√° emitir uma mensagem de erro. Al√©m disso, usar a limita√ß√£o expl√≠cita diminui o n√∫mero de bits utilizados para a representa√ß√£o, o que economizar√° portas l√≥gicas no seu circuito. Pense assim: por que voc√™ precisa de um somador de 32 bits se seus inteiros s√≥ v√£o assumir valores de -16 a 15?&lt;/p&gt;
&lt;p&gt;Os tipos &lt;code&gt;bit&lt;/code&gt; e &lt;code&gt;character&lt;/code&gt; tamb√©m possuem suas vers√µes em vetores:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="right"&gt;Tipo&lt;/th&gt;
&lt;th align="center"&gt;Categoria&lt;/th&gt;
&lt;th align="center"&gt;Sintetiz√°vel?&lt;/th&gt;
&lt;th align="left"&gt;Valores&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;bit_vector&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;vetor&lt;/td&gt;
&lt;td align="center"&gt;Sim&lt;/td&gt;
&lt;td align="left"&gt;bits&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;string&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;vetor&lt;/td&gt;
&lt;td align="center"&gt;N√£o&lt;/td&gt;
&lt;td align="left"&gt;caracteres&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;O &lt;code&gt;bit_vector&lt;/code&gt; √© muito utilizado para representar um grupo de bits. J√° o tipo &lt;code&gt;string&lt;/code&gt; √© usado somente para mensagens durante a simula√ß√£o (note que ele n√£o √© sintetiz√°vel).&lt;/p&gt;
&lt;p&gt;H√° ainda dois tipos que n√£o s√£o sintetiz√°veis mas s√£o importantes em VHDL:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="right"&gt;Tipo&lt;/th&gt;
&lt;th align="center"&gt;Categoria&lt;/th&gt;
&lt;th align="center"&gt;Sintetiz√°vel?&lt;/th&gt;
&lt;th align="left"&gt;Valores&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;severity_level&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;enumerado&lt;/td&gt;
&lt;td align="center"&gt;N√£o&lt;/td&gt;
&lt;td align="left"&gt;&lt;code&gt;note&lt;/code&gt;, &lt;code&gt;warning&lt;/code&gt;, &lt;code&gt;error&lt;/code&gt; ou &lt;code&gt;failure&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;time&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;enumerado&lt;/td&gt;
&lt;td align="center"&gt;N√£o&lt;/td&gt;
&lt;td align="left"&gt;depende&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;O tipo &lt;code&gt;severity_level&lt;/code&gt; √© usado em &lt;em&gt;testbenchs&lt;/em&gt; para informar a gravidade do problema encontrado. O tipo &lt;code&gt;time&lt;/code&gt; √© usado para descrever a temporiza√ß√£o do circuito, tanto em descri√ß√µes temporizadas quanto em &lt;em&gt;testbenchs&lt;/em&gt;. Os valores de tempo s√£o acompanhados dos multiplicadores que indicam a escala de tempo: &lt;code&gt;fs&lt;/code&gt; (fentosegundos), &lt;code&gt;ps&lt;/code&gt; (picosegungos), &lt;code&gt;ns&lt;/code&gt; (nanosegundos), &lt;code&gt;us&lt;/code&gt; (microsegundos), &lt;code&gt;ms&lt;/code&gt; (milisegundos), &lt;code&gt;sec&lt;/code&gt; (segundos), &lt;code&gt;min&lt;/code&gt; (minutos) e &lt;code&gt;hr&lt;/code&gt; (horas).&lt;/p&gt;
&lt;p&gt;No exemplo abaixo, a mensagem "Teste" ser√° impressa na tela sem parar a simula√ß√£o e o &lt;code&gt;sinal&lt;/code&gt; assumir√° o valor &lt;code&gt;entrada&lt;/code&gt;, mas somente ap√≥s 10ns.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;report&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Teste&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;severity&lt;/span&gt; &lt;span class="n"&gt;note&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;sinal&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;entrada&lt;/span&gt; &lt;span class="k"&gt;after&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt; &lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;h1&gt;Pacote IEEE 1164&lt;/h1&gt;
&lt;p&gt;Um dos pacotes mais utilizados em VHDL √© o &lt;code&gt;std_logic_1164&lt;/code&gt; da biblioteca &lt;code&gt;ieee&lt;/code&gt;, que define um MVL (l√≥gica multivariada, ou o nome completo &lt;em&gt;Multivalue Logic System for VHDL Model Interoperability&lt;/em&gt;). Pra usar este pacote, √© necess√°rio incluir a declara√ß√£o de uso no preambulo do seu projeto:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;library&lt;/span&gt; &lt;span class="nn"&gt;ieee&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;use&lt;/span&gt; &lt;span class="nn"&gt;ieee.std_logic_1164.&lt;/span&gt;&lt;span class="k"&gt;all&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;O tipo de dado prim√°rio definido nesta biblioteca √© o &lt;code&gt;std_ulogic&lt;/code&gt; (&lt;em&gt;standard unresolved logic&lt;/em&gt;), que pode assumir outros valores usados em projeto digital al√©m dos valores ideais &lt;code&gt;0&lt;/code&gt; e &lt;code&gt;1&lt;/code&gt;. Esta modelagem de valores √© mais pr√≥xima do mundo real, mas deve ser utilizada com cuidado.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="right"&gt;Valor&lt;/th&gt;
&lt;th align="center"&gt;Significado&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;U&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;N√£o inicializado (&lt;em&gt;uninitialized&lt;/em&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;X&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;Desconhecido (forte)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;Zero (forte)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;1&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;Um (forte)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;Z&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;Alta imped√¢ncia (&lt;em&gt;tri-state&lt;/em&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;W&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;Desconhecido (fraco)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;L&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;Zero (fraco)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;H&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;Um (fraco)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;-&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;Qualquer um (&lt;em&gt;don't care&lt;/em&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;O valor &lt;code&gt;U&lt;/code&gt; n√£o foi pensado para ser utilizado pelo projetista mas sim pelas ferramentas de simula√ß√£o. Quando seu circuito √© simulado, um sinal em &lt;code&gt;U&lt;/code&gt; significa que at√© aquele momento n√£o houve nenhuma atribui√ß√£o para aquele sinal. Isso √© √∫til para depura√ß√£o pois permite diferenciar um sinal que nunca foi atribu√≠do de um que foi atribu√≠do com zero, por exemplo. √â especialmente √∫til para detectar o esquecimento do acionamento do &lt;em&gt;reset&lt;/em&gt; de um circuito, pois √© comum os projetistas negligenciarem o &lt;em&gt;reset&lt;/em&gt; antes de come√ßar a simular.&lt;/p&gt;
&lt;p&gt;J√° o &lt;code&gt;X&lt;/code&gt; e o &lt;code&gt;W&lt;/code&gt; indicam valores que est√£o fora do escopo naquele ponto do projeto. Atribuir o valor &lt;code&gt;X&lt;/code&gt; para um sinal n√£o √© uma boa pr√°tica, mas ele tamb√©m √© √∫til em uma simula√ß√£o. Quando aparecer um sinal com valor &lt;code&gt;X&lt;/code&gt; ou &lt;code&gt;W&lt;/code&gt; na sua simula√ß√£o, muito provavelmente houve mais de uma atribui√ß√£o para o mesmo sinal e elas s√£o divergentes (e.g. uma atribui√ß√£o &lt;code&gt;0&lt;/code&gt; e uma &lt;code&gt;1&lt;/code&gt; em pontos diferentes da sua descri√ß√£o). Se sua simula√ß√£o tem um destes valores, corrija o seu circuito antes de sintetiz√°-lo  pois este valor n√£o existe no mundo real: o circuito vai efetivamente assumir &lt;code&gt;1&lt;/code&gt; ou &lt;code&gt;0&lt;/code&gt;, fechando um curto-circuito caso haja uma atribui√ß√£o divergente.&lt;/p&gt;
&lt;p&gt;Note tamb√©m que o &lt;code&gt;X&lt;/code&gt; &lt;strong&gt;n√£o representa&lt;/strong&gt; o &lt;em&gt;don't care&lt;/em&gt; mas sim um valor desconhecido. Como a letra X √© utilizada para o &lt;em&gt;don't care&lt;/em&gt; nos m√©todos manuais (e.g. mapa de Karnaugh), √© comum a confus√£o entre os dois valores.&lt;/p&gt;
&lt;p&gt;A diferen√ßa entre um valor &lt;em&gt;forte&lt;/em&gt; e &lt;em&gt;fraco&lt;/em&gt; √© apenas que os fracos indicam a utiliza√ß√£o de resistores de &lt;em&gt;pull-up&lt;/em&gt; ou &lt;em&gt;pull-down&lt;/em&gt;, portanto se uma sa√≠da &lt;code&gt;H&lt;/code&gt; for ligada a uma sa√≠da &lt;code&gt;0&lt;/code&gt;, o sinal ser√° &lt;code&gt;0&lt;/code&gt; e n√£o h√° problemas al√©m do consumo de energia extra ocasionado pelo resistor. Contudo, se uma sa√≠da forte &lt;code&gt;1&lt;/code&gt; for ligada a uma sa√≠da &lt;code&gt;0&lt;/code&gt;, o resultado √© um curto-circuito e poss√≠vel dano ao circuito. Voc√™ pode livremente atribuir &lt;code&gt;H&lt;/code&gt;, &lt;code&gt;1&lt;/code&gt;, &lt;code&gt;L&lt;/code&gt; ou &lt;code&gt;0&lt;/code&gt; para um sinal, e ambos ser√£o sintetizados similarmente, mas as vers√µes &lt;code&gt;H&lt;/code&gt; e &lt;code&gt;L&lt;/code&gt; instruem o sintetizador a usar portas com tecnologia de dreno aberto (&lt;em&gt;open-drain&lt;/em&gt;) ou similar, permitindo a utiliza√ß√£o de resistores de &lt;em&gt;pull-up&lt;/em&gt; ou &lt;em&gt;pull-down&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Se a plataforma alvo n√£o suportar buffers &lt;em&gt;tri-state&lt;/em&gt; o valor &lt;code&gt;Z&lt;/code&gt; n√£o ser√° sintetizado, mas as ferramentas normalmente conseguem inferir um decisor baseado em multiplexador para substituir a escolha de qual sa√≠da ser√° colocada no sinal. Note que a plataforma alvo pode n√£o ter &lt;em&gt;tri-state&lt;/em&gt;, ent√£o tome cuidado ao interlig√°-la com circuitos externos que esperam que ela tenha.&lt;/p&gt;
&lt;p&gt;Outro tipo desta biblioteca √© o &lt;code&gt;std_logic&lt;/code&gt;. Ele √© id√™ntico ao &lt;code&gt;std_ulogic&lt;/code&gt; e pode assumir qualquer valor dos citados acima, mas tem uma diferen√ßa aos olhos do sintetizador: ele pode ser resolvido. O &lt;code&gt;std_ulogic&lt;/code&gt; n√£o especifica o que acontece quando voc√™ faz duas atribui√ß√µes para o mesmo sinal (n√£o importa se diferente ou iguais). Se o sinal for &lt;code&gt;std_logic&lt;/code&gt;, o sintetizador entende que voc√™ sabe o que est√° fazendo e n√£o te indicar√° nada ou no m√°ximo mostrar√° uma mensagem de alerta, enquanto se o sinal for do tipo &lt;code&gt;std_ulogic&lt;/code&gt;, o sintetizador ir√° se recusar a continuar a s√≠ntese, alertando-o que h√° mais de uma atribui√ß√£o para aquele sinal.&lt;/p&gt;
&lt;p&gt;Ambos os tipos desta biblioteca suportam a vers√£o em vetor:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="right"&gt;Tipo&lt;/th&gt;
&lt;th align="center"&gt;Categoria&lt;/th&gt;
&lt;th align="center"&gt;Sintetiz√°vel?&lt;/th&gt;
&lt;th align="left"&gt;Valores&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;std_ulogic&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;enumerado&lt;/td&gt;
&lt;td align="center"&gt;Sim&lt;/td&gt;
&lt;td align="left"&gt;multivariado&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;std_logic&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;enumerado&lt;/td&gt;
&lt;td align="center"&gt;Sim&lt;/td&gt;
&lt;td align="left"&gt;multivariado&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;std_ulogic_vector&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;vetor&lt;/td&gt;
&lt;td align="center"&gt;Sim&lt;/td&gt;
&lt;td align="left"&gt;&lt;code&gt;std_ulogic&lt;/code&gt;s&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;std_logic_vector&lt;/code&gt;&lt;/td&gt;
&lt;td align="center"&gt;vetor&lt;/td&gt;
&lt;td align="center"&gt;Sim&lt;/td&gt;
&lt;td align="left"&gt;&lt;code&gt;std_logic&lt;/code&gt;s&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Os valores multivariados s√£o qualquer um da tabela no in√≠cio desta se√ß√£o. A s√≠ntese √© poss√≠vel para estes tipos, mas esteja atento para as observa√ß√µes nesta se√ß√£o quando eles forem diferentes de &lt;code&gt;0&lt;/code&gt; ou &lt;code&gt;1&lt;/code&gt;.&lt;/p&gt;
&lt;h1&gt;Qual tipo utilizar?&lt;/h1&gt;
&lt;p&gt;N√£o existe uma regra de que tipo utilizar, mas h√° v√°rias dicas de como utilizar melhor a infraestrutura de tipos em VHDL.&lt;/p&gt;
&lt;p&gt;A primeira dica √© usar o bom senso. Se voc√™ est√° projetando uma unidade aritm√©tica (e.g. multiplicador), faz pleno sentido que as entradas e sa√≠das sejam &lt;code&gt;unsigned&lt;/code&gt; ou &lt;code&gt;signed&lt;/code&gt; de acordo com a maneira como a unidade aritm√©tica as interpreta (e.g. o multiplicador √© de inteiros sem ou com sinal). Contudo, se voc√™ est√° projetando um multiplexador, n√£o faz sentido usar um tipo de dados com interpreta√ß√£o embutida pois o multiplexador n√£o opera sobre os dados. Nesse caso, utilize o tipo &lt;code&gt;bit&lt;/code&gt; ou &lt;code&gt;std_logic&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;&lt;code&gt;std_logic&lt;/code&gt; ou &lt;code&gt;bit&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;Este √© um tema de debate entre os projetistas h√° anos. A maioria dos projetistas opta por utilizar o &lt;code&gt;std_logic&lt;/code&gt; e evitar aborrecimentos, mas esta n√£o √© uma boa pr√°tica. Para escolher corretamente, voc√™ precisa pensar no circuito que est√° desenvolvendo e na arquitetura alvo.&lt;/p&gt;
&lt;p&gt;O FPGA, por exemplo, n√£o suporta internamente nenhum dos tipos do &lt;code&gt;std_logic&lt;/code&gt;, portanto n√£o faz sentido utiliz√°-lo pois internamente s√≥ haver√° bits. Se sua arquitetura alvo √© um FPGA, como por exemplo nas disciplinas de laborat√≥rio, use sempre o tipo &lt;code&gt;bit&lt;/code&gt;. As excess√µes onde a utiliza√ß√£o do &lt;code&gt;std_logic&lt;/code&gt; √© correta s√£o: (i) quando voc√™ estiver projetando um barramento, (ii) quando estiver lidando com a sa√≠da, e (iii) em simula√ß√µes.&lt;/p&gt;
&lt;p&gt;No caso (i) a utiliza√ß√£o do &lt;em&gt;tri-state&lt;/em&gt; pode ser √∫til pois voc√™ poder√° interligar sa√≠das sem problemas, desde que somente uma delas esteja ativa e as demais estejam em &lt;em&gt;tri-state&lt;/em&gt;. Contudo, se o seu barramento for interno ao FPGA, ele ser√° sintetizado usando multiplexadores e n√£o &lt;em&gt;tri-state&lt;/em&gt; real pois o FPGA n√£o tem esta funcionalidade internamente. Lembre-se que o &lt;em&gt;tri-state&lt;/em&gt; do &lt;code&gt;std_logic&lt;/code&gt; √© representado por &lt;code&gt;Z&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;J√° no caso (ii) voc√™ pode utilizar o &lt;code&gt;std_logic&lt;/code&gt; livremente pois a maioria dos FPGAs implementa &lt;em&gt;open-drain&lt;/em&gt; e &lt;em&gt;tri-state&lt;/em&gt; nos buffers de sa√≠da. Voc√™ pode facilmente usar &lt;em&gt;tri-state&lt;/em&gt; e valores de &lt;em&gt;weak&lt;/em&gt; (que implementam &lt;em&gt;pull-up&lt;/em&gt; e &lt;em&gt;pull-down&lt;/em&gt;), mas lembre-se que nem todos os valores do &lt;code&gt;std_logic&lt;/code&gt; s√£o sintetiz√°veis.&lt;/p&gt;
&lt;p&gt;No √∫ltimo caso (iii), o valor &lt;code&gt;U&lt;/code&gt; (&lt;em&gt;uninitialized&lt;/em&gt;) pode ser √∫til para saber se um determinado valor foi ou n√£o escrito alguma vez durante a simula√ß√£o pois √© o valor padr√£o do &lt;code&gt;std_logic&lt;/code&gt;. Na simula√ß√£o todos os valores do &lt;code&gt;std_logic&lt;/code&gt; s√£o expressos corretamente, mas lembre-se que na s√≠ntese os valores sempre v√£o assumir &lt;code&gt;0&lt;/code&gt; ou &lt;code&gt;1&lt;/code&gt; mesmo que nunca tenham tido um valor atribu√≠do.&lt;/p&gt;
&lt;p&gt;Uma das fal√°cias do tipo &lt;code&gt;std_logic&lt;/code&gt; √© o &lt;em&gt;don't care&lt;/em&gt;. Ele √© representado pelo &lt;code&gt;-&lt;/code&gt; e n√£o pelo &lt;code&gt;X&lt;/code&gt; (&lt;em&gt;unknown&lt;/em&gt;) normalmente usado nos m√©todos manuais (e.g mapa de Karnaugh). Se usado corretamente, a maioria das ferramentas interpreta o &lt;code&gt;-&lt;/code&gt; como o &lt;em&gt;don't care&lt;/em&gt; esperado, inclusive na atribui√ß√£o condicional. Algumas ferramentas tratam ambos os &lt;code&gt;X&lt;/code&gt; e o &lt;code&gt;-&lt;/code&gt; como &lt;em&gt;don't care&lt;/em&gt; para evitar a confus√£o, mas ela ainda acontece especialmente entre projetistas iniciantes, portanto evite-o.&lt;/p&gt;
&lt;p&gt;De fato, a maioria dos projetos n√£o necessita do &lt;code&gt;std_logic&lt;/code&gt; e acabam por utiliz√°-lo apenas com os valores &lt;code&gt;0&lt;/code&gt; ou &lt;code&gt;1&lt;/code&gt;, como substitui√ß√£o ao tipo &lt;code&gt;bit&lt;/code&gt;. Como regra geral, utilize o tipo de dado certo para o trabalho que est√° fazendo e, enquanto voc√™ estiver aprendendo, utilize somente o tipo &lt;code&gt;bit&lt;/code&gt; para evitar problemas. Quando estiver confort√°vel, transicione para o tipo &lt;code&gt;std_ulogic&lt;/code&gt; quando precisar de sinais multivariados e s√≥ quando realmente precisar de um sinal de multivariado com m√∫ltiplas atribui√ß√µes (e.g. barramento) use o &lt;code&gt;std_logic&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;Contribui√ß√µes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;19/set/2020: Gabriel Youssef Campos fez algumas corre√ß√µes sint√°ticas.&lt;/li&gt;
&lt;li&gt;22/nov/2020: Lucas Ventura Monegatto alterou os limites do inteiro.&lt;/li&gt;
&lt;/ul&gt;</content><category term="vhdl"></category><category term="vhdl"></category><category term="tipos"></category></entry><entry><title>Simuladores e sintetizadores de HDL</title><link href="https://balbertini.github.io/vhdl_simulators-pt_BR.html" rel="alternate"></link><published>2018-09-14T10:00:54-03:00</published><updated>2021-05-04T21:04:37-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2018-09-14:/vhdl_simulators-pt_BR.html</id><summary type="html">&lt;p&gt;Lista de programas para HDL.&lt;/p&gt;</summary><content type="html">&lt;p&gt;H√° diversos programas que suportam descri√ß√µes em HDL. Para come√ßar no seu mundo de projetista de hardware usando VHDL ou Verilog, escolha um programa nesta lista e prepare seu ambiente. Quase todos s√£o um &lt;em&gt;Integrated Design Environment&lt;/em&gt; (IDE), ou seja, possuem um ambiente com suporte a descri√ß√£o incluindo &lt;em&gt;syntax highlight&lt;/em&gt;, acesso r√°pido a simula√ß√£o, s√≠ntese e algum sistema de gerenciamento de projetos.&lt;/p&gt;
&lt;h3&gt;GHDL&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://github.com/ghdl/ghdl/releases"&gt;&lt;i style="font-size: 1em;" class="fas fa-download"&gt;&lt;/i&gt; Download&lt;/a&gt; |
&lt;a href="http://ghdl.free.fr/"&gt;&lt;i style="font-size: 1em;" class="fas fa-file-alt"&gt;&lt;/i&gt; P√°gina&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;HDLs:&lt;/strong&gt; VHDL | &lt;strong&gt;SOs:&lt;/strong&gt; &lt;i style="font-size: 1em;" class="fab fa-windows"&gt;&lt;/i&gt; &lt;i style="font-size: 1em;" class="fab fa-linux"&gt;&lt;/i&gt; &lt;i style="font-size: 1em;" class="fab fa-apple"&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p&gt;O GHDL √© um simulador de c√≥digo aberto que suporta somente a linguagem VHDL, mantido pelo desenvolvedor Tristan Gingold. Permite que voc√™ compile e simule sua descri√ß√£o na sua m√°quina usando um compilador nativo, o que √© r√°pido em compara√ß√£o aos outros simuladores desta p√°gina. Contudo, o GHDL n√£o faz s√≠ntese nem simula√ß√£o temporizada (exceto se voc√™ descrever seu circuito usando temporiza√ß√£o expl√≠cita no VHDL).&lt;/p&gt;
&lt;p&gt;Este √© o simulador usado para corrigir os exerc√≠cios de Sistemas Digitais. Por esse motivo, os professores mant√©m uma m√°quina virtual com GHDL instalado, atualizado e funcionando, e esta m√°quina est√° dispon√≠vel para os alunos. Veja &lt;a href="https://balbertini.github.io/vhdl_vmghdl-pt_BR.html"&gt;este artigo&lt;/a&gt; se deseja trabalhar com esta m√°quina virtual.&lt;/p&gt;
&lt;p&gt;Alternativamente, se voc√™ prefere &lt;em&gt;containers&lt;/em&gt; tipo &lt;a href="https://www.docker.com/"&gt;Docker&lt;/a&gt;, h√° uma receita para o GHDL &lt;a href="https://github.com/ghdl/docker"&gt;aqui&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Contribui√ß√£o do aluno Fillipe Lima (SD1 2020S2): o aluno encontrou &lt;a href="https://www.youtube.com/watch?v=H2GyAIYwZbw"&gt;um v√≠deo no YouTube&lt;/a&gt; que mostra como instalar e usar o GHDL e o GTKWave no Windows.&lt;/p&gt;
&lt;p&gt;Contribui√ß√£o do Prof. Edson Midorikawa: &lt;a href="https://balbertini.github.io/vhdl_windowsghdl-pt_BR.html"&gt;um artigo&lt;/a&gt; com um &lt;em&gt;quickstart&lt;/em&gt; do GHDL no Windows 10.&lt;/p&gt;
&lt;h3&gt;EDA Playground&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://www.edaplayground.com/"&gt;&lt;i style="font-size: 1em;" class="fas fa-file-alt"&gt;&lt;/i&gt; P√°gina&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;HDLs:&lt;/strong&gt; VHDL, Verilog, SystemVerilog, C++/SystemC, Outras | &lt;strong&gt;SOs:&lt;/strong&gt; &lt;i style="font-size: 1em;" class="fas fa-globe"&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p&gt;O EDA Playground √© um simulador online que suporta v√°rias linguagens de descri√ß√£o de hardware. √â mantido pela &lt;a href="https://www.doulos.com/"&gt;Doulos&lt;/a&gt;, uma empresa privada que fornece treinamentos (inclusive em HDLs). Sua maior vantagem est√° em funcionar com qualquer navegador de internet moderno, sem necessidade de nenhuma instala√ß√£o adicional. H√° limita√ß√µes para utilizar o ambiente sem uma conta, mas √© poss√≠vel se cadastrar com o email @usp e conseguir uma conta com suporte a salvar o trabalho e acesso a algumas ferramentas indispon√≠veis na vers√£o aberta (o processo de cadastro demora, n√£o deixe para se cadastrar na √∫ltima hora).&lt;/p&gt;
&lt;p&gt;Para us√°-lo, basta acessar o link acima (P√°gina) e come√ßar o seu projeto. A ferramenta s√≥ aceita projetos no formato padr√£o de DUT (&lt;em&gt;Design Under Test&lt;/em&gt;), onde o seu &lt;em&gt;testbench&lt;/em&gt; √© respons√°vel por instanciar e gerar os est√≠mulos para sua entidade &lt;em&gt;toplevel&lt;/em&gt;. Lembre-se de escolher a linguagem no menu a esquerda (&lt;em&gt;Testbench + Design&lt;/em&gt;), assim como o simulador (&lt;em&gt;Tools &amp;amp; Simulators&lt;/em&gt;). Dica: Se voc√™ marcar a op√ß√£o &lt;em&gt;Open EPWave after run&lt;/em&gt;, a forma de onda da simula√ß√£o ser√° mostrada assim que a mesma terminar.&lt;/p&gt;
&lt;p&gt;H√° um tutorial b√°sico do EDA Playground &lt;a href="https://balbertini.github.io/vhdl_edaplayground-pt_BR.html"&gt;aqui&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Active-HDL&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://www.aldec.com/students/student.php?id=9"&gt;&lt;i style="font-size: 1em;" class="fas fa-download"&gt;&lt;/i&gt; Download&lt;/a&gt; |
&lt;a href="https://www.aldec.com/en/products/fpga_simulation/active_hdl_student"&gt;&lt;i style="font-size: 1em;" class="fas fa-file-alt"&gt;&lt;/i&gt; P√°gina&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;HDLs:&lt;/strong&gt; VHDL, Verilog | &lt;strong&gt;SOs:&lt;/strong&gt; &lt;i style="font-size: 1em;" class="fab fa-windows"&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p&gt;Este programa √© um IDE completo para VHDL e Verilog, mas suporta somente simula√ß√£o. Para s√≠ntese, voc√™ deve ter instalado um programa de espec√≠fico na sua m√°quina (e.g. Quartus, Vivado, ISE, etc), e a IDE se encarrega de invoc√°-lo corretamente.&lt;/p&gt;
&lt;p&gt;Possui a vantagem de ser mantido por uma empresa terceira (&lt;a href="https://www.aldec.com"&gt;Aldec&lt;/a&gt;), independente do fabricante do hardware alvo do seu projeto. O link para download √© da vers√£o de estudante e necessita cadastro (use seu email \@usp).&lt;/p&gt;
&lt;h3&gt;Quartus&lt;/h3&gt;
&lt;p&gt;&lt;a href="http://fpgasoftware.intel.com/?edition=lite"&gt;&lt;i style="font-size: 1em;" class="fas fa-download"&gt;&lt;/i&gt; Download&lt;/a&gt; |
&lt;a href="https://www.intel.com/content/www/us/en/software/programmable/quartus-prime/download.html"&gt;&lt;i style="font-size: 1em;" class="fas fa-file-alt"&gt;&lt;/i&gt; P√°gina&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;HDLs:&lt;/strong&gt; VHDL, Verilog | &lt;strong&gt;SOs:&lt;/strong&gt; &lt;i style="font-size: 1em;" class="fab fa-windows"&gt;&lt;/i&gt; &lt;i style="font-size: 1em;" class="fab fa-linux"&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p&gt;O Quartus √© um IDE fornecido pela Altera, uma subsidi√°ria da &lt;a href="https://www.intel.com"&gt;Intel&lt;/a&gt;. Permite simula√ß√£o atrav√©s do ModelSim (fornecido com o pacote), incluindo simula√ß√£o temporizada para os dispositivos deste fabricante. Quando fizer download, tenha certeza que escolheu o pacote completo incluindo o ModelSim. O link para download √© da vers√£o Lite, que √© gratuita e suporta sem licen√ßa os dispositivos do programa universit√°rio. Caso esteja trabalhando em algum projeto que utilize um dispositivo n√£o suportado na vers√£o Lite, √© poss√≠vel obter uma licen√ßa atrav√©s do programa universit√°rio (consulte seu orientador(a)).&lt;/p&gt;
&lt;h3&gt;Vivado/ISE&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://www.xilinx.com/support/download.html"&gt;&lt;i style="font-size: 1em;" class="fas fa-download"&gt;&lt;/i&gt; Download&lt;/a&gt; |
&lt;a href="https://www.xilinx.com/products/design-tools/vivado.html"&gt;&lt;i style="font-size: 1em;" class="fas fa-file-alt"&gt;&lt;/i&gt; P√°gina&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;HDLs:&lt;/strong&gt; VHDL, Verilog | &lt;strong&gt;SOs:&lt;/strong&gt; &lt;i style="font-size: 1em;" class="fab fa-windows"&gt;&lt;/i&gt; &lt;i style="font-size: 1em;" class="fab fa-linux"&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p&gt;O Vivado √© um IDE fornecido pela &lt;a href="https://www.xilinx.com/"&gt;Xilinx&lt;/a&gt;. Permite simula√ß√£o atrav√©s do ModelSim (fornecido no pacote), incluindo simula√ß√£o temporizada para os dispositivos fabricados pela Xilinx. O link para download √© gen√©rico, consulte seu professor(a) qual vers√£o ir√° utilizar (recomendo a Lab Edition pois n√£o precisa de licen√ßa alguma). A vers√£o HLx possui ainda suporte a s√≠ntese de alto n√≠vel.&lt;/p&gt;
&lt;p&gt;O ISE √© uma vers√£o antiga do IDE da Xilinx dispon√≠vel somente para Windows. Fa√ßa &lt;a href="https://www.xilinx.com/support/download/index.html/content/xilinx/en/downloadNav/design-tools.html"&gt;download&lt;/a&gt; dessa vers√£o somente se for trabalhar com placas antigas (i.e. Spartan-6), caso contr√°rio opte pelo Vivado.&lt;/p&gt;
&lt;h1&gt;Programas √∫teis&lt;/h1&gt;
&lt;h3&gt;GHDL-LS&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://github.com/ghdl/ghdl-language-server"&gt;&lt;i style="font-size: 1em;" class="fab fa-github"&gt;&lt;/i&gt; P√°gina&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;O GHDL-LS √© um &lt;em&gt;Language Server&lt;/em&gt; para VHDL, baseado no GHDL. Sua principal fun√ß√£o √© prover ao seu editor favorito uma maneira f√°cil de fazer a verifica√ß√£o sint√°tica em tempo real, al√©m de outras funcionalidades que facilitam a vida do desenvolvedor. O Guilherme Salustiano fez &lt;a href="https://balbertini.github.io/vhdl_ghdl_ls-pt_BR.html"&gt;um &lt;em&gt;post&lt;/em&gt;&lt;/a&gt; sobre como instalar e integrar o GHDL-LS a um editor.&lt;/p&gt;
&lt;h3&gt;GTKWave&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://sourceforge.net/projects/gtkwave/files/"&gt;&lt;i style="font-size: 1em;" class="fas fa-download"&gt;&lt;/i&gt; Download&lt;/a&gt; |
&lt;a href="http://gtkwave.sourceforge.net/"&gt;&lt;i style="font-size: 1em;" class="fas fa-file-alt"&gt;&lt;/i&gt; P√°gina&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;SOs:&lt;/strong&gt; &lt;i style="font-size: 1em;" class="fab fa-windows"&gt;&lt;/i&gt; &lt;i style="font-size: 1em;" class="fab fa-linux"&gt;&lt;/i&gt; &lt;i style="font-size: 1em;" class="fab fa-apple"&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p&gt;O GTKWave √© um visualizador de formas de onda de c√≥digo aberto baseado no &lt;a href="http://www.gtk.org/"&gt;GTK+&lt;/a&gt;. Quando simular a descri√ß√£o do seu circuito, o seu simulador deve gerar um arquivo &lt;a href="https://en.wikipedia.org/wiki/Value_change_dump"&gt;VCD&lt;/a&gt;, que deve ser aberto em um visualizador de ondas como o GTKWave. Este programa √© especialmente √∫til se voc√™ n√£o estiver usando um IDE (e.g. GHDL).&lt;/p&gt;
&lt;h3&gt;Atom&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://github.com/atom/atom/releases/tag/v1.30.0"&gt;&lt;i style="font-size: 1em;" class="fas fa-download"&gt;&lt;/i&gt; Download&lt;/a&gt; |
&lt;a href="https://atom.io/"&gt;&lt;i style="font-size: 1em;" class="fas fa-file-alt"&gt;&lt;/i&gt; P√°gina&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;SOs:&lt;/strong&gt; &lt;i style="font-size: 1em;" class="fab fa-windows"&gt;&lt;/i&gt; &lt;i style="font-size: 1em;" class="fab fa-linux"&gt;&lt;/i&gt; &lt;i style="font-size: 1em;" class="fab fa-apple"&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p&gt;O Atom √© um editor de textos com suporte a v√°rias linguagens. Eu o utilizo para a maioria dos meus projetos envolvendo HDLs. Para habilitar o suporte a VHDL, instale o pacote &lt;code&gt;language-vhdl&lt;/code&gt; depois de instalar o Atom.&lt;/p&gt;
&lt;h3&gt;LogiSim&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://github.com/reds-heig/logisim-evolution/releases"&gt;&lt;i style="font-size: 1em;" class="fas fa-download"&gt;&lt;/i&gt; Download&lt;/a&gt; |
&lt;a href="https://github.com/reds-heig/logisim-evolution"&gt;&lt;i style="font-size: 1em;" class="fas fa-file-alt"&gt;&lt;/i&gt; P√°gina&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;SOs:&lt;/strong&gt; &lt;i style="font-size: 1em;" class="fab fa-windows"&gt;&lt;/i&gt; &lt;i style="font-size: 1em;" class="fab fa-linux"&gt;&lt;/i&gt; &lt;i style="font-size: 1em;" class="fab fa-apple"&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p&gt;O LogiSim √© uma ferramenta educacional para projetar e simular circuitos digitais. O m√©todo de captura √© gr√°fico, ou seja, voc√™ desenha o circuito como se estivesse desenhando no papel, na forma de um diagrama, usando portas l√≥gicas. Apesar de suportar HDLs, este n√£o √© o foco do projeto. Nota: o projeto original foi descontinuado pelo autor, esta vers√£o √© a vers√£o "evolution", um &lt;em&gt;branch&lt;/em&gt; do software original mantido como software aberto por um grupo de universidades su√≠√ßas.&lt;/p&gt;
&lt;h3&gt;Digital&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://github.com/hneemann/Digital/releases/"&gt;&lt;i style="font-size: 1em;" class="fas fa-download"&gt;&lt;/i&gt; Download&lt;/a&gt; |
&lt;a href="https://github.com/hneemann/Digital"&gt;&lt;i style="font-size: 1em;" class="fas fa-file-alt"&gt;&lt;/i&gt; P√°gina&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;SOs:&lt;/strong&gt; &lt;i style="font-size: 1em;" class="fab fa-windows"&gt;&lt;/i&gt; &lt;i style="font-size: 1em;" class="fab fa-linux"&gt;&lt;/i&gt; &lt;i style="font-size: 1em;" class="fab fa-apple"&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p&gt;O Digital √© um &lt;em&gt;revamp&lt;/em&gt; do projeto do LogiSim original. Assim como o LogiSim Evolution (acima), √© escrito em Java e roda em praticamente todas as plataformas. √â mantido por um desenvolvedor como software aberto e est√° em desenvolvimento constante. Assim como o predecessor, a captura √© gr√°fica e na forma de diagrama, mas a integra√ß√£o com VHDL (atrav√©s do GHDL) e Verilog (atrav√©s do Icarus) √© muito boa. Voc√™ pode escrever seu componente em VHDL e juntar ao seu diagrama esquem√°tico facilmente. Recomendo para todos que est√£o come√ßando em Sistemas Digitais.&lt;/p&gt;
&lt;h1&gt;Utiliza√ß√£o nas disciplinas&lt;/h1&gt;
&lt;p&gt;Nas disciplinas te√≥ricas de Sistemas Digitais o GHDL √© utilizado para corre√ß√£o dos exerc√≠cios, mas n√£o faz muita diferen√ßa qual simulador voc√™ usa para desenvolver, desde que &lt;strong&gt;n√£o utilize&lt;/strong&gt; nenhuma tecnologia dependente de um determinado fabricante. Nestas disciplinas voc√™ raramente ser√° solicitado a sintetizar seu circuito.&lt;/p&gt;
&lt;p&gt;Nas disciplinas pr√°ticas, voc√™ invariavelmente ir√° sintetizar e experimentar seu circuito em uma placa de prototipa√ß√£o. No &lt;strong&gt;Laborat√≥rio Digital&lt;/strong&gt;, as placas s√£o do programa universit√°rio da Intel, fabricadas pela Terasic com FPGAs da Intel. Isso significa que voc√™ ter√° que utilizar o Quartus. √â poss√≠vel utilizar o Active-HDL com o Quartus como &lt;em&gt;backend&lt;/em&gt;, mas esta configura√ß√£o ainda n√£o √© suportada no laborat√≥rio. As disciplinas de &lt;strong&gt;Arquitetura de Computadores&lt;/strong&gt;, apesar de te√≥ricas, possuem forte componente pr√°tica e voc√™ tamb√©m precisar√° de um software que suporte s√≠ntese. Contudo, nestas disciplinas a placa utilizada √© do programa universit√°rio da Xilinx, fabricadas pela Digilent com FPGAs da Xilinx. O software de s√≠ntese deste fabricante √© o Vivado, por√©m a disciplina utiliza o arranjo Active-HDL com o Vivado como &lt;em&gt;backend&lt;/em&gt;. Note que o software de s√≠ntese s√≥ funciona para os dispositivos daquele fabricante, portanto n√£o h√° como utilizar um software de um fabricante com uma placa de outro (e.g. sintetizar no Vivado e programar a placa da Intel).&lt;/p&gt;
&lt;p&gt;Sempre que for configurar seu ambiente, opte pela vers√£o mais atualizada ou consulte seu professor(a) sobre qual vers√£o ser√° utilizada na disciplina. Se sua vers√£o for diferente da utilizada no laborat√≥rio, voc√™ pode ter problemas para levar seu projeto para o laborat√≥rio e usar os computadores dispon√≠veis para programar a placa. Em nenhum laborat√≥rio h√° restri√ß√µes quanto a levar seu pr√≥prio computador (i.e. notebook), mas consulte sempre o t√©cnico do laborat√≥rio ou seu professor(a) para ter certeza que n√£o h√° nenhum problema em ligar a placa no seu pr√≥prio equipamento.&lt;/p&gt;
&lt;p&gt;A escolha de qual software utilizar √© pessoal e voc√™ deve tom√°-la sozinho, por√©m aconselho que sempre descreva seu hardware sem utilizar nenhuma constru√ß√£o que dependa de um fabricante espec√≠fico, assim voc√™ pode facilmente transportar seu c√≥digo de um software para o outro.&lt;/p&gt;</content><category term="hdl"></category><category term="vhdl"></category><category term="verilog"></category><category term="simuladores"></category></entry><entry><title>M√°quina virtual com GHDL</title><link href="https://balbertini.github.io/vhdl_vmghdl-pt_BR.html" rel="alternate"></link><published>2018-09-13T22:22:27-03:00</published><updated>2020-02-14T13:33:01-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2018-09-13:/vhdl_vmghdl-pt_BR.html</id><summary type="html">&lt;p&gt;Como utilizar a VM com GHDL.&lt;/p&gt;</summary><content type="html">&lt;p&gt;O GHDL √© um simulador de VHDL que gera c√≥digo nativo, o que significa que as simula√ß√µes s√£o muito r√°pidas. Contudo, foi escrito em ADA, uma linguagem na imin√™ncia de ser considerada ex√≥tica. Como v√°rios professores de Sistemas Digitais usam este software para corrigir os exerc√≠cios dados nas disciplinas te√≥ricas, mantemos uma m√°quina virtual com uma vers√£o recente do GHDL instalada, que tamb√©m compartilhamos com os alunos. Neste artigo, mostrarei como usar uma VM que cont√©m o &lt;a href="http://ghdl.free.fr/"&gt;GHDL&lt;/a&gt; para simular e testar funcionalmente sua descri√ß√£o VHDL.&lt;/p&gt;
&lt;p&gt;H√° tamb√©m uma grava√ß√£o de uma Live dispon√≠vel no YouTube.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://youtu.be/PEaDYHk8CBc"&gt;Link para o tutorial no YouTube&lt;/a&gt;&lt;/p&gt;
&lt;h1&gt;Preparando o ambiente&lt;/h1&gt;
&lt;p&gt;Comece fazendo download da m√°quina virtual clicando nos links abaixo:&lt;/p&gt;
&lt;p&gt;Vers√£o atualizada, ligeiramente diferente do tutorial:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://drive.google.com/file/d/1FWxiqSNX6iPKouRYjEhJapvXQrdRMHhL" target="_blank"&gt;&lt;i style="font-size: 1em;" class="fas fa-download"&gt;&lt;/i&gt; GHDL_2020.ova&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://drive.google.com/file/d/1UhiNQtl6ekwnnUDQc2Ztlrxc90uenr7O" target="_blank"&gt;&lt;i style="font-size: 1em;" class="fas fa-download"&gt;&lt;/i&gt; GHDL_2020.ova.md5sum&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Vers√£o antiga, id√™ntica a usada no tutorial:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://drive.google.com/file/d/1_KPXSVHjk3UmFIFHAbIfzLdwWwrXGmHQ" target="_blank"&gt;&lt;i style="font-size: 1em;" class="fas fa-download"&gt;&lt;/i&gt; GHDL.ova&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://drive.google.com/file/d/1wqwmZvWUJHamL2AnWSRm3D2B2eI7pi2f" target="_blank"&gt;&lt;i style="font-size: 1em;" class="fas fa-download"&gt;&lt;/i&gt; GHDL.ova.md5sum&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;O arquivo md5sum possui o hash MD5 do arquivo e n√£o precisa ser baixado. Aconselha-se que baixe-o e verifique se o arquivo &lt;code&gt;GHDL.ova&lt;/code&gt; que voc√™ baixou possui o mesmo hash contido no arquivo &lt;code&gt;GHDL.ova.md5sum&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;A m√°quina atualizada pode possuir algumas diferen√ßas nas telas em rela√ß√£o a utilizada no tutorial, por√©m √© f√°cil seguir o tutorial mesmo com a m√°quina atualizada.&lt;/p&gt;
&lt;p&gt;A m√°quina est√° no formato &lt;em&gt;Open Virtual Appliance&lt;/em&gt;, portanto voc√™ tamb√©m precisar√° de um software de virtualiza√ß√£o compat√≠vel com sua m√°quina e com o formato OVF 2.0 (&lt;em&gt;Open Virtualization Format&lt;/em&gt;). Este artigo usar√° o &lt;a href="https://www.virtualbox.org/"&gt;VirtualBox&lt;/a&gt; como software de virtualiza√ß√£o.&lt;/p&gt;
&lt;h1&gt;Preparando a m√°quina virtual&lt;/h1&gt;
&lt;p&gt;Abra o arquivo &lt;code&gt;GHDL.ova&lt;/code&gt; com o seu software de virtualiza√ß√£o (e.g. clique duas vezes, v√° em &lt;code&gt;Arquivo/Importar Appliance&lt;/code&gt;, etc).&lt;/p&gt;
&lt;p&gt;&lt;img alt="Adicionando a VM" src="https://balbertini.github.io/images/vhdl/vmghdl1.png"&gt;&lt;/p&gt;
&lt;p&gt;N√£o √© necess√°rio mudar nenhum par√¢metro da VM neste momento. Opcionalmente desligue os itens que n√£o pretende utilizar, como por exemplo o controlador USB ou a placa de som. N√£o desabilite a placa de rede pois iremos utiliz√°-la para acessar a m√°quina. Quando estiver satisfeito, clique no bot√£o &lt;code&gt;Importar&lt;/code&gt; finalize a importa√ß√£o da m√°quina.&lt;/p&gt;
&lt;p&gt;Com a importa√ß√£o finalizada, a VM deve aparecer na sua lista de VMs. Com a VM selecionada, v√° em &lt;code&gt;M√°quina/Configura√ß√µes&lt;/code&gt; ou clique com o bot√£o direito dobre a m√°quina e escolha &lt;code&gt;Configura√ß√µes&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Configurando a VM" src="https://balbertini.github.io/images/vhdl/vmghdl2.png"&gt;&lt;/p&gt;
&lt;p&gt;Na caixa que abrir√°, selecione &lt;code&gt;Rede&lt;/code&gt;, expanda a aba &lt;code&gt;Avan√ßado&lt;/code&gt; e clique no bot√£o &lt;code&gt;Redirecionamento de Portas&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Redirecionamento de portas" src="https://balbertini.github.io/images/vhdl/vmghdl3.png"&gt;&lt;/p&gt;
&lt;p&gt;Na tela que se abrir√°, voc√™ deve ver uma regra pr√©-carregada. Confira os dados ou caso n√£o veja nenhuma regra, clique no bot√£o de adicionar uma nova regra e adicione o seguinte:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Nome&lt;/code&gt;: qualquer um, no exemplo usarei "SSH"&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Protocolo&lt;/code&gt;: TCP&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Endere√ßo IP do Hospedeiro&lt;/code&gt;: deixar em branco&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Porta do Hospedeiro&lt;/code&gt;: qualquer uma alta, no exemplo usei 5022&lt;/li&gt;
&lt;li&gt;&lt;code&gt;IP do Convidado&lt;/code&gt;: deixar em branco&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Porta do Convidado&lt;/code&gt;: 22&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="Regra de redirecionamento" src="https://balbertini.github.io/images/vhdl/vmghdl4.png"&gt;&lt;/p&gt;
&lt;p&gt;Note que a imagem n√£o mostra todos os campos. Configure todos como na lista acima. Aqui terminamos com a rede. Clique no OK e volte para a tela de configura√ß√£o da m√°quina virtual. Dessa vez v√° para aba &lt;code&gt;Pastas Compartilhadas&lt;/code&gt; e use o bot√£o para adicionar uma nova pasta.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Regra de redirecionamento" src="https://balbertini.github.io/images/vhdl/vmghdl5.png"&gt;&lt;/p&gt;
&lt;p&gt;No campo &lt;code&gt;Caminho da Pasta&lt;/code&gt;, escolha uma pasta qualquer da sua m√°quina. No campo &lt;code&gt;Nome da Pasta&lt;/code&gt;, coloque o nome que desejar (neste exemplo usei &lt;em&gt;VMShared&lt;/em&gt;). O &lt;code&gt;Caminho da Pasta&lt;/code&gt; √© a pasta na sua m√°quina real (host) e o &lt;code&gt;Nome da Pasta&lt;/code&gt; √© o nome do compartilhamento. A pasta que voc√™ escolher em &lt;code&gt;Caminho da Pasta&lt;/code&gt; ser√° compartilhada com a m√°quina virtual na montagem da pasta compartilhada, portanto escolha uma pasta onde vai colocar os arquivos. Resumo: a pasta que voc√™ escolher em &lt;code&gt;Caminho da Pasta&lt;/code&gt; ser√° exatamente a mesma dentro da m√°quina virtual: o que voc√™ colocar/editar em uma aparece na outra e vice-versa.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Regra de redirecionamento" src="https://balbertini.github.io/images/vhdl/vmghdl6.png"&gt;&lt;/p&gt;
&lt;p&gt;Finalizamos a configura√ß√£o da VM. Clique no OK at√© voltar para a tela do software de virtualiza√ß√£o.&lt;/p&gt;
&lt;h1&gt;Iniciando a m√°quina virtual&lt;/h1&gt;
&lt;p&gt;Antes de come√ßar, leia esta se√ß√£o toda, caso contr√°rio voc√™ poder√° ficar com o mouse e teclado capturados pela m√°quina virtual. Com a m√°quina selecionada na tela principal do software de virtualiza√ß√£o, clique no bot√£o &lt;code&gt;Iniciar&lt;/code&gt; (bot√£o com seta verde). A m√°quina ir√° iniciar e voc√™ ver√° uma tela preta com o &lt;em&gt;prompt&lt;/em&gt; de login. Esta tela √© como se fosse a tela de outro computador, com a diferen√ßa que ele √© virtual.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Prompt de login" src="https://balbertini.github.io/images/vhdl/vmghdl7.png"&gt;&lt;/p&gt;
&lt;p&gt;Dependendo da configura√ß√£o da sua m√°quina, a tela inicial estar√° toda preta; nesse caso, pressione qualquer tecla (e.g. enter) para habilitar o &lt;em&gt;prompt&lt;/em&gt; de login. Se desejar logar na m√°quina, clique na tela e utilize o usu√°rio padr√£o e a senha padr√£o, que √© &lt;code&gt;poli&lt;/code&gt; para ambos. Contudo, esta m√°quina n√£o tem interface gr√°fica para ficar mais r√°pida e diminuir o tamanho do download (voc√™ pode instalar se desejar, mas o tamanho da m√°quina aumentar√° consideravelmente). Se voc√™ est√° confort√°vel com sistemas em modo texto, pule a pr√≥xima se√ß√£o e utilize esta tela para o restante deste artigo, caso contr√°rio a pr√≥xima se√ß√£o mostrar√° como logar via SSH. Caso voc√™ esteja com o mouse ou apontador presona sua m√°quina virtual, veja a tecla de desabilitar a captura do mouse e teclado no canto direito inferior da m√°quina (no exemplo √© Left &amp;#8984;). Pressione essa tecla por 2s e solte. Seu mouse e teclado agora devem ser devolvidos para a sua m√°quina.&lt;/p&gt;
&lt;h1&gt;Acessando a m√°quina virtual por SSH&lt;/h1&gt;
&lt;p&gt;Uma forma mais f√°cil de acessar a m√°quina √© logar via SSH, pois assim voc√™ pode aproveitar todos os benef√≠cios da sua pr√≥pria m√°quina, como interface gr√°fica e editores modernos, usando o SHH apenas para executar o GHDL. H√° clientes SSH para v√°rios sistemas operacionais, como o &lt;a href="https://www.putty.org"&gt;PuTTY&lt;/a&gt; (Windows, Linux). Os sistemas operacionais baseados em *nix (e.g. MacOS e Linux) e algumas vers√µes do Windows (e.g. Windows 10) j√° possuem um cliente SSH pr√©-instalado, portanto basta abrir um terminal (no Windows, o terminal chama-se &lt;code&gt;cmd.exe&lt;/code&gt;e pode ser acessado pelo menu principal/executar/cmd.exe).&lt;/p&gt;
&lt;p&gt;No terminal aberto na sua m√°quina, abra uma sess√£o SSH para a VM atrav√©s do comando &lt;code&gt;ssh -p5022 poli@127.0.0.1&lt;/code&gt;. O usu√°rio √© &lt;code&gt;poli&lt;/code&gt; (j√° especificado na linha de comando) e a senha tamb√©m √© &lt;code&gt;poli&lt;/code&gt;. Se voc√™ escolheu outra porta no momento de adicionar a regra de redirecionamento, dever√° substituir de acordo.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="gp"&gt;Brunos-MacBook-Pro:~ balbertini$&lt;/span&gt; ssh -p5022 poli@127.0.0.1
&lt;span class="go"&gt;The authenticity of host &amp;#39;[127.0.0.1]:5022 ([127.0.0.1]:5022)&amp;#39; can&amp;#39;t be established.&lt;/span&gt;
&lt;span class="go"&gt;ECDSA key fingerprint is SHA256:fSLO3evzG//rjYMSM0OwLPx1XeqHPg4Sj7NTeQdVfq0.&lt;/span&gt;
&lt;span class="go"&gt;Are you sure you want to continue connecting (yes/no)? yes&lt;/span&gt;
&lt;span class="go"&gt;Warning: Permanently added &amp;#39;[127.0.0.1]:5022&amp;#39; (ECDSA) to the list of known hosts.&lt;/span&gt;
&lt;span class="go"&gt;poli@127.0.0.1&amp;#39;s password:&lt;/span&gt;
&lt;span class="go"&gt;Welcome to Ubuntu 18.04.1 LTS (GNU/Linux 4.15.0-30-generic x86_64)&lt;/span&gt;

&lt;span class="go"&gt; * Documentation:  https://help.ubuntu.com&lt;/span&gt;
&lt;span class="go"&gt; * Management:     https://landscape.canonical.com&lt;/span&gt;
&lt;span class="go"&gt; * Support:        https://ubuntu.com/advantage&lt;/span&gt;

&lt;span class="go"&gt;Last login: Wed Aug  8 14:22:50 2018&lt;/span&gt;
&lt;span class="gp"&gt;poli@ghdl:~$&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;No primeiro acesso, seu cliente vai mostrar a chave de criptografia do servidor SSH executando na m√°quina virtual. Aceite com &lt;em&gt;yes&lt;/em&gt; e o cliente solicitar√° a senha do usu√°rio &lt;code&gt;poli&lt;/code&gt;, que tamb√©m √© &lt;code&gt;poli&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Caso esteja usando o PuTTY, abra um terminal e digite o comando equivalente, substituindo &lt;code&gt;ssh -p5022 poli@127.0.0.1&lt;/code&gt; por &lt;code&gt;putty -p5022 poli@127.0.0.1&lt;/code&gt; (Linux) ou &lt;code&gt;putty.exe -p5022 poli@127.0.0.1&lt;/code&gt; (Windows).
Se preferir usar a vers√£o gr√°fica, veja um tutorial &lt;a href="https://www.secnet.com.br/blog/ssh-com-putty"&gt;aqui&lt;/a&gt;. As credenciais s√£o:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Host Name (or IP address)&lt;/code&gt;: 127.0.0.1&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Port&lt;/code&gt;: 5022 (ou a porta que voc√™ definiu no redirecionamento de portas)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;login as&lt;/code&gt;: poli&lt;/li&gt;
&lt;li&gt;&lt;code&gt;password&lt;/code&gt;: poli (esta √© a mesma senha usada para o sudo)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;O acesso via SSH √© opcional, mas facilitar√° bastante. Caso opte por n√£o faz√™-lo, logue diretamente na tela do seu software de virtualiza√ß√£o. Se acessar via SSH, voc√™ pode minimizar a m√°quina virtual e deix√°-la executando em segundo plano.&lt;/p&gt;
&lt;h1&gt;Reconfigurando o teclado&lt;/h1&gt;
&lt;p&gt;Caso tenha problemas com o layout do seu teclado, use o comando abaixo para mud√°-lo.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="gp"&gt;poli@ghdl:~$&lt;/span&gt; sudo dpkg-reconfigure keyboard-configuration
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;h1&gt;Fazendo update do VirtualBox Guest Additions&lt;/h1&gt;
&lt;p&gt;Quando estiver logado na m√°quina virtual (via SSH ou via tela do software de virtualiza√ß√£o), fa√ßa o update do m√≥dulo de &lt;em&gt;Guest Additions&lt;/em&gt;. Este passo √© necess√°rio pois o m√≥dulo muda com frequ√™ncia, e voc√™ precisa mant√™-lo alinhado com a sua vers√£o do VirtualBox. Refa√ßa este passo todas as vezes que atualizar o VirtualBox na sua m√°quina real (&lt;em&gt;host&lt;/em&gt;). Caso sua m√°quina virtual j√° esteja com a √∫ltima vers√£o do &lt;em&gt;Guest Additions&lt;/em&gt; instalada, nenhum pacote ser√° atualizado e, dependendo de quando voc√™ fizer o download da m√°quina virtual, voc√™ pode pular este passo. Aproveite e fa√ßa um update do sistema operacional tamb√©m.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="gp"&gt;poli@ghdl:~$&lt;/span&gt; sudo apt-get update
&lt;span class="gp"&gt;poli@ghdl:~$&lt;/span&gt; sudo apt-get install virtualbox-guest-utils
&lt;span class="gp"&gt;poli@ghdl:~$&lt;/span&gt; sudo apt-get upgrade
&lt;span class="gp"&gt;poli@ghdl:~$&lt;/span&gt; sudo reboot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;O comando do meio, &lt;code&gt;sudo apt-get install virtualbox-guest-utils&lt;/code&gt; √© o √∫nico passo obrigat√≥rio, os demais fica a seu crit√©rio. O √∫ltimo comando ir√° reiniciar a m√°quina para que poss√≠veis atualiza√ß√µes da m√°quina surtam efeito, o que acarretar√° na sua desconex√£o. Aguarde a m√°quina virtual reiniciar e logue novamente.&lt;/p&gt;
&lt;h1&gt;Montando a pasta compartilhada&lt;/h1&gt;
&lt;p&gt;Precisamos primeiro criar um ponto de montagem, que nada mais √© que um diret√≥rio na m√°quina virtual.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="gp"&gt;poli@ghdl:~$&lt;/span&gt; mkdir shared
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Depois montamos a pasta da sua m√°quina real (host) na m√°quina virtual.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="gp"&gt;poli@ghdl:~$&lt;/span&gt; sudo mount -t vboxsf -ouid&lt;span class="o"&gt;=&lt;/span&gt;poli,rw VMShared shared
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Com isso, a pasta &lt;code&gt;shared&lt;/code&gt; na m√°quina virtual ser√° a mesma que a pasta que escolheu quando configurou a pasta compartilhada. Note que se voc√™ deu outro nome para o compartilhamento, deve substituir &lt;code&gt;VMShared&lt;/code&gt; pelo nome que escolheu.&lt;/p&gt;
&lt;h1&gt;Usando o GHDL na m√°quina virtual&lt;/h1&gt;
&lt;p&gt;Voc√™ pode editar os arquivos VHDL na sua m√°quina real (&lt;em&gt;host&lt;/em&gt;) normalmente, usando o editor de sua prefer√™ncia (eu utilizo o &lt;a href="https://atom.io/"&gt;Atom&lt;/a&gt; com o pacote &lt;code&gt;language-vhdl&lt;/code&gt; para o &lt;em&gt;syntax highlight&lt;/em&gt;). Sempre salve os seus arquivos na pasta compartilhada na sua m√°quina real e eles automaticamente estar√£o dispon√≠veis dentro da m√°quina virtual, na pasta onde montou a pasta compartilhada.&lt;/p&gt;
&lt;p&gt;Para usar o GHDL, voc√™ deve passar por tr√™s fases:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;An√°lise: &lt;code&gt;ghdl -a arquivo.vhd&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Elabora√ß√£o: &lt;code&gt;ghdl -e entidade&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Simula√ß√£o: &lt;code&gt;ghdl -e entidade&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Voc√™ deve fazer a an√°lise de todos os arquivos VHDL que for utilizar. Na an√°lise, o GHDL ir√° verificar erros de sintaxe e verificar√° se os componentes necess√°rios est√£o todos presentes.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="gp"&gt;poli@ghdl:~/shared$&lt;/span&gt; ghdl -a shiftleft2.vhd
&lt;span class="gp"&gt;poli@ghdl:~/shared$&lt;/span&gt; ghdl -a utils.vhd
&lt;span class="gp"&gt;poli@ghdl:~/shared$&lt;/span&gt; ghdl -a shiftleft2_tb.vhd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Neste exemplo, analisamos os arquivos &lt;code&gt;shiftleft2.vhd&lt;/code&gt;, &lt;code&gt;utils.vhd&lt;/code&gt; e &lt;code&gt;shiftleft2_tb.vhd&lt;/code&gt;. A an√°lise do &lt;code&gt;utils.vhd&lt;/code&gt; precisa vir antes da an√°lise do &lt;code&gt;shiftleft2_tb.vhd&lt;/code&gt; pois este √∫ltimo utiliza o pacote (&lt;code&gt;package&lt;/code&gt;) dentro do &lt;code&gt;utils.vhd&lt;/code&gt;, portanto este deve estar analisado no momento da an√°lise da entidade que o utiliza.&lt;/p&gt;
&lt;p&gt;Com todos os arquivos analisados, vamos para a fase de elabora√ß√£o. Nesta fase, o GHDL ir√° montar o simulador com a entidade desejada, ligando de fato todos os componentes e verificando erros sem√¢nticos.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="gp"&gt;poli@ghdl:~/shared$&lt;/span&gt; ghdl -e shiftleft2_tb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Agora que a entidade a ser executada est√° elaborada, podemos executar a simula√ß√£o em si:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="gp"&gt;poli@ghdl:~/shared$&lt;/span&gt; ghdl -r shiftleft2_tb
&lt;span class="go"&gt;shiftleft2_tb.vhd:44:7:@0ms:(report note): BOT&lt;/span&gt;
&lt;span class="go"&gt;shiftleft2_tb.vhd:65:7:@4ns:(report note): EOT&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;A entidade que ser√° simulada est√° no &lt;code&gt;shiftleft2_tb.vhd&lt;/code&gt; e chama-se &lt;code&gt;shiftleft2_tb&lt;/code&gt;, portanto no exemplo elaboramos esta entidade, depois executamos a simula√ß√£o com a mesma. Esta entidade representa um &lt;em&gt;testbench&lt;/em&gt; escrito em VHDL. A sa√≠da impressa s√£o provenientes dos comandos &lt;code&gt;report&lt;/code&gt; colocados no &lt;em&gt;testbench&lt;/em&gt; para indicar o in√≠cio e o final da simula√ß√£o.&lt;/p&gt;
&lt;p&gt;Ainda podemos passar alguns par√¢metros para o simulador:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="gp"&gt;poli@ghdl:~/shared$&lt;/span&gt; ghdl -r shiftleft2_tb --vcd&lt;span class="o"&gt;=&lt;/span&gt;shiftleft2_tb.vcd
&lt;span class="go"&gt;shiftleft2_tb.vhd:44:7:@0ms:(report note): BOT&lt;/span&gt;
&lt;span class="go"&gt;shiftleft2_tb.vhd:65:7:@4ns:(report note): EOT&lt;/span&gt;
&lt;span class="gp"&gt;poli@ghdl:~/shared$&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;H√° diversos par√¢metros que podem ser passados para a simula√ß√£o. Um muito √∫til que pode ser visto acima √© o &lt;code&gt;--vcd=arquivo.vcd&lt;/code&gt;. Este par√¢metro salvar√° a forma de onda resultante da simula√ß√£o no arquivo (neste caso o &lt;code&gt;shiftleft2_tb.vcd&lt;/code&gt;). Para visualizar o arquivo VCD voc√™ precisar√° de um programa que visualize formas de onda. Recomendo o &lt;a href="http://gtkwave.sourceforge.net/"&gt;GTKWave&lt;/a&gt;, dispon√≠vel para v√°rias as plataformas. Na sua m√°quina real (&lt;em&gt;host&lt;/em&gt;), navegue at√© a pasta compartilhada e veja que os arquivos gerados pelo GHDL est√£o l√°, incluindo o resultado da simula√ß√£o. Voc√™ pode abrir o arquivo VCD com o seu visualizador preferido.&lt;/p&gt;</content><category term="vhdl"></category><category term="vhdl"></category><category term="ghdl"></category><category term="vm"></category></entry><entry><title>Circuitos Sequenciais em VHDL</title><link href="https://balbertini.github.io/vhdl_sequential-pt_BR.html" rel="alternate"></link><published>2018-09-05T08:24:31-03:00</published><updated>2021-05-03T08:55:51-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2018-09-05:/vhdl_sequential-pt_BR.html</id><summary type="html">&lt;p&gt;Como descrever circuitos sequenciais em VHDL.&lt;/p&gt;</summary><content type="html">&lt;p&gt;A principal caracter√≠stica de um &lt;strong&gt;circuito sequencial&lt;/strong&gt; √© que as sa√≠das dependem n√£o somente das entradas, como em um circuito combinat√≥rio, mas tamb√©m das entradas passadas. Diz-se que um circuito sequencial possui um &lt;strong&gt;elemento de mem√≥ria&lt;/strong&gt; ou √© dependente do tempo.&lt;/p&gt;
&lt;table style="width:100%"&gt;
  &lt;tr&gt;
    &lt;td&gt;
      &lt;i class="fas fa-info fa-2x"  style="color: #0066ff;"&gt;&lt;/i&gt;
    &lt;/td&gt;
    &lt;td&gt;
      Depender do tempo n√£o implica que o circuito possui um sinal de &lt;em&gt;clock&lt;/em&gt;, apesar disso ser verdadeiro na maioria das vezes.
    &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;h2&gt;Process&lt;/h2&gt;
&lt;p&gt;A estrutura utilizada para descrever circuitos sequenciais em VHDL √© o &lt;code&gt;process&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Sintaxe de um &lt;code&gt;process&lt;/code&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nc"&gt;nome_opcional&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lista_de_sensibilidade&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;declaracoes&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
    &lt;span class="n"&gt;primitivas&lt;/span&gt; &lt;span class="n"&gt;sequenciais&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt; &lt;span class="nc"&gt;nome_opcional&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;O nome do &lt;code&gt;process&lt;/code&gt; √© opcional e serve para identific√°-lo durante a simula√ß√£o. Recomenda-se a sua utiliza√ß√£o para melhorar a legibilidade e facilitar a depura√ß√£o, obviamente usando um nome que representa o circuito sendo descrito. Se optar por retirar o nome, retira-se o &lt;code&gt;nome_opcional&lt;/code&gt;, incluindo o &lt;code&gt;:&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Primitivas sequenciais e concorrentes&lt;/h2&gt;
&lt;p&gt;As primitivas sequenciais dentro de um &lt;code&gt;process&lt;/code&gt; podem ser quaisquer primitivas utilizadas para descrever  circuitos combinat√≥rios (e.g. atribui√ß√µes condicionais) e tamb√©m algumas que s√≥ podem ser utilizadas de maneira sequencial: &lt;code&gt;if-else&lt;/code&gt; e &lt;code&gt;case&lt;/code&gt;. No entanto, todas as primitivas que estiverem dentro de um &lt;code&gt;process&lt;/code&gt; se &lt;strong&gt;comportam de maneira sequencial&lt;/strong&gt;. Em contraste, as primitivas que est√£o dentro da descri√ß√£o uma arquitetura - que s√≥ podem ser combinat√≥rias - s√£o consideradas concorrentes.&lt;/p&gt;
&lt;p&gt;As primitivas concorrentes (dentro da arquitetura), representam circuitos combinat√≥rios, portanto ser√£o sintetizadas para tais circuitos. Quaisquer modifica√ß√µes na entrada t√™m efeito imediato e todas as fun√ß√µes combinat√≥rias descritas ter√£o suas sa√≠das afetadas (ap√≥s o devido tempo de propaga√ß√£o caso aplic√°vel). √â importante notar que um bloco de um &lt;code&gt;process&lt;/code&gt; inteiro √© equivalente a uma primitiva combinat√≥ria, ou seja, a avalia√ß√£o das sa√≠das do &lt;code&gt;process&lt;/code&gt; ocorre ao mesmo tempo que a avalia√ß√£o de todas as primitivas concorrentes da mesma arquitetura, incluindo outros poss√≠veis blocos &lt;code&gt;process&lt;/code&gt; descritos na mesma arquitetura, portanto n√£o √© poss√≠vel aninhar mais de um &lt;code&gt;process&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/vhdl/sequencial.png' align="right" style="padding-left:5%" /&gt;
J√° as primitivas sequencias (dentro de um &lt;code&gt;process&lt;/code&gt;), representam um circuito sequencial nos moldes da figura acima. Qualquer circuito sequencial pode ser mapeado para um circuito com um elemento de mem√≥ria e uma l√≥gica combinat√≥ria dependente do estado atual do circuito, fornecido pelo elemento de mem√≥ria. Dentro de um &lt;code&gt;process&lt;/code&gt;, as primitivas sequencias s√£o &lt;strong&gt;avaliadas em ordem&lt;/strong&gt; e caso haja diverg√™ncia (i.e. mais de um valor atribu√≠do para um determinado sinal), prevalece a √∫ltima primitiva (i.e. o √∫ltimo valor atribu√≠do a um sinal).&lt;/p&gt;
&lt;p&gt;A l√≥gica combinat√≥ria dentro de um bloco &lt;code&gt;process&lt;/code&gt; pode ser a identidade (i.e. n√£o possuir l√≥gica que altere os dados, ou em outras palavras representar um fio) e o elemento de mem√≥ria tamb√©m pode estar ausente. √â poss√≠vel representar circuitos combinat√≥rios usando &lt;code&gt;process&lt;/code&gt; se descrevermos um circuito sequencial que possua uma l√≥gica combinat√≥ria mas n√£o um elemento de mem√≥ria. Vale lembrar que descrever circuitos combinat√≥rios com &lt;code&gt;process&lt;/code&gt; √© uma pr√°tica &lt;strong&gt;fortemente desencorajada&lt;/strong&gt;, portanto se o seu circuito n√£o possui um elemento de mem√≥ria, n√£o utilize &lt;code&gt;process&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Lista de sensibilidade&lt;/h2&gt;
&lt;p&gt;A lista de sensibilidade define o gatilho para o &lt;code&gt;process&lt;/code&gt;. De maneira program√°tica, o &lt;code&gt;process&lt;/code&gt; ser√° ativado quando algum evento acontecer em algum sinal presente na lista de sensibilidade. Se algum sinal da lista for alterado fora do &lt;code&gt;process&lt;/code&gt;, por exemplo, todas as primitivas sequenciais dentro do &lt;code&gt;process&lt;/code&gt; ser√£o avaliadas novamente, em sequencia.&lt;/p&gt;
&lt;p&gt;No entanto, a lista de sensibilidade n√£o representa um elemento sintetiz√°vel. Ela √© uma indica√ß√£o para o sintetizador de quais sinais controlam o elemento de mem√≥ria, ou seja, quando o circuito sequencial que est√° sendo descrito far√° de fato uma amostragem no elemento de mem√≥ria. Em outras palavras, o sintetizador olha para a lista de sensibilidade na hora de escolher os &lt;em&gt;enables&lt;/em&gt; e os &lt;em&gt;clocks&lt;/em&gt; dos &lt;em&gt;latches&lt;/em&gt; ou &lt;em&gt;flip-flops&lt;/em&gt; que ser√£o usados para construir o elemento de mem√≥ria. √â muito importante que a lista seja feita com cuidado para que o sintetizador possa gerar o circuito sequencial que o projetista deseja. Falhar na constru√ß√£o da lista de sensibilidade pode levar o circuito a comportamentos diferentes do esperado pelo projetista ou at√© mesmo torn√°-lo inutiliz√°vel. Por este motivo, recomenda-se que o elemento de mem√≥ria seja descrito usando &lt;code&gt;process&lt;/code&gt;, mas a l√≥gica combinat√≥ria dentro do mesmo &lt;strong&gt;seja a m√≠nima necess√°ria&lt;/strong&gt; para o funcionamento do circuito sequencial descrito.&lt;/p&gt;
&lt;p&gt;Na lista de sensibilidade, deve-se colocar todos os sinais que possam alterar o comportamento do componente descrito. Como dica para os iniciantes de prototipa√ß√£o de hardware, coloque na lista de sensibilidade todos e somente todos os sinais que s√£o &lt;strong&gt;lidos&lt;/strong&gt; dentro do &lt;code&gt;process&lt;/code&gt;. Isto pode gerar c√≥digos menos leg√≠veis e at√© mesmo atrapalhar a otimiza√ß√£o do circuito sintetizado, mas evitar√° a maioria dos problemas que os iniciantes enfrentam quando lidam com descri√ß√µes sequenciais em VHDL.&lt;/p&gt;
&lt;h2&gt;Wait&lt;/h2&gt;
&lt;p&gt;Uma alternativa para a lista de sensibilidade √© a primitiva &lt;code&gt;wait&lt;/code&gt;. Quando opta-se pela utiliza√ß√£o desta primitiva, a lista de sensibilidade deve ser omitida, pois o sintetizador ir√° inferir os sinais de controle dos elementos de mem√≥ria a partir dos &lt;code&gt;wait&lt;/code&gt; presentes no &lt;code&gt;process&lt;/code&gt;. As formas desta primitiva usadas para descrever circuitos sequenciais s√£o &lt;code&gt;wait until condicao;&lt;/code&gt;, que aguarda at√© que a condi√ß√£o seja satisfeita e &lt;code&gt;wait on sinal;&lt;/code&gt;, que aguarda o sinal mudar. Tanto a condi√ß√£o quanto o sinal podem ser uma composi√ß√£o de condi√ß√µes (desde que o resultado final seja verdadeiro ou falso) ou uma lista de sinais separados por v√≠rgula.&lt;/p&gt;
&lt;h3&gt;Exemplos&lt;/h3&gt;
&lt;h4&gt;FF-D com enable&lt;/h4&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/vhdl/ffd.png' align="left" style="padding-right:5%" /&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nc"&gt;ffd&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
    &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;until&lt;/span&gt; &lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;event&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;en&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
        &lt;span class="n"&gt;q&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;q_n&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt; &lt;span class="nc"&gt;ffd&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Este exemplo √© o mais simples poss√≠vel: um &lt;em&gt;flip-flop&lt;/em&gt; tipo D. Se o &lt;em&gt;en&lt;/em&gt; for alto, o componente amostra a entrada &lt;code&gt;d&lt;/code&gt; nas sa√≠das &lt;code&gt;q&lt;/code&gt; e &lt;code&gt;q_n&lt;/code&gt; na borda de subida do &lt;em&gt;clock&lt;/em&gt;. Note que o &lt;em&gt;process&lt;/em&gt; n√£o tem lista de sensibilidade, mas a primeira coisa que ele faz √© aguardar que aconte√ßa uma mudan√ßa no sinal de &lt;em&gt;clock&lt;/em&gt; (espera por &lt;code&gt;clock'event&lt;/code&gt;) e que esta mudan√ßa seja a borda de subida (verifica se &lt;code&gt;clock=1&lt;/code&gt;). Quando isto acontecer, ele faz uma verifica√ß√£o para saber se o &lt;code&gt;en=1&lt;/code&gt; e, caso seja, amostra a entrada para as sa√≠das. Note que n√£o est√° especificado o que acontece com as sa√≠das caso &lt;code&gt;en=0&lt;/code&gt;, o que faz com que a sa√≠da n√£o mude, exatamente o comportamento desejado para o &lt;em&gt;flip-flop&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;O equivalente usando lista de sensibilidade √©:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nc"&gt;ffd&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;event&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;en&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
            &lt;span class="n"&gt;q&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;q_n&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt; &lt;span class="nc"&gt;ffd&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Note que neste caso, os sinais &lt;code&gt;en&lt;/code&gt; e &lt;code&gt;d&lt;/code&gt; podem ficar de fora da lista de sensibilidade pois, apesar de serem lidos dentro do &lt;code&gt;process&lt;/code&gt;, n√£o alteram o comportamento do circuito exceto na borda do &lt;em&gt;clock&lt;/em&gt;, portanto n√£o faz diferen√ßa se o colocarmos na lista de sensibilidade: &lt;code&gt;process(clock, en, d)&lt;/code&gt;.&lt;/p&gt;
&lt;h4&gt;FF-D com enable e reset ass√≠ncrono&lt;/h4&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/vhdl/ffdr.png' align="left" style="padding-right:5%" /&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nc"&gt;ffdr&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
    &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;on&lt;/span&gt; &lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;reset&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;reset&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
        &lt;span class="n"&gt;q&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;q_n&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;elsif&lt;/span&gt; &lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;event&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;en&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
            &lt;span class="n"&gt;q&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;q_n&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;O &lt;code&gt;process&lt;/code&gt; ir√° aguardar que aconte√ßa alguma mudan√ßa nos sinais &lt;em&gt;clock&lt;/em&gt; ou &lt;em&gt;reset&lt;/em&gt; para continuar. Neste exemplo, o &lt;em&gt;flip-flop&lt;/em&gt; possui um sinal de &lt;em&gt;reset&lt;/em&gt; ass√≠ncrono ativo alto, portanto ele √© verificado fora da condi√ß√£o de borda de subida. Neste caso, se o &lt;code&gt;reset=1&lt;/code&gt;, as sa√≠das v√£o para &lt;code&gt;q=0&lt;/code&gt; e &lt;code&gt;q_n=1&lt;/code&gt; incondicionalmente, ignorando-se a borda, portanto o &lt;em&gt;reset&lt;/em&gt; tem prioridade sobre o a amostragem da entrada. Note que neste caso utiliza-se o &lt;code&gt;wait on&lt;/code&gt; e n√£o o &lt;code&gt;wait until&lt;/code&gt;. Qualquer mudan√ßa nos sinais &lt;em&gt;clock&lt;/em&gt; ou &lt;em&gt;reset&lt;/em&gt; faz com que o &lt;code&gt;process&lt;/code&gt; passe da linha do &lt;code&gt;wait on clock, reset&lt;/code&gt; e reavalie todas as condi√ß√µes.&lt;/p&gt;
&lt;p&gt;O equivalente usando lista de sensibilidade √©:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nc"&gt;ffdr&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;reset&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;reset&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
        &lt;span class="n"&gt;q&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;q_n&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;elsif&lt;/span&gt; &lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;clock&lt;/span&gt;&lt;span class="na"&gt;&amp;#39;event&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;en&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
            &lt;span class="n"&gt;q&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;q_n&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Observe que o &lt;code&gt;wait on&lt;/code&gt; substitui a lista de sensibilidade. Normalmente o &lt;code&gt;wait on&lt;/code&gt; √© usado como a primeira primitiva do &lt;code&gt;process&lt;/code&gt;, em substitui√ß√£o √† lista de sensibilidade. Para circuitos sequenciais s√≠ncronos, aconselha-se a utiliza√ß√£o da vers√£o com lista de sensibilidade para evitar que a linha do &lt;code&gt;wait on&lt;/code&gt; seja colocada em locais inadequados, o que pode gerar um circuito sequencial ass√≠ncrono. A maioria das ferramentas de s√≠ntese suporta somente um &lt;code&gt;wait on&lt;/code&gt; no in√≠cio ou final do &lt;code&gt;process&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Outras primitivas sequenciais&lt;/h2&gt;
&lt;p&gt;H√° outras primitivas exclusivas para utiliza√ß√£o sequencial (&lt;code&gt;for&lt;/code&gt;, &lt;code&gt;while&lt;/code&gt; e &lt;code&gt;loop&lt;/code&gt;), que possuem prop√≥sitos espec√≠ficos que n√£o foram cobertos neste artigo pois possuem restri√ß√µes para a s√≠ntese. Isto significa que, para que elas representem um hardware, o projetista deve utiliz√°-las de uma maneira espec√≠fica, caso contr√°rio elas n√£o podem ser sintetizadas (i.e. n√£o representam uma descri√ß√£o de hardware). √â muito comum entre os iniciantes considerar que estas primitivas s√£o equivalentes √†s encontradas em linguagens de programa√ß√£o estruturada, o que na maioria das vezes √© uma fal√°cia pois n√£o existe la√ßo interativo em hardware equivalente ao conceito hom√¥nimo das linguagens de programa√ß√£o (e.g. o equivalente em hardware a um la√ßo iterativo de um algoritmo √© na verdade uma m√°quina de estados completa). Estas primitivas devem ser evitadas na descri√ß√£o de circuitos sequenciais, especialmente por iniciantes, e s√£o na maioria das vezes usadas somente na constru√ß√£o de &lt;em&gt;testbenchs&lt;/em&gt;, quando as restri√ß√µes para s√≠ntese n√£o se aplicam.&lt;/p&gt;
&lt;p&gt;Sobre o &lt;code&gt;wait&lt;/code&gt;, ainda existem o &lt;code&gt;wait for tempo;&lt;/code&gt; e o &lt;code&gt;wait;&lt;/code&gt; (s√≥ o &lt;em&gt;wait&lt;/em&gt;), ambos  usados para descrever &lt;em&gt;testbenchs&lt;/em&gt; ou modelar temporiza√ß√£o de circuitos e sem efeito para s√≠ntese.&lt;/p&gt;</content><category term="vhdl"></category><category term="vhdl"></category><category term="sequenciais"></category></entry><entry><title>Circuitos Combinat√≥rios em VHDL</title><link href="https://balbertini.github.io/vhdl_combinatory-pt_BR.html" rel="alternate"></link><published>2018-09-04T13:20:23-03:00</published><updated>2021-05-03T08:55:51-03:00</updated><author><name>Bruno Albertini</name></author><id>tag:balbertini.github.io,2018-09-04:/vhdl_combinatory-pt_BR.html</id><summary type="html">&lt;p&gt;Como descrever circuitos combinat√≥rios em VHDL.&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;strong&gt;Circuitos combinat√≥rios&lt;/strong&gt; s√£o aqueles que implementam uma fun√ß√£o booleana sem realimenta√ß√£o. Sua principal caracter√≠stica √© a aus√™ncia de depend√™ncia temporal, ou seja, a sa√≠da depende apenas da entrada. Este tipo de circuito pode ser representado por uma s√©rie de portas l√≥gicas interligadas entre si &lt;strong&gt;sem realimenta√ß√£o&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;As tr√™s maneiras principais de descrever circuitos puramente combinat√≥rios em VHDL s√£o: estrutural, atribui√ß√£o condicional com &lt;code&gt;with-select&lt;/code&gt; e atribui√ß√£o condicional com &lt;code&gt;when-else&lt;/code&gt;. As descri√ß√µes realizadas utilizando uma destas tr√™s formas ser√£o sintetizadas para circuitos puramente combinat√≥rios.&lt;/p&gt;
&lt;h2&gt;Estrutural&lt;/h2&gt;
&lt;p&gt;A descri√ß√£o estrutural √© a maneira mais direta de se descrever uma fun√ß√£o combinat√≥ria. Consiste em descrever o circuito a partir da pr√≥pria fun√ß√£o l√≥gica que o representa. O equivalente em um diagrama esquem√°tico √© exatamente a &lt;strong&gt;fun√ß√£o l√≥gica&lt;/strong&gt;, como descrita usando as portas l√≥gicas equivalentes. A desvantagem √© que a descri√ß√£o √© prolixa e consequentemente torna-se rapidamente dif√≠cil de ler, raz√£o pela qual n√£o √© recomendada para circuitos grandes. Caso opte por este tipo de descri√ß√£o utilize uma t√©cnica de projeto baseada em divis√£o e conquista e mantenha os blocos que usam descri√ß√£o estrutural pequenos, minimizando o esfor√ßo necess√°rio para compreender o seu funcionamento.&lt;/p&gt;
&lt;p&gt;VHDL suporta os seguintes &lt;strong&gt;operadores l√≥gicos&lt;/strong&gt; para descrever circuitos estruturais:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="right"&gt;Operador&lt;/th&gt;
&lt;th align="left"&gt;Descri√ß√£o&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;not&lt;/code&gt;&lt;/td&gt;
&lt;td align="left"&gt;complemento&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;and&lt;/code&gt;&lt;/td&gt;
&lt;td align="left"&gt;E&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;or&lt;/code&gt;&lt;/td&gt;
&lt;td align="left"&gt;OU&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;nand&lt;/code&gt;&lt;/td&gt;
&lt;td align="left"&gt;E-negado&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;nor&lt;/code&gt;&lt;/td&gt;
&lt;td align="left"&gt;OU-negado&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;xor&lt;/code&gt;&lt;/td&gt;
&lt;td align="left"&gt;OU-exclusivo&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;xnor&lt;/code&gt;&lt;/td&gt;
&lt;td align="left"&gt;OU-exclusivo-negado&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Os operadores est√£o em ordem decrescente de prioridade, ou seja, o &lt;code&gt;not&lt;/code&gt; tem preced√™ncia sobre todos os demais operadores. Aconselha-se a utiliza√ß√£o de par√™nteses &lt;code&gt;()&lt;/code&gt; para deixar claro a inten√ß√£o do projetista. Todos os operadores podem operar sobre tipos booleanos, bits ou vetores unidimensionais de bits (bits podem ser do tipo &lt;code&gt;bit&lt;/code&gt; ou derivados como &lt;code&gt;std_logic&lt;/code&gt;). √â necess√°rio que os operandos sejam do mesmo tamanho e o resultado √© sempre igual √† entrada (i.e. se os operandos s√£o vetores de bits, o resultado √© um vetor de bits). Quando o tipo √© um vetor, o resultado √© calculado bit a bit (l√≥gica bin√°ria ou &lt;em&gt;bitwise&lt;/em&gt;).&lt;/p&gt;
&lt;h3&gt;Exemplo&lt;/h3&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/vhdl/mux.png' align="left" style="padding-right:5%" /&gt;
Este exemplo √© um multiplexador 2x1 com entradas &lt;code&gt;a&lt;/code&gt; e &lt;code&gt;b&lt;/code&gt;, sa√≠da &lt;code&gt;o&lt;/code&gt; e seletor &lt;code&gt;s&lt;/code&gt;. As entradas podem ser vetores (e.g. &lt;code&gt;bit_vector(3 downto 0)&lt;/code&gt;), mas nesse caso √© necess√°rio que o seletor &lt;code&gt;s&lt;/code&gt; tamb√©m seja um vetor do mesmo tamanho.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="k"&gt;or&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;&lt;br/&gt;&lt;/p&gt;
&lt;h2&gt;With-select&lt;/h2&gt;
&lt;p&gt;O &lt;code&gt;with-select&lt;/code&gt; √© a representa√ß√£o da &lt;strong&gt;tabela verdade&lt;/strong&gt; de uma fun√ß√£o l√≥gica. N√£o h√° equivalente em um diagrama esquem√°tico. O mais pr√≥ximo seria uma LUT (&lt;em&gt;LookUp Table&lt;/em&gt;), mas a s√≠ntese n√£o necessariamente utiliza esta abordagem (e.g. dependendo das otimiza√ß√µes feitas pelo sintetizador, pode ser feita usando um arranjo de portas l√≥gicas que implemente a fun√ß√£o equivalente).&lt;/p&gt;
&lt;p&gt;Sintaxe do &lt;code&gt;with-select&lt;/code&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;sinalSelecao&lt;/span&gt; &lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;sinalSaida&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;
  &lt;span class="n"&gt;valorSaida1&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;valorSelecao1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="n"&gt;valorSaida2&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;valorSelecao2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="n"&gt;valorSaida3&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="k"&gt;others&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;No &lt;code&gt;with-select&lt;/code&gt;, a atribui√ß√£o ao &lt;code&gt;sinalSaida&lt;/code&gt; √© feita atrav√©s de uma compara√ß√£o de igualdade com o sinal de sele√ß√£o &lt;code&gt;sinalSelecao&lt;/code&gt;. O valores a serem comparados s√£o os expressos como &lt;code&gt;valorSelecao&lt;/code&gt; (e.g. se a o valor do sinal &lt;code&gt;sinalSelecao&lt;/code&gt; for igual a &lt;code&gt;valorSelecao1&lt;/code&gt;, o sinal &lt;code&gt;sinalSaida&lt;/code&gt; ser√° &lt;code&gt;valorSaida1&lt;/code&gt;). N√£o √© necess√°rio que o n√∫mero de entradas seja m√∫ltiplo de uma pot√™ncia de dois e os valores de sa√≠da &lt;code&gt;valorSaida&lt;/code&gt; podem ser outros sinais ou express√µes. Os valores para compara√ß√£o devem ser constantes ou serem pass√≠veis de resolu√ß√£o (i.e. n√£o devem ser vari√°veis ou valores transitivos). Tanto a entrada de sele√ß√£o quando a sa√≠da podem ser vetores. &lt;strong&gt;Aten√ß√£o:&lt;/strong&gt; √© fortemente recomendada a descri√ß√£o da &lt;a href="#others"&gt;op√ß√£o padr√£o&lt;/a&gt; (compara√ß√£o com &lt;code&gt;others&lt;/code&gt;).&lt;/p&gt;
&lt;h3&gt;Exemplo&lt;/h3&gt;
&lt;table align="left" style="border-right: 30px solid #fff;"&gt;
  &lt;tr&gt;&lt;th&gt;s&lt;/th&gt;&lt;th&gt;a&lt;/th&gt;&lt;th&gt;b&lt;/th&gt;&lt;th&gt;&lt;/th&gt;&lt;th&gt;o&lt;/th&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;

&lt;p&gt;Este exemplo √© um multiplexador 2x1 com entradas &lt;code&gt;a&lt;/code&gt; e &lt;code&gt;b&lt;/code&gt;, sa√≠da &lt;code&gt;o&lt;/code&gt; e seletor &lt;code&gt;s&lt;/code&gt;. Lembre-se que um seletor de um multiplexador deve ter tamanho &lt;code&gt;ceil(log2(n))&lt;/code&gt;, onde &lt;code&gt;n&lt;/code&gt; √© o n√∫mero de entradas, portanto √© poss√≠vel que ele seja um vetor. Neste exemplo, como h√° duas entradas, o seletor &lt;code&gt;s&lt;/code&gt; tem somente um bit (&lt;code&gt;ceil(log2(2))=1&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Vers√£o com sa√≠das como constantes:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;signal&lt;/span&gt; &lt;span class="n"&gt;sel&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;bit_vector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="k"&gt;downto&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;-- Declara√ß√£o&lt;/span&gt;
&lt;span class="n"&gt;sel&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;-- Concatena√ß√£o&lt;/span&gt;
&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;sel&lt;/span&gt; &lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;
  &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;000&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;001&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;010&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;011&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;100&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;101&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;110&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="k"&gt;others&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Note que este √© um trecho de c√≥digo de uma descri√ß√£o: a declara√ß√£o do sinal deve estar no local apropriado dentro da arquitetura (antes do &lt;code&gt;begin&lt;/code&gt;), assim como a atribui√ß√£o ao sinal &lt;code&gt;sel&lt;/code&gt; (concatena√ß√£o, depois do &lt;code&gt;begin&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Vers√£o com sa√≠das como sinais:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;
  &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="k"&gt;others&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;A vantagem √© muito clara quando se tem uma fun√ß√£o l√≥gica expressa na forma de uma tabela verdade. No entanto, esta op√ß√£o tem a desvantagem de ser prolixa. Note a diferen√ßa entre as duas vers√µes acima: a &lt;em&gt;vers√£o com as sa√≠das como sinais&lt;/em&gt; √© compacta e pass√≠vel de utiliza√ß√£o. J√° a &lt;em&gt;vers√£o com sa√≠das como constantes&lt;/em&gt; √© uma transcri√ß√£o da tabela verdade e pode se tornar impratic√°vel (ou ileg√≠vel) rapidamente pois a tabela cresce exponencialmente ao n√∫mero de entradas (lembre-se que a tabela verdade ter√° &lt;code&gt;2^n&lt;/code&gt; linhas, onde &lt;code&gt;n&lt;/code&gt; √© o n√∫mero de entradas).&lt;/p&gt;
&lt;h2&gt;When-else&lt;/h2&gt;
&lt;p&gt;O &lt;code&gt;when-else&lt;/code&gt; √© uma maneira f√°cil de descrever funcionalmente um circuito com v√°rias fun√ß√µes l√≥gicas. O equivalente a um diagrama esquem√°tico √© um &lt;strong&gt;multiplexador&lt;/strong&gt;, cujas entradas s√£o fun√ß√µes l√≥gicas.&lt;/p&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/vhdl/mux_exp.png' align="left" style="padding-right:5%" /&gt;
Sintaxe do &lt;code&gt;when-else&lt;/code&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;sinal&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;expressao1&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;condicao1&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt;
         &lt;span class="n"&gt;expressao2&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;condicao2&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt;
         &lt;span class="n"&gt;expressao3&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;A atribui√ß√£o acontece de acordo com a primeira condi√ß√£o atendida, em ordem (e.g. se a &lt;code&gt;condicao1&lt;/code&gt; for atendida, o &lt;code&gt;sinal&lt;/code&gt; ser√° &lt;code&gt;expressao1&lt;/code&gt; e as demais condi√ß√µes n√£o ser√£o avaliadas). &lt;strong&gt;Aten√ß√£o:&lt;/strong&gt; √© fortemente recomendada a descri√ß√£o da &lt;a href="#others"&gt;op√ß√£o padr√£o&lt;/a&gt; (atribui√ß√£o para a &lt;code&gt;expressao3&lt;/code&gt; no &lt;code&gt;else&lt;/code&gt; final sem condi√ß√£o), que ser√° a atribui√ß√£o caso nenhuma condi√ß√£o for atendida.&lt;/p&gt;
&lt;h3&gt;Exemplo&lt;/h3&gt;
&lt;p&gt;&lt;img src='https://balbertini.github.io/images/vhdl/mux2x1.png' align="left" style="padding-right:5%" /&gt;
Este exemplo √© um multiplexador 2x1 com entradas &lt;code&gt;a&lt;/code&gt; e &lt;code&gt;b&lt;/code&gt;, sa√≠da &lt;code&gt;o&lt;/code&gt; e seletor &lt;code&gt;s&lt;/code&gt;. As entradas podem ser vetores (e.g. &lt;code&gt;bit_vector(3 downto 0)&lt;/code&gt;). Lembre-se que um seletor de um multiplexador deve ter tamanho &lt;code&gt;ceil(log2(n))&lt;/code&gt;, onde &lt;code&gt;n&lt;/code&gt; √© o n√∫mero de entradas, portanto √© poss√≠vel que ele seja um vetor. Neste exemplo, como h√° duas entradas, o seletor &lt;code&gt;s&lt;/code&gt; tem somente um bit (&lt;code&gt;ceil(log2(2))=1&lt;/code&gt;).&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;&lt;a name="others"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Op√ß√£o padr√£o&lt;/h2&gt;
&lt;p&gt;Os operadores em VHDL possuem uma op√ß√£o padr√£o indicada pela palavra chave &lt;code&gt;others&lt;/code&gt; ou no √∫ltimo &lt;code&gt;else&lt;/code&gt;, que ser√° a atribui√ß√£o a ser realizada caso nenhuma condi√ß√£o anterior for atendida. Se a op√ß√£o padr√£o n√£o for especificada, a atribui√ß√£o √© considerada uma &lt;em&gt;atribui√ß√£o incompleta&lt;/em&gt; e a s√≠ntese poder√° inferir um &lt;em&gt;latch&lt;/em&gt;, tornando o circuito sequencial. Uma maneira f√°cil de especificar a op√ß√£o padr√£o √© deixar o √∫ltimo valor poss√≠vel sem escolha, ou seja, caso nenhuma das op√ß√µes anteriores atenda a atribui√ß√£o condicional, a √∫ltima op√ß√£o ser√° tomada.&lt;/p&gt;
&lt;p&gt;Quando se utiliza tipos &lt;code&gt;std_logic&lt;/code&gt; e derivados, tamb√©m √© comum a op√ß√£o padr√£o ser a atribui√ß√£o para &lt;code&gt;X&lt;/code&gt; (valor desconhecido ou &lt;em&gt;unknown&lt;/em&gt;), mas n√£o recomendo esta abordagem pois o valor &lt;code&gt;X&lt;/code&gt; n√£o √© sintetiz√°vel. Para simula√ß√£o e depura√ß√£o, o valor ser√° mostrado como &lt;code&gt;X&lt;/code&gt;, o que pode facilitar a depura√ß√£o do circuito. Contudo, ap√≥s a s√≠ntese a atribui√ß√£o &lt;code&gt;X&lt;/code&gt; ir√° assumir um valor bin√°rio, o que torna dif√≠cil a identifica√ß√£o de problemas com o circuito funcionando pois pode n√£o ser poss√≠vel distingu√≠-lo de um valor leg√≠timo.&lt;/p&gt;
&lt;p&gt;√â &lt;strong&gt;fortemente recomendada&lt;/strong&gt; a utiliza√ß√£o da op√ß√£o padr√£o quando se utiliza as constru√ß√µes &lt;code&gt;when-else&lt;/code&gt; ou &lt;code&gt;with-select&lt;/code&gt; para descrever circuitos combinat√≥rios pois, se a atribui√ß√£o for incompleta o circuito pode n√£o operar como desejado.&lt;/p&gt;
&lt;h2&gt;Outras maneiras&lt;/h2&gt;
&lt;p&gt;H√° outras maneiras de se descrever circuitos combinat√≥rios em VHDL. Dois exemplos comuns que &lt;strong&gt;n√£o s√£o  recomendados&lt;/strong&gt; utilizam o &lt;code&gt;case&lt;/code&gt; e o &lt;code&gt;if-else&lt;/code&gt;. Este tipo de descri√ß√£o √© f√°cil de ser encontrado pois utiliza primitivas similares √†s encontradas em linguagens de programa√ß√£o estruturadas (e.g. C/C++, Java, etc).&lt;/p&gt;
&lt;p&gt;Os dois exemplos abaixo s√£o de um multiplexador 2x1 com entradas &lt;code&gt;a&lt;/code&gt; e &lt;code&gt;b&lt;/code&gt;, sa√≠da &lt;code&gt;o&lt;/code&gt; e seletor &lt;code&gt;s&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Com &lt;code&gt;case&lt;/code&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;-- N√ÉO UTILIZE / DO NOT USE&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
  &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;
    &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="k"&gt;others&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;case&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Com &lt;code&gt;if-else&lt;/code&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;-- N√ÉO UTILIZE / DO NOT USE&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;then&lt;/span&gt;
    &lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;else&lt;/span&gt;
    &lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="k"&gt;process&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Estas duas descri√ß√µes s√£o consideradas &lt;strong&gt;inadequadas&lt;/strong&gt; do ponto de vista de boas pr√°ticas em descri√ß√µes de hardware e s√£o &lt;strong&gt;fortemente desencorajadas&lt;/strong&gt;. O principal motivo √© que utilizam primitivas que devem estar dentro de um bloco sequencial do tipo &lt;code&gt;process&lt;/code&gt;. Apesar de estarem corretas do ponto de vista sint√°tico, este tipo de descri√ß√£o √© considerada errada do ponto de vista sem√¢ntico, pois h√° a utiliza√ß√£o de uma primitiva sequencial para descrever um circuito combinat√≥rio. Em outras palavras, voc√™ est√° dizendo ao sintetizador que quer descrever um circuito sequencial, mas na verdade est√° descrevendo um circuito combinat√≥rio.&lt;/p&gt;
&lt;p&gt;As descri√ß√µes acima ser√£o sintetizadas corretamente para um multiplexador combinat√≥rio pois n√£o possuem erros e os sintetizadores conseguir√£o perceber que se trata de um circuito combinat√≥rio mesmo na presen√ßa do &lt;code&gt;process&lt;/code&gt;. No entanto, qualquer deslize (e.g. atribui√ß√£o incompleta, esquecer um sinal na lista de sensibilidade, etc.) induzir√° o sintetizador a inserir &lt;em&gt;latches&lt;/em&gt; ou &lt;em&gt;flip-flops&lt;/em&gt; no caminho de dados. A inser√ß√£o destes elementos sequenciais em um circuito puramente combinat√≥rio pode torn√°-lo sequencial ou at√© mesmo inutilizar o circuito. O funcionamento do circuito pode n√£o ser o esperado, diferindo da inten√ß√£o do projetista.&lt;/p&gt;
&lt;p&gt;Lembre-se que estas duas √∫ltimas descri√ß√µes s√£o &lt;strong&gt;fortemente desencorajadas&lt;/strong&gt; para descrever circuitos combinat√≥rios e devem ser evitadas para este prop√≥sito. Utilize uma das tr√™s op√ß√µes no come√ßo desta p√°gina para descrever o seu circuito combinat√≥rio. &lt;strong&gt;Aten√ß√£o:&lt;/strong&gt; se voc√™ √© meu aluno n√£o utilize descri√ß√µes de circuitos combinat√≥rios usando &lt;code&gt;process&lt;/code&gt; em nenhuma hip√≥tese.&lt;/p&gt;</content><category term="vhdl"></category><category term="vhdl"></category><category term="combinatorios"></category></entry></feed>